[2020-12-31T02:56:23.7765092+00:00][INFO][1][Microsoft.EntityFrameworkCore.Infrastructure] Entity Framework Core "5.0.1" initialized '"IdentityServerDataProtectionDbContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=EventManager.Identity.Admin.EntityFramework.SqlServer "
[2020-12-31T02:56:25.8840168+00:00][INFO][1][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("48"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[FriendlyName], [d].[Xml]
FROM [DataProtectionKeys] AS [d]"
[2020-12-31T02:56:26.1358317+00:00][INFO][1][IdentityServer4.Startup] Starting IdentityServer4 version "4.1.1+cebd52f5bc61bdefc262fd20739d4d087c6f961f"
[2020-12-31T02:56:26.1964083+00:00][DBUG][1][IdentityServer4.Startup] Custom IssuerUri set to "https://sts.em.host"
[2020-12-31T02:56:26.2065169+00:00][INFO][1][IdentityServer4.Startup] Using the default authentication scheme "Identity.Application" for IdentityServer
[2020-12-31T02:56:26.2073131+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.Application" as default ASP.NET Core scheme for authentication
[2020-12-31T02:56:26.2123470+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.External" as default ASP.NET Core scheme for sign-in
[2020-12-31T02:56:26.2129777+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.External" as default ASP.NET Core scheme for sign-out
[2020-12-31T02:56:26.2143914+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.Application" as default ASP.NET Core scheme for challenge
[2020-12-31T02:56:26.2149545+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.Application" as default ASP.NET Core scheme for forbid
[2020-12-31T02:56:26.8390452+00:00][INFO][1][Microsoft.Hosting.Lifetime] Now listening on: "https://[::]:50003"
[2020-12-31T02:56:26.8465488+00:00][INFO][1][Microsoft.Hosting.Lifetime] Application started. Press Ctrl+C to shut down.
[2020-12-31T02:56:26.8486247+00:00][INFO][1][Microsoft.Hosting.Lifetime] Hosting environment: "Development"
[2020-12-31T02:56:26.8786739+00:00][INFO][1][Microsoft.Hosting.Lifetime] Content root path: "/app"
[2020-12-31T03:00:47.9596686+00:00][INFO][7][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://sts.em.host/.well-known/openid-configuration - -
[2020-12-31T03:00:48.0371758+00:00][DBUG][7][IdentityServer4.Startup] Login Url: "/Account/Login"
[2020-12-31T03:00:48.0379514+00:00][DBUG][7][IdentityServer4.Startup] Login Return Url Parameter: "ReturnUrl"
[2020-12-31T03:00:48.0385786+00:00][DBUG][7][IdentityServer4.Startup] Logout Url: "/Account/Logout"
[2020-12-31T03:00:48.0391265+00:00][DBUG][7][IdentityServer4.Startup] ConsentUrl Url: "/consent"
[2020-12-31T03:00:48.0407001+00:00][DBUG][7][IdentityServer4.Startup] Consent Return Url Parameter: "returnUrl"
[2020-12-31T03:00:48.0445512+00:00][DBUG][7][IdentityServer4.Startup] Error Url: "/home/error"
[2020-12-31T03:00:48.0458203+00:00][DBUG][7][IdentityServer4.Startup] Error Id Parameter: "errorId"
[2020-12-31T03:00:48.1128364+00:00][DBUG][7][IdentityServer4.Hosting.EndpointRouter] Request path "/.well-known/openid-configuration" matched to endpoint type "Discovery"
[2020-12-31T03:00:48.1486023+00:00][DBUG][7][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Discovery", successfully created handler: "IdentityServer4.Endpoints.DiscoveryEndpoint"
[2020-12-31T03:00:48.1542930+00:00][INFO][7][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
[2020-12-31T03:00:48.1602477+00:00][DBUG][7][IdentityServer4.Endpoints.DiscoveryEndpoint] Start discovery request
[2020-12-31T03:00:48.6485013+00:00][INFO][7][Microsoft.EntityFrameworkCore.Infrastructure] Entity Framework Core "5.0.1" initialized '"IdentityServerConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=EventManager.Identity.Admin.EntityFramework.SqlServer "
[2020-12-31T03:00:48.8395413+00:00][WARN][7][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T03:00:48.9452063+00:00][INFO][16][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("41"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [i].[Id], [i].[Created], [i].[Description], [i].[DisplayName], [i].[Emphasize], [i].[Enabled], [i].[Name], [i].[NonEditable], [i].[Required], [i].[ShowInDiscoveryDocument], [i].[Updated], [i0].[Id], [i0].[IdentityResourceId], [i0].[Type], [i1].[Id], [i1].[IdentityResourceId], [i1].[Key], [i1].[Value]
FROM [IdentityResources] AS [i]
LEFT JOIN [IdentityResourceClaims] AS [i0] ON [i].[Id] = [i0].[IdentityResourceId]
LEFT JOIN [IdentityResourceProperties] AS [i1] ON [i].[Id] = [i1].[IdentityResourceId]
ORDER BY [i].[Id], [i0].[Id], [i1].[Id]"
[2020-12-31T03:00:49.1210521+00:00][WARN][16][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T03:00:49.1815541+00:00][INFO][15][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[AllowedAccessTokenSigningAlgorithms], [a].[Created], [a].[Description], [a].[DisplayName], [a].[Enabled], [a].[LastAccessed], [a].[Name], [a].[NonEditable], [a].[ShowInDiscoveryDocument], [a].[Updated], [a0].[Id], [a0].[ApiResourceId], [a0].[Created], [a0].[Description], [a0].[Expiration], [a0].[Type], [a0].[Value], [a1].[Id], [a1].[ApiResourceId], [a1].[Scope], [a2].[Id], [a2].[ApiResourceId], [a2].[Type], [a3].[Id], [a3].[ApiResourceId], [a3].[Key], [a3].[Value]
FROM [ApiResources] AS [a]
LEFT JOIN [ApiResourceSecrets] AS [a0] ON [a].[Id] = [a0].[ApiResourceId]
LEFT JOIN [ApiResourceScopes] AS [a1] ON [a].[Id] = [a1].[ApiResourceId]
LEFT JOIN [ApiResourceClaims] AS [a2] ON [a].[Id] = [a2].[ApiResourceId]
LEFT JOIN [ApiResourceProperties] AS [a3] ON [a].[Id] = [a3].[ApiResourceId]
ORDER BY [a].[Id], [a0].[Id], [a1].[Id], [a2].[Id], [a3].[Id]"
[2020-12-31T03:00:49.2076378+00:00][WARN][15][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T03:00:49.2397003+00:00][INFO][13][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Enabled], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument], [a0].[Id], [a0].[ScopeId], [a0].[Type], [a1].[Id], [a1].[Key], [a1].[ScopeId], [a1].[Value]
FROM [ApiScopes] AS [a]
LEFT JOIN [ApiScopeClaims] AS [a0] ON [a].[Id] = [a0].[ScopeId]
LEFT JOIN [ApiScopeProperties] AS [a1] ON [a].[Id] = [a1].[ScopeId]
ORDER BY [a].[Id], [a0].[Id], [a1].[Id]"
[2020-12-31T03:00:49.7658352+00:00][DBUG][13][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email", "address", "urn:em:api:scope"] as all scopes, and ["urn:em:api"] as API resources
[2020-12-31T03:00:49.8897527+00:00][INFO][13][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/.well-known/openid-configuration" responded 200 in 1913.1532 ms
[2020-12-31T03:00:49.9082764+00:00][INFO][13][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://sts.em.host/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 1950.4271ms
[2020-12-31T03:00:50.4367579+00:00][INFO][17][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://sts.em.host/.well-known/openid-configuration/jwks - -
[2020-12-31T03:00:50.4419762+00:00][DBUG][17][IdentityServer4.Hosting.EndpointRouter] Request path "/.well-known/openid-configuration/jwks" matched to endpoint type "Discovery"
[2020-12-31T03:00:50.4517307+00:00][DBUG][17][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Discovery", successfully created handler: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint"
[2020-12-31T03:00:50.4522325+00:00][INFO][17][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
[2020-12-31T03:00:50.4604180+00:00][DBUG][17][IdentityServer4.Endpoints.DiscoveryKeyEndpoint] Start key discovery request
[2020-12-31T03:00:50.6490523+00:00][INFO][17][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/.well-known/openid-configuration/jwks" responded 200 in 211.1353 ms
[2020-12-31T03:00:50.6544659+00:00][INFO][17][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://sts.em.host/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 217.5096ms
[2020-12-31T03:00:50.9449049+00:00][INFO][5][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://sts.em.host/connect/authorize?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fwww.em.host%2Fadmin%2Fidentity%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=t9tKWhWIBlWhPAzBasY6CSICzesMFu35uDA0avAiHSw&code_challenge_method=S256&response_mode=form_post&nonce=637449804507562372.NzlkMWVmNmMtN2JmYS00ZTEwLWE4OWEtNzhiOTAyZDM0NmI0MjFmY2MxMWItZTMzOS00Nzk1LTkwZGEtZGIzY2QzZjdjMjI1&state=CfDJ8IfTHaP7X4tMgtSdbTGk8GhdxT61hPi9udAw37ZD8D-0VN6ti_mbrG1Nd6SZEiLbzoYrKDC0TrZir7wrrDOfimrCHPEVI4MqpM0mDhQfI8NyheIosbLsHiTyl7PE7z-ZmWYsV1igaBwxAoV0pcfLTE59ThY61f1ejc9PNxfNNajz&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0 - -
[2020-12-31T03:00:50.9552372+00:00][DBUG][5][IdentityServer4.Hosting.EndpointRouter] Request path "/connect/authorize" matched to endpoint type "Authorize"
[2020-12-31T03:00:51.1118802+00:00][DBUG][5][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Authorize", successfully created handler: "IdentityServer4.Endpoints.AuthorizeEndpoint"
[2020-12-31T03:00:51.1124361+00:00][INFO][5][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize"
[2020-12-31T03:00:51.1214475+00:00][DBUG][5][IdentityServer4.Endpoints.AuthorizeEndpoint] Start authorize request
[2020-12-31T03:00:51.1325878+00:00][DBUG][5][IdentityServer4.Endpoints.AuthorizeEndpoint] No user present in authorize request
[2020-12-31T03:00:51.1374364+00:00][DBUG][5][IdentityServer4.Validation.AuthorizeRequestValidator] Start authorize request protocol validation
[2020-12-31T03:00:51.1605080+00:00][INFO][5][Microsoft.EntityFrameworkCore.Infrastructure] Entity Framework Core "5.0.1" initialized '"IdentityServerConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=EventManager.Identity.Admin.EntityFramework.SqlServer "
[2020-12-31T03:00:51.2499692+00:00][INFO][13][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("50"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c].[Id], [c].[AbsoluteRefreshTokenLifetime], [c].[AccessTokenLifetime], [c].[AccessTokenType], [c].[AllowAccessTokensViaBrowser], [c].[AllowOfflineAccess], [c].[AllowPlainTextPkce], [c].[AllowRememberConsent], [c].[AllowedIdentityTokenSigningAlgorithms], [c].[AlwaysIncludeUserClaimsInIdToken], [c].[AlwaysSendClientClaims], [c].[AuthorizationCodeLifetime], [c].[BackChannelLogoutSessionRequired], [c].[BackChannelLogoutUri], [c].[ClientClaimsPrefix], [c].[ClientId], [c].[ClientName], [c].[ClientUri], [c].[ConsentLifetime], [c].[Created], [c].[Description], [c].[DeviceCodeLifetime], [c].[EnableLocalLogin], [c].[Enabled], [c].[FrontChannelLogoutSessionRequired], [c].[FrontChannelLogoutUri], [c].[IdentityTokenLifetime], [c].[IncludeJwtId], [c].[LastAccessed], [c].[LogoUri], [c].[NonEditable], [c].[PairWiseSubjectSalt], [c].[ProtocolType], [c].[RefreshTokenExpiration], [c].[RefreshTokenUsage], [c].[RequireClientSecret], [c].[RequireConsent], [c].[RequirePkce], [c].[RequireRequestObject], [c].[SlidingRefreshTokenLifetime], [c].[UpdateAccessTokenClaimsOnRefresh], [c].[Updated], [c].[UserCodeType], [c].[UserSsoLifetime]
FROM [Clients] AS [c]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:00:51.4021026+00:00][INFO][4][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("10"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Origin]
FROM [Clients] AS [c]
INNER JOIN [ClientCorsOrigins] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:00:51.4394927+00:00][INFO][4][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("7"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[GrantType]
FROM [Clients] AS [c]
INNER JOIN [ClientGrantTypes] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:00:51.4781109+00:00][INFO][4][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("7"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Scope]
FROM [Clients] AS [c]
INNER JOIN [ClientScopes] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:00:51.5179885+00:00][INFO][18][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("6"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Type], [c0].[Value]
FROM [Clients] AS [c]
INNER JOIN [ClientClaims] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:00:51.5429553+00:00][INFO][16][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("8"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Created], [c0].[Description], [c0].[Expiration], [c0].[Type], [c0].[Value]
FROM [Clients] AS [c]
INNER JOIN [ClientSecrets] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:00:51.5811864+00:00][INFO][13][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("5"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Provider]
FROM [Clients] AS [c]
INNER JOIN [ClientIdPRestrictions] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:00:51.6237100+00:00][INFO][18][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("26"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[PostLogoutRedirectUri]
FROM [Clients] AS [c]
INNER JOIN [ClientPostLogoutRedirectUris] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:00:51.6523495+00:00][INFO][13][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("5"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Key], [c0].[Value]
FROM [Clients] AS [c]
INNER JOIN [ClientProperties] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:00:51.6748599+00:00][INFO][16][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("6"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [Clients] AS [c]
INNER JOIN [ClientRedirectUris] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:00:51.8611753+00:00][DBUG][16][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T03:00:51.8744547+00:00][DBUG][16][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T03:00:51.8913470+00:00][DBUG][16][IdentityServer4.Validation.AuthorizeRequestValidator] Checking for PKCE parameters
[2020-12-31T03:00:52.0014676+00:00][WARN][16][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T03:00:52.0401583+00:00][INFO][18][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [i].[Id], [i].[Created], [i].[Description], [i].[DisplayName], [i].[Emphasize], [i].[Enabled], [i].[Name], [i].[NonEditable], [i].[Required], [i].[ShowInDiscoveryDocument], [i].[Updated], [i0].[Id], [i0].[IdentityResourceId], [i0].[Type], [i1].[Id], [i1].[IdentityResourceId], [i1].[Key], [i1].[Value]
FROM [IdentityResources] AS [i]
LEFT JOIN [IdentityResourceClaims] AS [i0] ON [i].[Id] = [i0].[IdentityResourceId]
LEFT JOIN [IdentityResourceProperties] AS [i1] ON [i].[Id] = [i1].[IdentityResourceId]
WHERE [i].[Name] IN (N'openid', N'profile', N'email', N'roles')
ORDER BY [i].[Id], [i0].[Id], [i1].[Id]"
[2020-12-31T03:00:52.0496451+00:00][DBUG][18][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T03:00:52.1364636+00:00][WARN][18][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T03:00:52.2757964+00:00][INFO][4][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("88"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[AllowedAccessTokenSigningAlgorithms], [a].[Created], [a].[Description], [a].[DisplayName], [a].[Enabled], [a].[LastAccessed], [a].[Name], [a].[NonEditable], [a].[ShowInDiscoveryDocument], [a].[Updated], [a0].[Id], [a0].[ApiResourceId], [a0].[Created], [a0].[Description], [a0].[Expiration], [a0].[Type], [a0].[Value], [a1].[Id], [a1].[ApiResourceId], [a1].[Scope], [a2].[Id], [a2].[ApiResourceId], [a2].[Type], [a3].[Id], [a3].[ApiResourceId], [a3].[Key], [a3].[Value]
FROM [ApiResources] AS [a]
LEFT JOIN [ApiResourceSecrets] AS [a0] ON [a].[Id] = [a0].[ApiResourceId]
LEFT JOIN [ApiResourceScopes] AS [a1] ON [a].[Id] = [a1].[ApiResourceId]
LEFT JOIN [ApiResourceClaims] AS [a2] ON [a].[Id] = [a2].[ApiResourceId]
LEFT JOIN [ApiResourceProperties] AS [a3] ON [a].[Id] = [a3].[ApiResourceId]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResourceScopes] AS [a4]
    WHERE ([a].[Id] = [a4].[ApiResourceId]) AND [a4].[Scope] IN (N'openid', N'profile', N'email', N'roles'))
ORDER BY [a].[Id], [a0].[Id], [a1].[Id], [a2].[Id], [a3].[Id]"
[2020-12-31T03:00:52.3014214+00:00][DBUG][4][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] API resources in database
[2020-12-31T03:00:52.3236617+00:00][WARN][4][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T03:00:52.3523288+00:00][INFO][18][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Enabled], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument], [a0].[Id], [a0].[ScopeId], [a0].[Type], [a1].[Id], [a1].[Key], [a1].[ScopeId], [a1].[Value]
FROM [ApiScopes] AS [a]
LEFT JOIN [ApiScopeClaims] AS [a0] ON [a].[Id] = [a0].[ScopeId]
LEFT JOIN [ApiScopeProperties] AS [a1] ON [a].[Id] = [a1].[ScopeId]
WHERE [a].[Name] IN (N'openid', N'profile', N'email', N'roles')
ORDER BY [a].[Id], [a0].[Id], [a1].[Id]"
[2020-12-31T03:00:52.3867699+00:00][DBUG][13][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] scopes in database
[2020-12-31T03:00:52.4167961+00:00][DBUG][13][IdentityServer4.Validation.AuthorizeRequestValidator] Calling into custom validator: "IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator"
[2020-12-31T03:00:52.4456008+00:00][DBUG][13][IdentityServer4.Endpoints.AuthorizeEndpoint] ValidatedAuthorizeRequest
AuthorizeRequestValidationLog { ClientId: "urn:em:client:mvc", ClientName: "Event Manager Identity Admin UI", RedirectUri: "https://www.em.host/admin/identity/signin-oidc", AllowedRedirectUris: ["https://www.em.host/admin/identity/signin-oidc"], SubjectId: "anonymous", ResponseType: "code", ResponseMode: "form_post", GrantType: "authorization_code", RequestedScopes: "openid profile email roles", State: "CfDJ8IfTHaP7X4tMgtSdbTGk8GhdxT61hPi9udAw37ZD8D-0VN6ti_mbrG1Nd6SZEiLbzoYrKDC0TrZir7wrrDOfimrCHPEVI4MqpM0mDhQfI8NyheIosbLsHiTyl7PE7z-ZmWYsV1igaBwxAoV0pcfLTE59ThY61f1ejc9PNxfNNajz", UiLocales: null, Nonce: "637449804507562372.NzlkMWVmNmMtN2JmYS00ZTEwLWE4OWEtNzhiOTAyZDM0NmI0MjFmY2MxMWItZTMzOS00Nzk1LTkwZGEtZGIzY2QzZjdjMjI1", AuthenticationContextReferenceClasses: null, DisplayMode: null, PromptMode: "", MaxAge: null, LoginHint: null, SessionId: "", Raw: [("client_id": "urn:em:client:mvc"), ("redirect_uri": "https://www.em.host/admin/identity/signin-oidc"), ("response_type": "code"), ("scope": "openid profile email roles"), ("code_challenge": "t9tKWhWIBlWhPAzBasY6CSICzesMFu35uDA0avAiHSw"), ("code_challenge_method": "S256"), ("response_mode": "form_post"), ("nonce": "637449804507562372.NzlkMWVmNmMtN2JmYS00ZTEwLWE4OWEtNzhiOTAyZDM0NmI0MjFmY2MxMWItZTMzOS00Nzk1LTkwZGEtZGIzY2QzZjdjMjI1"), ("state": "CfDJ8IfTHaP7X4tMgtSdbTGk8GhdxT61hPi9udAw37ZD8D-0VN6ti_mbrG1Nd6SZEiLbzoYrKDC0TrZir7wrrDOfimrCHPEVI4MqpM0mDhQfI8NyheIosbLsHiTyl7PE7z-ZmWYsV1igaBwxAoV0pcfLTE59ThY61f1ejc9PNxfNNajz"), ("x-client-SKU": "ID_NETSTANDARD2_0"), ("x-client-ver": "6.8.0.0")] }
[2020-12-31T03:00:52.4585544+00:00][INFO][13][IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator] Showing login: User is not authenticated
[2020-12-31T03:00:52.4726240+00:00][INFO][13][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/connect/authorize?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fwww.em.host%2Fadmin%2Fidentity%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=t9tKWhWIBlWhPAzBasY6CSICzesMFu35uDA0avAiHSw&code_challenge_method=S256&response_mode=form_post&nonce=637449804507562372.NzlkMWVmNmMtN2JmYS00ZTEwLWE4OWEtNzhiOTAyZDM0NmI0MjFmY2MxMWItZTMzOS00Nzk1LTkwZGEtZGIzY2QzZjdjMjI1&state=CfDJ8IfTHaP7X4tMgtSdbTGk8GhdxT61hPi9udAw37ZD8D-0VN6ti_mbrG1Nd6SZEiLbzoYrKDC0TrZir7wrrDOfimrCHPEVI4MqpM0mDhQfI8NyheIosbLsHiTyl7PE7z-ZmWYsV1igaBwxAoV0pcfLTE59ThY61f1ejc9PNxfNNajz&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0" responded 302 in 1526.4670 ms
[2020-12-31T03:00:52.4753833+00:00][INFO][13][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://sts.em.host/connect/authorize?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fwww.em.host%2Fadmin%2Fidentity%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=t9tKWhWIBlWhPAzBasY6CSICzesMFu35uDA0avAiHSw&code_challenge_method=S256&response_mode=form_post&nonce=637449804507562372.NzlkMWVmNmMtN2JmYS00ZTEwLWE4OWEtNzhiOTAyZDM0NmI0MjFmY2MxMWItZTMzOS00Nzk1LTkwZGEtZGIzY2QzZjdjMjI1&state=CfDJ8IfTHaP7X4tMgtSdbTGk8GhdxT61hPi9udAw37ZD8D-0VN6ti_mbrG1Nd6SZEiLbzoYrKDC0TrZir7wrrDOfimrCHPEVI4MqpM0mDhQfI8NyheIosbLsHiTyl7PE7z-ZmWYsV1igaBwxAoV0pcfLTE59ThY61f1ejc9PNxfNNajz&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0 - - - 302 0 - 1530.3031ms
[2020-12-31T03:00:52.5220096+00:00][INFO][13][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://sts.em.host/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fwww.em.host%252Fadmin%252Fidentity%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3Dt9tKWhWIBlWhPAzBasY6CSICzesMFu35uDA0avAiHSw%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D637449804507562372.NzlkMWVmNmMtN2JmYS00ZTEwLWE4OWEtNzhiOTAyZDM0NmI0MjFmY2MxMWItZTMzOS00Nzk1LTkwZGEtZGIzY2QzZjdjMjI1%26state%3DCfDJ8IfTHaP7X4tMgtSdbTGk8GhdxT61hPi9udAw37ZD8D-0VN6ti_mbrG1Nd6SZEiLbzoYrKDC0TrZir7wrrDOfimrCHPEVI4MqpM0mDhQfI8NyheIosbLsHiTyl7PE7z-ZmWYsV1igaBwxAoV0pcfLTE59ThY61f1ejc9PNxfNNajz%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0 - -
[2020-12-31T03:00:52.6307274+00:00][INFO][13][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T03:00:52.6782110+00:00][INFO][13][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with "{action = \"Login\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String)" on controller "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>" ("EventManager.Identity.STS.Identity").
[2020-12-31T03:00:52.7222139+00:00][DBUG][13][IdentityServer4.Validation.AuthorizeRequestValidator] Start authorize request protocol validation
[2020-12-31T03:00:52.7258629+00:00][INFO][13][Microsoft.EntityFrameworkCore.Infrastructure] Entity Framework Core "5.0.1" initialized '"IdentityServerConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=EventManager.Identity.Admin.EntityFramework.SqlServer "
[2020-12-31T03:00:52.7370413+00:00][INFO][16][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("5"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c].[Id], [c].[AbsoluteRefreshTokenLifetime], [c].[AccessTokenLifetime], [c].[AccessTokenType], [c].[AllowAccessTokensViaBrowser], [c].[AllowOfflineAccess], [c].[AllowPlainTextPkce], [c].[AllowRememberConsent], [c].[AllowedIdentityTokenSigningAlgorithms], [c].[AlwaysIncludeUserClaimsInIdToken], [c].[AlwaysSendClientClaims], [c].[AuthorizationCodeLifetime], [c].[BackChannelLogoutSessionRequired], [c].[BackChannelLogoutUri], [c].[ClientClaimsPrefix], [c].[ClientId], [c].[ClientName], [c].[ClientUri], [c].[ConsentLifetime], [c].[Created], [c].[Description], [c].[DeviceCodeLifetime], [c].[EnableLocalLogin], [c].[Enabled], [c].[FrontChannelLogoutSessionRequired], [c].[FrontChannelLogoutUri], [c].[IdentityTokenLifetime], [c].[IncludeJwtId], [c].[LastAccessed], [c].[LogoUri], [c].[NonEditable], [c].[PairWiseSubjectSalt], [c].[ProtocolType], [c].[RefreshTokenExpiration], [c].[RefreshTokenUsage], [c].[RequireClientSecret], [c].[RequireConsent], [c].[RequirePkce], [c].[RequireRequestObject], [c].[SlidingRefreshTokenLifetime], [c].[UpdateAccessTokenClaimsOnRefresh], [c].[Updated], [c].[UserCodeType], [c].[UserSsoLifetime]
FROM [Clients] AS [c]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:00:52.7714543+00:00][INFO][4][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("14"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Origin]
FROM [Clients] AS [c]
INNER JOIN [ClientCorsOrigins] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:00:52.8064234+00:00][INFO][16][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("5"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[GrantType]
FROM [Clients] AS [c]
INNER JOIN [ClientGrantTypes] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:00:52.8211689+00:00][INFO][18][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("4"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Scope]
FROM [Clients] AS [c]
INNER JOIN [ClientScopes] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:00:52.8349515+00:00][INFO][18][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("6"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Type], [c0].[Value]
FROM [Clients] AS [c]
INNER JOIN [ClientClaims] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:00:52.8895339+00:00][INFO][18][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("24"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Created], [c0].[Description], [c0].[Expiration], [c0].[Type], [c0].[Value]
FROM [Clients] AS [c]
INNER JOIN [ClientSecrets] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:00:52.9596082+00:00][INFO][18][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("26"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Provider]
FROM [Clients] AS [c]
INNER JOIN [ClientIdPRestrictions] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:00:52.9915933+00:00][INFO][16][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("8"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[PostLogoutRedirectUri]
FROM [Clients] AS [c]
INNER JOIN [ClientPostLogoutRedirectUris] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:00:53.0099444+00:00][INFO][18][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("6"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Key], [c0].[Value]
FROM [Clients] AS [c]
INNER JOIN [ClientProperties] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:00:53.0294117+00:00][INFO][4][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("6"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [Clients] AS [c]
INNER JOIN [ClientRedirectUris] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:00:53.0536849+00:00][DBUG][4][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T03:00:53.0901243+00:00][DBUG][4][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T03:00:53.0914414+00:00][DBUG][4][IdentityServer4.Validation.AuthorizeRequestValidator] Checking for PKCE parameters
[2020-12-31T03:00:53.1271978+00:00][INFO][16][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("34"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [i].[Id], [i].[Created], [i].[Description], [i].[DisplayName], [i].[Emphasize], [i].[Enabled], [i].[Name], [i].[NonEditable], [i].[Required], [i].[ShowInDiscoveryDocument], [i].[Updated], [i0].[Id], [i0].[IdentityResourceId], [i0].[Type], [i1].[Id], [i1].[IdentityResourceId], [i1].[Key], [i1].[Value]
FROM [IdentityResources] AS [i]
LEFT JOIN [IdentityResourceClaims] AS [i0] ON [i].[Id] = [i0].[IdentityResourceId]
LEFT JOIN [IdentityResourceProperties] AS [i1] ON [i].[Id] = [i1].[IdentityResourceId]
WHERE [i].[Name] IN (N'openid', N'profile', N'email', N'roles')
ORDER BY [i].[Id], [i0].[Id], [i1].[Id]"
[2020-12-31T03:00:53.1743440+00:00][DBUG][16][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T03:00:53.1810004+00:00][INFO][18][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[AllowedAccessTokenSigningAlgorithms], [a].[Created], [a].[Description], [a].[DisplayName], [a].[Enabled], [a].[LastAccessed], [a].[Name], [a].[NonEditable], [a].[ShowInDiscoveryDocument], [a].[Updated], [a0].[Id], [a0].[ApiResourceId], [a0].[Created], [a0].[Description], [a0].[Expiration], [a0].[Type], [a0].[Value], [a1].[Id], [a1].[ApiResourceId], [a1].[Scope], [a2].[Id], [a2].[ApiResourceId], [a2].[Type], [a3].[Id], [a3].[ApiResourceId], [a3].[Key], [a3].[Value]
FROM [ApiResources] AS [a]
LEFT JOIN [ApiResourceSecrets] AS [a0] ON [a].[Id] = [a0].[ApiResourceId]
LEFT JOIN [ApiResourceScopes] AS [a1] ON [a].[Id] = [a1].[ApiResourceId]
LEFT JOIN [ApiResourceClaims] AS [a2] ON [a].[Id] = [a2].[ApiResourceId]
LEFT JOIN [ApiResourceProperties] AS [a3] ON [a].[Id] = [a3].[ApiResourceId]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResourceScopes] AS [a4]
    WHERE ([a].[Id] = [a4].[ApiResourceId]) AND [a4].[Scope] IN (N'openid', N'profile', N'email', N'roles'))
ORDER BY [a].[Id], [a0].[Id], [a1].[Id], [a2].[Id], [a3].[Id]"
[2020-12-31T03:00:53.2032259+00:00][DBUG][4][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] API resources in database
[2020-12-31T03:00:53.2351433+00:00][INFO][16][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("29"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Enabled], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument], [a0].[Id], [a0].[ScopeId], [a0].[Type], [a1].[Id], [a1].[Key], [a1].[ScopeId], [a1].[Value]
FROM [ApiScopes] AS [a]
LEFT JOIN [ApiScopeClaims] AS [a0] ON [a].[Id] = [a0].[ScopeId]
LEFT JOIN [ApiScopeProperties] AS [a1] ON [a].[Id] = [a1].[ScopeId]
WHERE [a].[Name] IN (N'openid', N'profile', N'email', N'roles')
ORDER BY [a].[Id], [a0].[Id], [a1].[Id]"
[2020-12-31T03:00:53.2573850+00:00][DBUG][16][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] scopes in database
[2020-12-31T03:00:53.2584065+00:00][DBUG][16][IdentityServer4.Validation.AuthorizeRequestValidator] Calling into custom validator: "IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator"
[2020-12-31T03:00:53.3009077+00:00][INFO][13][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("23"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c].[Id], [c].[AbsoluteRefreshTokenLifetime], [c].[AccessTokenLifetime], [c].[AccessTokenType], [c].[AllowAccessTokensViaBrowser], [c].[AllowOfflineAccess], [c].[AllowPlainTextPkce], [c].[AllowRememberConsent], [c].[AllowedIdentityTokenSigningAlgorithms], [c].[AlwaysIncludeUserClaimsInIdToken], [c].[AlwaysSendClientClaims], [c].[AuthorizationCodeLifetime], [c].[BackChannelLogoutSessionRequired], [c].[BackChannelLogoutUri], [c].[ClientClaimsPrefix], [c].[ClientId], [c].[ClientName], [c].[ClientUri], [c].[ConsentLifetime], [c].[Created], [c].[Description], [c].[DeviceCodeLifetime], [c].[EnableLocalLogin], [c].[Enabled], [c].[FrontChannelLogoutSessionRequired], [c].[FrontChannelLogoutUri], [c].[IdentityTokenLifetime], [c].[IncludeJwtId], [c].[LastAccessed], [c].[LogoUri], [c].[NonEditable], [c].[PairWiseSubjectSalt], [c].[ProtocolType], [c].[RefreshTokenExpiration], [c].[RefreshTokenUsage], [c].[RequireClientSecret], [c].[RequireConsent], [c].[RequirePkce], [c].[RequireRequestObject], [c].[SlidingRefreshTokenLifetime], [c].[UpdateAccessTokenClaimsOnRefresh], [c].[Updated], [c].[UserCodeType], [c].[UserSsoLifetime]
FROM [Clients] AS [c]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:00:53.3098043+00:00][INFO][16][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("4"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Origin]
FROM [Clients] AS [c]
INNER JOIN [ClientCorsOrigins] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:00:53.3639735+00:00][INFO][4][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("10"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[GrantType]
FROM [Clients] AS [c]
INNER JOIN [ClientGrantTypes] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:00:53.3851019+00:00][INFO][4][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("5"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Scope]
FROM [Clients] AS [c]
INNER JOIN [ClientScopes] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:00:53.3973880+00:00][INFO][17][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("10"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Type], [c0].[Value]
FROM [Clients] AS [c]
INNER JOIN [ClientClaims] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:00:53.4236586+00:00][INFO][4][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("23"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Created], [c0].[Description], [c0].[Expiration], [c0].[Type], [c0].[Value]
FROM [Clients] AS [c]
INNER JOIN [ClientSecrets] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:00:53.4535903+00:00][INFO][15][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("23"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Provider]
FROM [Clients] AS [c]
INNER JOIN [ClientIdPRestrictions] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:00:53.5117354+00:00][INFO][16][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("26"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[PostLogoutRedirectUri]
FROM [Clients] AS [c]
INNER JOIN [ClientPostLogoutRedirectUris] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:00:53.5264000+00:00][INFO][14][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("10"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Key], [c0].[Value]
FROM [Clients] AS [c]
INNER JOIN [ClientProperties] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:00:53.5754263+00:00][INFO][15][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("17"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [Clients] AS [c]
INNER JOIN [ClientRedirectUris] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:00:53.5771564+00:00][DBUG][15][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T03:00:53.5783202+00:00][DBUG][15][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T03:00:53.6282853+00:00][INFO][15][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executing ViewResult, running view "Login".
[2020-12-31T03:00:54.8673808+00:00][INFO][15][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executed ViewResult - view "Login" executed in 1243.9939ms.
[2020-12-31T03:00:54.8742943+00:00][INFO][15][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)" in 2194.5723ms
[2020-12-31T03:00:54.8761937+00:00][INFO][15][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T03:00:54.8799987+00:00][INFO][15][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fwww.em.host%252Fadmin%252Fidentity%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3Dt9tKWhWIBlWhPAzBasY6CSICzesMFu35uDA0avAiHSw%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D637449804507562372.NzlkMWVmNmMtN2JmYS00ZTEwLWE4OWEtNzhiOTAyZDM0NmI0MjFmY2MxMWItZTMzOS00Nzk1LTkwZGEtZGIzY2QzZjdjMjI1%26state%3DCfDJ8IfTHaP7X4tMgtSdbTGk8GhdxT61hPi9udAw37ZD8D-0VN6ti_mbrG1Nd6SZEiLbzoYrKDC0TrZir7wrrDOfimrCHPEVI4MqpM0mDhQfI8NyheIosbLsHiTyl7PE7z-ZmWYsV1igaBwxAoV0pcfLTE59ThY61f1ejc9PNxfNNajz%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0" responded 200 in 2354.8003 ms
[2020-12-31T03:00:54.8908744+00:00][INFO][15][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://sts.em.host/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fwww.em.host%252Fadmin%252Fidentity%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3Dt9tKWhWIBlWhPAzBasY6CSICzesMFu35uDA0avAiHSw%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D637449804507562372.NzlkMWVmNmMtN2JmYS00ZTEwLWE4OWEtNzhiOTAyZDM0NmI0MjFmY2MxMWItZTMzOS00Nzk1LTkwZGEtZGIzY2QzZjdjMjI1%26state%3DCfDJ8IfTHaP7X4tMgtSdbTGk8GhdxT61hPi9udAw37ZD8D-0VN6ti_mbrG1Nd6SZEiLbzoYrKDC0TrZir7wrrDOfimrCHPEVI4MqpM0mDhQfI8NyheIosbLsHiTyl7PE7z-ZmWYsV1igaBwxAoV0pcfLTE59ThY61f1ejc9PNxfNNajz%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0 - - - 200 - text/html;+charset=utf-8 2368.7446ms
[2020-12-31T03:01:01.0523299+00:00][INFO][13][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 POST https://sts.em.host/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fwww.em.host%252Fadmin%252Fidentity%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3Dt9tKWhWIBlWhPAzBasY6CSICzesMFu35uDA0avAiHSw%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D637449804507562372.NzlkMWVmNmMtN2JmYS00ZTEwLWE4OWEtNzhiOTAyZDM0NmI0MjFmY2MxMWItZTMzOS00Nzk1LTkwZGEtZGIzY2QzZjdjMjI1%26state%3DCfDJ8IfTHaP7X4tMgtSdbTGk8GhdxT61hPi9udAw37ZD8D-0VN6ti_mbrG1Nd6SZEiLbzoYrKDC0TrZir7wrrDOfimrCHPEVI4MqpM0mDhQfI8NyheIosbLsHiTyl7PE7z-ZmWYsV1igaBwxAoV0pcfLTE59ThY61f1ejc9PNxfNNajz%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0 application/x-www-form-urlencoded 993
[2020-12-31T03:01:01.0639171+00:00][DBUG][13][IdentityServer4.Hosting.CorsPolicyProvider] CORS request made for path: "/Account/Login" from origin: "null" but was ignored because path was not for an allowed IdentityServer CORS endpoint
[2020-12-31T03:01:01.0685575+00:00][INFO][13][Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware] No CORS policy found for the specified request.
[2020-12-31T03:01:01.0805723+00:00][INFO][13][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T03:01:01.0951426+00:00][INFO][13][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with "{action = \"Login\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EventManager.Identity.STS.Identity.ViewModels.Account.LoginInputModel, System.String)" on controller "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>" ("EventManager.Identity.STS.Identity").
[2020-12-31T03:01:01.1450366+00:00][DBUG][13][IdentityServer4.Validation.AuthorizeRequestValidator] Start authorize request protocol validation
[2020-12-31T03:01:01.1484650+00:00][INFO][13][Microsoft.EntityFrameworkCore.Infrastructure] Entity Framework Core "5.0.1" initialized '"IdentityServerConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=EventManager.Identity.Admin.EntityFramework.SqlServer "
[2020-12-31T03:01:01.1588886+00:00][INFO][15][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("9"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c].[Id], [c].[AbsoluteRefreshTokenLifetime], [c].[AccessTokenLifetime], [c].[AccessTokenType], [c].[AllowAccessTokensViaBrowser], [c].[AllowOfflineAccess], [c].[AllowPlainTextPkce], [c].[AllowRememberConsent], [c].[AllowedIdentityTokenSigningAlgorithms], [c].[AlwaysIncludeUserClaimsInIdToken], [c].[AlwaysSendClientClaims], [c].[AuthorizationCodeLifetime], [c].[BackChannelLogoutSessionRequired], [c].[BackChannelLogoutUri], [c].[ClientClaimsPrefix], [c].[ClientId], [c].[ClientName], [c].[ClientUri], [c].[ConsentLifetime], [c].[Created], [c].[Description], [c].[DeviceCodeLifetime], [c].[EnableLocalLogin], [c].[Enabled], [c].[FrontChannelLogoutSessionRequired], [c].[FrontChannelLogoutUri], [c].[IdentityTokenLifetime], [c].[IncludeJwtId], [c].[LastAccessed], [c].[LogoUri], [c].[NonEditable], [c].[PairWiseSubjectSalt], [c].[ProtocolType], [c].[RefreshTokenExpiration], [c].[RefreshTokenUsage], [c].[RequireClientSecret], [c].[RequireConsent], [c].[RequirePkce], [c].[RequireRequestObject], [c].[SlidingRefreshTokenLifetime], [c].[UpdateAccessTokenClaimsOnRefresh], [c].[Updated], [c].[UserCodeType], [c].[UserSsoLifetime]
FROM [Clients] AS [c]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:01:01.1955752+00:00][INFO][14][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("6"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Origin]
FROM [Clients] AS [c]
INNER JOIN [ClientCorsOrigins] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:01:01.2283837+00:00][INFO][13][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("4"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[GrantType]
FROM [Clients] AS [c]
INNER JOIN [ClientGrantTypes] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:01:01.2423310+00:00][INFO][14][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("12"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Scope]
FROM [Clients] AS [c]
INNER JOIN [ClientScopes] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:01:01.2631349+00:00][INFO][13][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("18"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Type], [c0].[Value]
FROM [Clients] AS [c]
INNER JOIN [ClientClaims] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:01:01.2813086+00:00][INFO][4][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("14"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Created], [c0].[Description], [c0].[Expiration], [c0].[Type], [c0].[Value]
FROM [Clients] AS [c]
INNER JOIN [ClientSecrets] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:01:01.2933440+00:00][INFO][13][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("10"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Provider]
FROM [Clients] AS [c]
INNER JOIN [ClientIdPRestrictions] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:01:01.3278516+00:00][INFO][15][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("3"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[PostLogoutRedirectUri]
FROM [Clients] AS [c]
INNER JOIN [ClientPostLogoutRedirectUris] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:01:01.3347937+00:00][INFO][17][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("5"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Key], [c0].[Value]
FROM [Clients] AS [c]
INNER JOIN [ClientProperties] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:01:01.3517590+00:00][INFO][18][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("5"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [Clients] AS [c]
INNER JOIN [ClientRedirectUris] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:01:01.3542673+00:00][DBUG][13][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T03:01:01.3567526+00:00][DBUG][13][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T03:01:01.3573547+00:00][DBUG][13][IdentityServer4.Validation.AuthorizeRequestValidator] Checking for PKCE parameters
[2020-12-31T03:01:01.3764354+00:00][INFO][14][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [i].[Id], [i].[Created], [i].[Description], [i].[DisplayName], [i].[Emphasize], [i].[Enabled], [i].[Name], [i].[NonEditable], [i].[Required], [i].[ShowInDiscoveryDocument], [i].[Updated], [i0].[Id], [i0].[IdentityResourceId], [i0].[Type], [i1].[Id], [i1].[IdentityResourceId], [i1].[Key], [i1].[Value]
FROM [IdentityResources] AS [i]
LEFT JOIN [IdentityResourceClaims] AS [i0] ON [i].[Id] = [i0].[IdentityResourceId]
LEFT JOIN [IdentityResourceProperties] AS [i1] ON [i].[Id] = [i1].[IdentityResourceId]
WHERE [i].[Name] IN (N'openid', N'profile', N'email', N'roles')
ORDER BY [i].[Id], [i0].[Id], [i1].[Id]"
[2020-12-31T03:01:01.4002391+00:00][DBUG][13][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T03:01:01.4130527+00:00][INFO][4][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[AllowedAccessTokenSigningAlgorithms], [a].[Created], [a].[Description], [a].[DisplayName], [a].[Enabled], [a].[LastAccessed], [a].[Name], [a].[NonEditable], [a].[ShowInDiscoveryDocument], [a].[Updated], [a0].[Id], [a0].[ApiResourceId], [a0].[Created], [a0].[Description], [a0].[Expiration], [a0].[Type], [a0].[Value], [a1].[Id], [a1].[ApiResourceId], [a1].[Scope], [a2].[Id], [a2].[ApiResourceId], [a2].[Type], [a3].[Id], [a3].[ApiResourceId], [a3].[Key], [a3].[Value]
FROM [ApiResources] AS [a]
LEFT JOIN [ApiResourceSecrets] AS [a0] ON [a].[Id] = [a0].[ApiResourceId]
LEFT JOIN [ApiResourceScopes] AS [a1] ON [a].[Id] = [a1].[ApiResourceId]
LEFT JOIN [ApiResourceClaims] AS [a2] ON [a].[Id] = [a2].[ApiResourceId]
LEFT JOIN [ApiResourceProperties] AS [a3] ON [a].[Id] = [a3].[ApiResourceId]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResourceScopes] AS [a4]
    WHERE ([a].[Id] = [a4].[ApiResourceId]) AND [a4].[Scope] IN (N'openid', N'profile', N'email', N'roles'))
ORDER BY [a].[Id], [a0].[Id], [a1].[Id], [a2].[Id], [a3].[Id]"
[2020-12-31T03:01:01.4167995+00:00][DBUG][4][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] API resources in database
[2020-12-31T03:01:01.4298282+00:00][INFO][17][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Enabled], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument], [a0].[Id], [a0].[ScopeId], [a0].[Type], [a1].[Id], [a1].[Key], [a1].[ScopeId], [a1].[Value]
FROM [ApiScopes] AS [a]
LEFT JOIN [ApiScopeClaims] AS [a0] ON [a].[Id] = [a0].[ScopeId]
LEFT JOIN [ApiScopeProperties] AS [a1] ON [a].[Id] = [a1].[ScopeId]
WHERE [a].[Name] IN (N'openid', N'profile', N'email', N'roles')
ORDER BY [a].[Id], [a0].[Id], [a1].[Id]"
[2020-12-31T03:01:01.4414107+00:00][DBUG][17][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] scopes in database
[2020-12-31T03:01:01.4421685+00:00][DBUG][17][IdentityServer4.Validation.AuthorizeRequestValidator] Calling into custom validator: "IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator"
[2020-12-31T03:01:01.5422459+00:00][INFO][17][Microsoft.EntityFrameworkCore.Infrastructure] Entity Framework Core "5.0.1" initialized '"AdminIdentityDbContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=EventManager.Identity.Admin.EntityFramework.SqlServer "
[2020-12-31T03:01:01.5677294+00:00][INFO][4][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("3"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
[2020-12-31T03:01:01.6467228+00:00][INFO][8][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("4"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
[2020-12-31T03:01:01.7543735+00:00][INFO][4][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("13"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ClaimType], [u].[ClaimValue], [u].[UserId]
FROM [UserClaims] AS [u]
WHERE [u].[UserId] = @__user_Id_0"
[2020-12-31T03:01:01.8432302+00:00][INFO][16][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("8"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [r].[Name]
FROM [UserRoles] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0"
[2020-12-31T03:01:01.8950520+00:00][INFO][5][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("8"ms) [Parameters=["@__normalizedName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0"
[2020-12-31T03:01:01.9564518+00:00][INFO][15][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("24"ms) [Parameters=["@__role_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [r].[ClaimType], [r].[ClaimValue]
FROM [RoleClaims] AS [r]
WHERE [r].[RoleId] = @__role_Id_0"
[2020-12-31T03:01:01.9882465+00:00][DBUG][5][IdentityServer4.Hosting.IdentityServerAuthenticationService] Augmenting SignInContext
[2020-12-31T03:01:01.9907897+00:00][DBUG][5][IdentityServer4.Hosting.IdentityServerAuthenticationService] Adding idp claim with value: "local"
[2020-12-31T03:01:01.9917879+00:00][DBUG][5][IdentityServer4.Hosting.IdentityServerAuthenticationService] Adding auth_time claim with value: "1609383661"
[2020-12-31T03:01:02.0190766+00:00][INFO][5][Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler] AuthenticationScheme: "Identity.Application" signed in.
[2020-12-31T03:01:02.0442125+00:00][INFO][5][IdentityServer4.Events.DefaultEventService] UserLoginSuccessEvent { Username: "admin", Provider: null, ProviderUserId: null, SubjectId: "174c9a38-e759-45b6-b735-470eca298a31", DisplayName: "admin", Endpoint: "UI", ClientId: null, Category: "Authentication", Name: "User Login Success", EventType: Success, Id: 1000, Message: null, ActivityId: "0HM5D7131COU2:00000002", TimeStamp: 12/31/2020 03:01:02, ProcessId: 1039, LocalIpAddress: "::ffff:172.19.0.7:50003", RemoteIpAddress: "172.19.0.1" }
[2020-12-31T03:01:02.0614547+00:00][INFO][5][Microsoft.AspNetCore.Mvc.Infrastructure.RedirectResultExecutor] Executing RedirectResult, redirecting to "/connect/authorize/callback?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fwww.em.host%2Fadmin%2Fidentity%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=t9tKWhWIBlWhPAzBasY6CSICzesMFu35uDA0avAiHSw&code_challenge_method=S256&response_mode=form_post&nonce=637449804507562372.NzlkMWVmNmMtN2JmYS00ZTEwLWE4OWEtNzhiOTAyZDM0NmI0MjFmY2MxMWItZTMzOS00Nzk1LTkwZGEtZGIzY2QzZjdjMjI1&state=CfDJ8IfTHaP7X4tMgtSdbTGk8GhdxT61hPi9udAw37ZD8D-0VN6ti_mbrG1Nd6SZEiLbzoYrKDC0TrZir7wrrDOfimrCHPEVI4MqpM0mDhQfI8NyheIosbLsHiTyl7PE7z-ZmWYsV1igaBwxAoV0pcfLTE59ThY61f1ejc9PNxfNNajz&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0".
[2020-12-31T03:01:02.0626007+00:00][INFO][5][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)" in 966.8442ms
[2020-12-31T03:01:02.0633271+00:00][INFO][5][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T03:01:02.0643681+00:00][INFO][5][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "POST" "/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fwww.em.host%252Fadmin%252Fidentity%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3Dt9tKWhWIBlWhPAzBasY6CSICzesMFu35uDA0avAiHSw%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D637449804507562372.NzlkMWVmNmMtN2JmYS00ZTEwLWE4OWEtNzhiOTAyZDM0NmI0MjFmY2MxMWItZTMzOS00Nzk1LTkwZGEtZGIzY2QzZjdjMjI1%26state%3DCfDJ8IfTHaP7X4tMgtSdbTGk8GhdxT61hPi9udAw37ZD8D-0VN6ti_mbrG1Nd6SZEiLbzoYrKDC0TrZir7wrrDOfimrCHPEVI4MqpM0mDhQfI8NyheIosbLsHiTyl7PE7z-ZmWYsV1igaBwxAoV0pcfLTE59ThY61f1ejc9PNxfNNajz%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0" responded 302 in 1009.4562 ms
[2020-12-31T03:01:02.0660187+00:00][INFO][5][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 POST https://sts.em.host/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fwww.em.host%252Fadmin%252Fidentity%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3Dt9tKWhWIBlWhPAzBasY6CSICzesMFu35uDA0avAiHSw%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D637449804507562372.NzlkMWVmNmMtN2JmYS00ZTEwLWE4OWEtNzhiOTAyZDM0NmI0MjFmY2MxMWItZTMzOS00Nzk1LTkwZGEtZGIzY2QzZjdjMjI1%26state%3DCfDJ8IfTHaP7X4tMgtSdbTGk8GhdxT61hPi9udAw37ZD8D-0VN6ti_mbrG1Nd6SZEiLbzoYrKDC0TrZir7wrrDOfimrCHPEVI4MqpM0mDhQfI8NyheIosbLsHiTyl7PE7z-ZmWYsV1igaBwxAoV0pcfLTE59ThY61f1ejc9PNxfNNajz%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0 application/x-www-form-urlencoded 993 - 302 0 - 1013.8229ms
[2020-12-31T03:01:02.1833352+00:00][INFO][15][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://sts.em.host/connect/authorize/callback?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fwww.em.host%2Fadmin%2Fidentity%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=t9tKWhWIBlWhPAzBasY6CSICzesMFu35uDA0avAiHSw&code_challenge_method=S256&response_mode=form_post&nonce=637449804507562372.NzlkMWVmNmMtN2JmYS00ZTEwLWE4OWEtNzhiOTAyZDM0NmI0MjFmY2MxMWItZTMzOS00Nzk1LTkwZGEtZGIzY2QzZjdjMjI1&state=CfDJ8IfTHaP7X4tMgtSdbTGk8GhdxT61hPi9udAw37ZD8D-0VN6ti_mbrG1Nd6SZEiLbzoYrKDC0TrZir7wrrDOfimrCHPEVI4MqpM0mDhQfI8NyheIosbLsHiTyl7PE7z-ZmWYsV1igaBwxAoV0pcfLTE59ThY61f1ejc9PNxfNNajz&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0 - -
[2020-12-31T03:01:02.1975981+00:00][DBUG][15][IdentityServer4.Hosting.EndpointRouter] Request path "/connect/authorize/callback" matched to endpoint type "Authorize"
[2020-12-31T03:01:02.2037344+00:00][DBUG][15][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Authorize", successfully created handler: "IdentityServer4.Endpoints.AuthorizeCallbackEndpoint"
[2020-12-31T03:01:02.2047048+00:00][INFO][15][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeCallbackEndpoint" for "/connect/authorize/callback"
[2020-12-31T03:01:02.2203119+00:00][DBUG][15][IdentityServer4.Endpoints.AuthorizeCallbackEndpoint] Start authorize callback request
[2020-12-31T03:01:02.2322802+00:00][DBUG][15][IdentityServer4.Endpoints.AuthorizeCallbackEndpoint] User in authorize request: "174c9a38-e759-45b6-b735-470eca298a31"
[2020-12-31T03:01:02.2333655+00:00][DBUG][15][IdentityServer4.Validation.AuthorizeRequestValidator] Start authorize request protocol validation
[2020-12-31T03:01:02.2353788+00:00][INFO][15][Microsoft.EntityFrameworkCore.Infrastructure] Entity Framework Core "5.0.1" initialized '"IdentityServerConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=EventManager.Identity.Admin.EntityFramework.SqlServer "
[2020-12-31T03:01:02.2501398+00:00][INFO][5][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("3"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c].[Id], [c].[AbsoluteRefreshTokenLifetime], [c].[AccessTokenLifetime], [c].[AccessTokenType], [c].[AllowAccessTokensViaBrowser], [c].[AllowOfflineAccess], [c].[AllowPlainTextPkce], [c].[AllowRememberConsent], [c].[AllowedIdentityTokenSigningAlgorithms], [c].[AlwaysIncludeUserClaimsInIdToken], [c].[AlwaysSendClientClaims], [c].[AuthorizationCodeLifetime], [c].[BackChannelLogoutSessionRequired], [c].[BackChannelLogoutUri], [c].[ClientClaimsPrefix], [c].[ClientId], [c].[ClientName], [c].[ClientUri], [c].[ConsentLifetime], [c].[Created], [c].[Description], [c].[DeviceCodeLifetime], [c].[EnableLocalLogin], [c].[Enabled], [c].[FrontChannelLogoutSessionRequired], [c].[FrontChannelLogoutUri], [c].[IdentityTokenLifetime], [c].[IncludeJwtId], [c].[LastAccessed], [c].[LogoUri], [c].[NonEditable], [c].[PairWiseSubjectSalt], [c].[ProtocolType], [c].[RefreshTokenExpiration], [c].[RefreshTokenUsage], [c].[RequireClientSecret], [c].[RequireConsent], [c].[RequirePkce], [c].[RequireRequestObject], [c].[SlidingRefreshTokenLifetime], [c].[UpdateAccessTokenClaimsOnRefresh], [c].[Updated], [c].[UserCodeType], [c].[UserSsoLifetime]
FROM [Clients] AS [c]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:01:02.3037595+00:00][INFO][7][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("25"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Origin]
FROM [Clients] AS [c]
INNER JOIN [ClientCorsOrigins] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:01:02.3238034+00:00][INFO][14][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("5"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[GrantType]
FROM [Clients] AS [c]
INNER JOIN [ClientGrantTypes] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:01:02.3405258+00:00][INFO][5][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("8"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Scope]
FROM [Clients] AS [c]
INNER JOIN [ClientScopes] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:01:02.3496841+00:00][INFO][8][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("6"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Type], [c0].[Value]
FROM [Clients] AS [c]
INNER JOIN [ClientClaims] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:01:02.3654054+00:00][INFO][17][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("5"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Created], [c0].[Description], [c0].[Expiration], [c0].[Type], [c0].[Value]
FROM [Clients] AS [c]
INNER JOIN [ClientSecrets] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:01:02.4007449+00:00][INFO][14][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("33"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Provider]
FROM [Clients] AS [c]
INNER JOIN [ClientIdPRestrictions] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:01:02.4258233+00:00][INFO][4][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("20"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[PostLogoutRedirectUri]
FROM [Clients] AS [c]
INNER JOIN [ClientPostLogoutRedirectUris] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:01:02.4463230+00:00][INFO][4][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("5"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Key], [c0].[Value]
FROM [Clients] AS [c]
INNER JOIN [ClientProperties] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:01:02.4832685+00:00][INFO][18][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("4"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [Clients] AS [c]
INNER JOIN [ClientRedirectUris] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:01:02.4992592+00:00][DBUG][14][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T03:01:02.5010444+00:00][DBUG][14][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T03:01:02.5026614+00:00][DBUG][14][IdentityServer4.Validation.AuthorizeRequestValidator] Checking for PKCE parameters
[2020-12-31T03:01:02.5221040+00:00][INFO][14][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [i].[Id], [i].[Created], [i].[Description], [i].[DisplayName], [i].[Emphasize], [i].[Enabled], [i].[Name], [i].[NonEditable], [i].[Required], [i].[ShowInDiscoveryDocument], [i].[Updated], [i0].[Id], [i0].[IdentityResourceId], [i0].[Type], [i1].[Id], [i1].[IdentityResourceId], [i1].[Key], [i1].[Value]
FROM [IdentityResources] AS [i]
LEFT JOIN [IdentityResourceClaims] AS [i0] ON [i].[Id] = [i0].[IdentityResourceId]
LEFT JOIN [IdentityResourceProperties] AS [i1] ON [i].[Id] = [i1].[IdentityResourceId]
WHERE [i].[Name] IN (N'openid', N'profile', N'email', N'roles')
ORDER BY [i].[Id], [i0].[Id], [i1].[Id]"
[2020-12-31T03:01:02.5254594+00:00][DBUG][14][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T03:01:02.5404039+00:00][INFO][14][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[AllowedAccessTokenSigningAlgorithms], [a].[Created], [a].[Description], [a].[DisplayName], [a].[Enabled], [a].[LastAccessed], [a].[Name], [a].[NonEditable], [a].[ShowInDiscoveryDocument], [a].[Updated], [a0].[Id], [a0].[ApiResourceId], [a0].[Created], [a0].[Description], [a0].[Expiration], [a0].[Type], [a0].[Value], [a1].[Id], [a1].[ApiResourceId], [a1].[Scope], [a2].[Id], [a2].[ApiResourceId], [a2].[Type], [a3].[Id], [a3].[ApiResourceId], [a3].[Key], [a3].[Value]
FROM [ApiResources] AS [a]
LEFT JOIN [ApiResourceSecrets] AS [a0] ON [a].[Id] = [a0].[ApiResourceId]
LEFT JOIN [ApiResourceScopes] AS [a1] ON [a].[Id] = [a1].[ApiResourceId]
LEFT JOIN [ApiResourceClaims] AS [a2] ON [a].[Id] = [a2].[ApiResourceId]
LEFT JOIN [ApiResourceProperties] AS [a3] ON [a].[Id] = [a3].[ApiResourceId]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResourceScopes] AS [a4]
    WHERE ([a].[Id] = [a4].[ApiResourceId]) AND [a4].[Scope] IN (N'openid', N'profile', N'email', N'roles'))
ORDER BY [a].[Id], [a0].[Id], [a1].[Id], [a2].[Id], [a3].[Id]"
[2020-12-31T03:01:02.5429192+00:00][DBUG][14][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] API resources in database
[2020-12-31T03:01:02.5573639+00:00][INFO][13][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Enabled], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument], [a0].[Id], [a0].[ScopeId], [a0].[Type], [a1].[Id], [a1].[Key], [a1].[ScopeId], [a1].[Value]
FROM [ApiScopes] AS [a]
LEFT JOIN [ApiScopeClaims] AS [a0] ON [a].[Id] = [a0].[ScopeId]
LEFT JOIN [ApiScopeProperties] AS [a1] ON [a].[Id] = [a1].[ScopeId]
WHERE [a].[Name] IN (N'openid', N'profile', N'email', N'roles')
ORDER BY [a].[Id], [a0].[Id], [a1].[Id]"
[2020-12-31T03:01:02.5637510+00:00][DBUG][14][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] scopes in database
[2020-12-31T03:01:02.5809209+00:00][DBUG][14][IdentityServer4.Validation.AuthorizeRequestValidator] Calling into custom validator: "IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator"
[2020-12-31T03:01:02.5848653+00:00][DBUG][14][IdentityServer4.Endpoints.AuthorizeCallbackEndpoint] ValidatedAuthorizeRequest
AuthorizeRequestValidationLog { ClientId: "urn:em:client:mvc", ClientName: "Event Manager Identity Admin UI", RedirectUri: "https://www.em.host/admin/identity/signin-oidc", AllowedRedirectUris: ["https://www.em.host/admin/identity/signin-oidc"], SubjectId: "174c9a38-e759-45b6-b735-470eca298a31", ResponseType: "code", ResponseMode: "form_post", GrantType: "authorization_code", RequestedScopes: "openid profile email roles", State: "CfDJ8IfTHaP7X4tMgtSdbTGk8GhdxT61hPi9udAw37ZD8D-0VN6ti_mbrG1Nd6SZEiLbzoYrKDC0TrZir7wrrDOfimrCHPEVI4MqpM0mDhQfI8NyheIosbLsHiTyl7PE7z-ZmWYsV1igaBwxAoV0pcfLTE59ThY61f1ejc9PNxfNNajz", UiLocales: null, Nonce: "637449804507562372.NzlkMWVmNmMtN2JmYS00ZTEwLWE4OWEtNzhiOTAyZDM0NmI0MjFmY2MxMWItZTMzOS00Nzk1LTkwZGEtZGIzY2QzZjdjMjI1", AuthenticationContextReferenceClasses: null, DisplayMode: null, PromptMode: "", MaxAge: null, LoginHint: null, SessionId: "B33B7CF93B322F7D288E4900FBFE58D7", Raw: [("client_id": "urn:em:client:mvc"), ("redirect_uri": "https://www.em.host/admin/identity/signin-oidc"), ("response_type": "code"), ("scope": "openid profile email roles"), ("code_challenge": "t9tKWhWIBlWhPAzBasY6CSICzesMFu35uDA0avAiHSw"), ("code_challenge_method": "S256"), ("response_mode": "form_post"), ("nonce": "637449804507562372.NzlkMWVmNmMtN2JmYS00ZTEwLWE4OWEtNzhiOTAyZDM0NmI0MjFmY2MxMWItZTMzOS00Nzk1LTkwZGEtZGIzY2QzZjdjMjI1"), ("state": "CfDJ8IfTHaP7X4tMgtSdbTGk8GhdxT61hPi9udAw37ZD8D-0VN6ti_mbrG1Nd6SZEiLbzoYrKDC0TrZir7wrrDOfimrCHPEVI4MqpM0mDhQfI8NyheIosbLsHiTyl7PE7z-ZmWYsV1igaBwxAoV0pcfLTE59ThY61f1ejc9PNxfNNajz"), ("x-client-SKU": "ID_NETSTANDARD2_0"), ("x-client-ver": "6.8.0.0")] }
[2020-12-31T03:01:02.6193646+00:00][INFO][14][Microsoft.EntityFrameworkCore.Infrastructure] Entity Framework Core "5.0.1" initialized '"AdminIdentityDbContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=EventManager.Identity.Admin.EntityFramework.SqlServer "
[2020-12-31T03:01:02.6971609+00:00][INFO][18][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("30"ms) [Parameters=["@__p_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0"
[2020-12-31T03:01:02.7751873+00:00][DBUG][18][IdentityServer4.Services.DefaultConsentService] Client is configured to not require consent, no consent is required
[2020-12-31T03:01:02.7953063+00:00][DBUG][18][IdentityServer4.ResponseHandling.AuthorizeResponseGenerator] Creating Authorization Code Flow response.
[2020-12-31T03:01:03.1139104+00:00][INFO][18][Microsoft.EntityFrameworkCore.Infrastructure] Entity Framework Core "5.0.1" initialized '"IdentityServerPersistedGrantDbContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=EventManager.Identity.Admin.EntityFramework.SqlServer "
[2020-12-31T03:01:03.1956331+00:00][INFO][14][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("60"ms) [Parameters=["@__token_Key_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [p].[Key], [p].[ClientId], [p].[ConsumedTime], [p].[CreationTime], [p].[Data], [p].[Description], [p].[Expiration], [p].[SessionId], [p].[SubjectId], [p].[Type]
FROM [PersistedGrants] AS [p]
WHERE [p].[Key] = @__token_Key_0"
[2020-12-31T03:01:03.2649334+00:00][DBUG][18][IdentityServer4.EntityFramework.Stores.PersistedGrantStore] "ftN1sAmIYHrx4hF/cmOFxsqXuetilpHB6uermos4gbg=" not found in database
[2020-12-31T03:01:03.7394287+00:00][INFO][4][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("49"ms) [Parameters=["@p0='?' (Size = 200), @p1='?' (Size = 200), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 200), @p6='?' (DbType = DateTime2), @p7='?' (Size = 100), @p8='?' (Size = 200), @p9='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [PersistedGrants] ([Key], [ClientId], [ConsumedTime], [CreationTime], [Data], [Description], [Expiration], [SessionId], [SubjectId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);"
[2020-12-31T03:01:03.8730436+00:00][INFO][4][IdentityServer4.Events.DefaultEventService] TokenIssuedSuccessEvent { ClientId: "urn:em:client:mvc", ClientName: "Event Manager Identity Admin UI", RedirectUri: "https://www.em.host/admin/identity/signin-oidc", Endpoint: "Authorize", SubjectId: "174c9a38-e759-45b6-b735-470eca298a31", Scopes: "openid profile email roles", GrantType: "authorization_code", Tokens: [Token { TokenType: "code", TokenValue: "****A02C" }], Category: "Token", Name: "Token Issued Success", EventType: Success, Id: 2000, Message: null, ActivityId: "0HM5D7131COU3:00000002", TimeStamp: 12/31/2020 03:01:03, ProcessId: 1039, LocalIpAddress: "::ffff:172.19.0.7:50003", RemoteIpAddress: "172.19.0.1" }
[2020-12-31T03:01:03.8801595+00:00][DBUG][4][IdentityServer4.Endpoints.AuthorizeCallbackEndpoint] Authorize endpoint response
AuthorizeResponseLog { SubjectId: "174c9a38-e759-45b6-b735-470eca298a31", ClientId: "urn:em:client:mvc", RedirectUri: "https://www.em.host/admin/identity/signin-oidc", State: "CfDJ8IfTHaP7X4tMgtSdbTGk8GhdxT61hPi9udAw37ZD8D-0VN6ti_mbrG1Nd6SZEiLbzoYrKDC0TrZir7wrrDOfimrCHPEVI4MqpM0mDhQfI8NyheIosbLsHiTyl7PE7z-ZmWYsV1igaBwxAoV0pcfLTE59ThY61f1ejc9PNxfNNajz", Scope: "openid profile email roles", Error: null, ErrorDescription: null }
[2020-12-31T03:01:03.8948251+00:00][DBUG][4][IdentityServer4.Hosting.IdentityServerAuthenticationService] Augmenting SignInContext
[2020-12-31T03:01:03.8981894+00:00][INFO][4][Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler] AuthenticationScheme: "Identity.Application" signed in.
[2020-12-31T03:01:03.9093974+00:00][INFO][4][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/connect/authorize/callback?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fwww.em.host%2Fadmin%2Fidentity%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=t9tKWhWIBlWhPAzBasY6CSICzesMFu35uDA0avAiHSw&code_challenge_method=S256&response_mode=form_post&nonce=637449804507562372.NzlkMWVmNmMtN2JmYS00ZTEwLWE4OWEtNzhiOTAyZDM0NmI0MjFmY2MxMWItZTMzOS00Nzk1LTkwZGEtZGIzY2QzZjdjMjI1&state=CfDJ8IfTHaP7X4tMgtSdbTGk8GhdxT61hPi9udAw37ZD8D-0VN6ti_mbrG1Nd6SZEiLbzoYrKDC0TrZir7wrrDOfimrCHPEVI4MqpM0mDhQfI8NyheIosbLsHiTyl7PE7z-ZmWYsV1igaBwxAoV0pcfLTE59ThY61f1ejc9PNxfNNajz&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0" responded 200 in 1724.9905 ms
[2020-12-31T03:01:03.9127359+00:00][INFO][4][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://sts.em.host/connect/authorize/callback?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fwww.em.host%2Fadmin%2Fidentity%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=t9tKWhWIBlWhPAzBasY6CSICzesMFu35uDA0avAiHSw&code_challenge_method=S256&response_mode=form_post&nonce=637449804507562372.NzlkMWVmNmMtN2JmYS00ZTEwLWE4OWEtNzhiOTAyZDM0NmI0MjFmY2MxMWItZTMzOS00Nzk1LTkwZGEtZGIzY2QzZjdjMjI1&state=CfDJ8IfTHaP7X4tMgtSdbTGk8GhdxT61hPi9udAw37ZD8D-0VN6ti_mbrG1Nd6SZEiLbzoYrKDC0TrZir7wrrDOfimrCHPEVI4MqpM0mDhQfI8NyheIosbLsHiTyl7PE7z-ZmWYsV1igaBwxAoV0pcfLTE59ThY61f1ejc9PNxfNNajz&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0 - - - 200 - text/html;+charset=UTF-8 1729.1845ms
[2020-12-31T03:08:46.6009397+00:00][INFO][29][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://sts.em.host/ - -
[2020-12-31T03:08:46.6066560+00:00][INFO][29][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint '"EventManager.Identity.STS.Identity.Controllers.HomeController.Index (EventManager.Identity.STS.Identity)"'
[2020-12-31T03:08:46.6190929+00:00][INFO][29][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with "{action = \"Index\", controller = \"Home\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Index()" on controller "EventManager.Identity.STS.Identity.Controllers.HomeController" ("EventManager.Identity.STS.Identity").
[2020-12-31T03:08:46.6292626+00:00][INFO][29][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executing ViewResult, running view "Index".
[2020-12-31T03:08:46.6580158+00:00][INFO][29][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executed ViewResult - view "Index" executed in 30.9421ms.
[2020-12-31T03:08:46.6588393+00:00][INFO][29][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action "EventManager.Identity.STS.Identity.Controllers.HomeController.Index (EventManager.Identity.STS.Identity)" in 38.54ms
[2020-12-31T03:08:46.6625245+00:00][INFO][29][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint '"EventManager.Identity.STS.Identity.Controllers.HomeController.Index (EventManager.Identity.STS.Identity)"'
[2020-12-31T03:08:46.6638961+00:00][INFO][29][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/" responded 200 in 60.9320 ms
[2020-12-31T03:08:46.6669073+00:00][INFO][29][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://sts.em.host/ - - - 200 - text/html;+charset=utf-8 66.1040ms
[2020-12-31T03:10:40.0436343+00:00][INFO][25][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://sts.em.host/connect/authorize?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fwww.em.host%2Fadmin%2Fidentity%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=KeZ9P3crbz335ApHcnih53RfsWS7rHafgcgerERO6i0&code_challenge_method=S256&response_mode=form_post&nonce=637449810399591218.MjhlNGE2MWMtN2IzOS00M2Y0LThiOWItMTFiZTZlMDNiN2VjNzhiMjUxMTYtZGNkMy00MDAxLTg3MWYtNTU3ZWU4NTQ1ZWVi&state=CfDJ8IfTHaP7X4tMgtSdbTGk8GixLMSvZJ_VdGxOfhifHVxrMZRi8ioZ00RvoLNPtrg4Gfrzt1dsMyoM6Bu6kiB643SApUiYq3sD0uB0PQetwZOl0IzRtvyrsKws3fv9-j0oyp-xnRJ7SgACrUGbyJXS2BKw9rUcTINxYZtjY2idO1l0&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0 - -
[2020-12-31T03:10:40.0458770+00:00][DBUG][25][IdentityServer4.Hosting.EndpointRouter] Request path "/connect/authorize" matched to endpoint type "Authorize"
[2020-12-31T03:10:40.0486833+00:00][DBUG][25][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Authorize", successfully created handler: "IdentityServer4.Endpoints.AuthorizeEndpoint"
[2020-12-31T03:10:40.0613421+00:00][INFO][25][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize"
[2020-12-31T03:10:40.0643731+00:00][DBUG][25][IdentityServer4.Endpoints.AuthorizeEndpoint] Start authorize request
[2020-12-31T03:10:40.0731506+00:00][DBUG][25][IdentityServer4.Endpoints.AuthorizeEndpoint] No user present in authorize request
[2020-12-31T03:10:40.0746145+00:00][DBUG][25][IdentityServer4.Validation.AuthorizeRequestValidator] Start authorize request protocol validation
[2020-12-31T03:10:40.0772220+00:00][INFO][25][Microsoft.EntityFrameworkCore.Infrastructure] Entity Framework Core "5.0.1" initialized '"IdentityServerConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=EventManager.Identity.Admin.EntityFramework.SqlServer "
[2020-12-31T03:10:40.2558429+00:00][INFO][38][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("11"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c].[Id], [c].[AbsoluteRefreshTokenLifetime], [c].[AccessTokenLifetime], [c].[AccessTokenType], [c].[AllowAccessTokensViaBrowser], [c].[AllowOfflineAccess], [c].[AllowPlainTextPkce], [c].[AllowRememberConsent], [c].[AllowedIdentityTokenSigningAlgorithms], [c].[AlwaysIncludeUserClaimsInIdToken], [c].[AlwaysSendClientClaims], [c].[AuthorizationCodeLifetime], [c].[BackChannelLogoutSessionRequired], [c].[BackChannelLogoutUri], [c].[ClientClaimsPrefix], [c].[ClientId], [c].[ClientName], [c].[ClientUri], [c].[ConsentLifetime], [c].[Created], [c].[Description], [c].[DeviceCodeLifetime], [c].[EnableLocalLogin], [c].[Enabled], [c].[FrontChannelLogoutSessionRequired], [c].[FrontChannelLogoutUri], [c].[IdentityTokenLifetime], [c].[IncludeJwtId], [c].[LastAccessed], [c].[LogoUri], [c].[NonEditable], [c].[PairWiseSubjectSalt], [c].[ProtocolType], [c].[RefreshTokenExpiration], [c].[RefreshTokenUsage], [c].[RequireClientSecret], [c].[RequireConsent], [c].[RequirePkce], [c].[RequireRequestObject], [c].[SlidingRefreshTokenLifetime], [c].[UpdateAccessTokenClaimsOnRefresh], [c].[Updated], [c].[UserCodeType], [c].[UserSsoLifetime]
FROM [Clients] AS [c]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:40.3062650+00:00][INFO][34][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("23"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Origin]
FROM [Clients] AS [c]
INNER JOIN [ClientCorsOrigins] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:40.3582113+00:00][INFO][35][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("6"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[GrantType]
FROM [Clients] AS [c]
INNER JOIN [ClientGrantTypes] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:40.3765924+00:00][INFO][36][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("14"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Scope]
FROM [Clients] AS [c]
INNER JOIN [ClientScopes] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:40.3981586+00:00][INFO][36][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("5"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Type], [c0].[Value]
FROM [Clients] AS [c]
INNER JOIN [ClientClaims] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:40.4223982+00:00][INFO][38][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("14"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Created], [c0].[Description], [c0].[Expiration], [c0].[Type], [c0].[Value]
FROM [Clients] AS [c]
INNER JOIN [ClientSecrets] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:40.4444407+00:00][INFO][40][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("5"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Provider]
FROM [Clients] AS [c]
INNER JOIN [ClientIdPRestrictions] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:40.4665526+00:00][INFO][37][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("7"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[PostLogoutRedirectUri]
FROM [Clients] AS [c]
INNER JOIN [ClientPostLogoutRedirectUris] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:40.5227417+00:00][INFO][38][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("30"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Key], [c0].[Value]
FROM [Clients] AS [c]
INNER JOIN [ClientProperties] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:40.5317980+00:00][INFO][34][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("6"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [Clients] AS [c]
INNER JOIN [ClientRedirectUris] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:40.5385788+00:00][DBUG][34][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T03:10:40.5394039+00:00][DBUG][34][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T03:10:40.5401186+00:00][DBUG][34][IdentityServer4.Validation.AuthorizeRequestValidator] Checking for PKCE parameters
[2020-12-31T03:10:40.5824189+00:00][INFO][37][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("40"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [i].[Id], [i].[Created], [i].[Description], [i].[DisplayName], [i].[Emphasize], [i].[Enabled], [i].[Name], [i].[NonEditable], [i].[Required], [i].[ShowInDiscoveryDocument], [i].[Updated], [i0].[Id], [i0].[IdentityResourceId], [i0].[Type], [i1].[Id], [i1].[IdentityResourceId], [i1].[Key], [i1].[Value]
FROM [IdentityResources] AS [i]
LEFT JOIN [IdentityResourceClaims] AS [i0] ON [i].[Id] = [i0].[IdentityResourceId]
LEFT JOIN [IdentityResourceProperties] AS [i1] ON [i].[Id] = [i1].[IdentityResourceId]
WHERE [i].[Name] IN (N'openid', N'profile', N'email', N'roles')
ORDER BY [i].[Id], [i0].[Id], [i1].[Id]"
[2020-12-31T03:10:40.6082322+00:00][DBUG][37][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T03:10:40.6298238+00:00][INFO][36][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("17"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[AllowedAccessTokenSigningAlgorithms], [a].[Created], [a].[Description], [a].[DisplayName], [a].[Enabled], [a].[LastAccessed], [a].[Name], [a].[NonEditable], [a].[ShowInDiscoveryDocument], [a].[Updated], [a0].[Id], [a0].[ApiResourceId], [a0].[Created], [a0].[Description], [a0].[Expiration], [a0].[Type], [a0].[Value], [a1].[Id], [a1].[ApiResourceId], [a1].[Scope], [a2].[Id], [a2].[ApiResourceId], [a2].[Type], [a3].[Id], [a3].[ApiResourceId], [a3].[Key], [a3].[Value]
FROM [ApiResources] AS [a]
LEFT JOIN [ApiResourceSecrets] AS [a0] ON [a].[Id] = [a0].[ApiResourceId]
LEFT JOIN [ApiResourceScopes] AS [a1] ON [a].[Id] = [a1].[ApiResourceId]
LEFT JOIN [ApiResourceClaims] AS [a2] ON [a].[Id] = [a2].[ApiResourceId]
LEFT JOIN [ApiResourceProperties] AS [a3] ON [a].[Id] = [a3].[ApiResourceId]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResourceScopes] AS [a4]
    WHERE ([a].[Id] = [a4].[ApiResourceId]) AND [a4].[Scope] IN (N'openid', N'profile', N'email', N'roles'))
ORDER BY [a].[Id], [a0].[Id], [a1].[Id], [a2].[Id], [a3].[Id]"
[2020-12-31T03:10:40.6322107+00:00][DBUG][37][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] API resources in database
[2020-12-31T03:10:40.6495772+00:00][INFO][36][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Enabled], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument], [a0].[Id], [a0].[ScopeId], [a0].[Type], [a1].[Id], [a1].[Key], [a1].[ScopeId], [a1].[Value]
FROM [ApiScopes] AS [a]
LEFT JOIN [ApiScopeClaims] AS [a0] ON [a].[Id] = [a0].[ScopeId]
LEFT JOIN [ApiScopeProperties] AS [a1] ON [a].[Id] = [a1].[ScopeId]
WHERE [a].[Name] IN (N'openid', N'profile', N'email', N'roles')
ORDER BY [a].[Id], [a0].[Id], [a1].[Id]"
[2020-12-31T03:10:40.6649484+00:00][DBUG][36][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] scopes in database
[2020-12-31T03:10:40.6657170+00:00][DBUG][36][IdentityServer4.Validation.AuthorizeRequestValidator] Calling into custom validator: "IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator"
[2020-12-31T03:10:40.6673464+00:00][DBUG][36][IdentityServer4.Endpoints.AuthorizeEndpoint] ValidatedAuthorizeRequest
AuthorizeRequestValidationLog { ClientId: "urn:em:client:mvc", ClientName: "Event Manager Identity Admin UI", RedirectUri: "https://www.em.host/admin/identity/signin-oidc", AllowedRedirectUris: ["https://www.em.host/admin/identity/signin-oidc"], SubjectId: "anonymous", ResponseType: "code", ResponseMode: "form_post", GrantType: "authorization_code", RequestedScopes: "openid profile email roles", State: "CfDJ8IfTHaP7X4tMgtSdbTGk8GixLMSvZJ_VdGxOfhifHVxrMZRi8ioZ00RvoLNPtrg4Gfrzt1dsMyoM6Bu6kiB643SApUiYq3sD0uB0PQetwZOl0IzRtvyrsKws3fv9-j0oyp-xnRJ7SgACrUGbyJXS2BKw9rUcTINxYZtjY2idO1l0", UiLocales: null, Nonce: "637449810399591218.MjhlNGE2MWMtN2IzOS00M2Y0LThiOWItMTFiZTZlMDNiN2VjNzhiMjUxMTYtZGNkMy00MDAxLTg3MWYtNTU3ZWU4NTQ1ZWVi", AuthenticationContextReferenceClasses: null, DisplayMode: null, PromptMode: "", MaxAge: null, LoginHint: null, SessionId: "", Raw: [("client_id": "urn:em:client:mvc"), ("redirect_uri": "https://www.em.host/admin/identity/signin-oidc"), ("response_type": "code"), ("scope": "openid profile email roles"), ("code_challenge": "KeZ9P3crbz335ApHcnih53RfsWS7rHafgcgerERO6i0"), ("code_challenge_method": "S256"), ("response_mode": "form_post"), ("nonce": "637449810399591218.MjhlNGE2MWMtN2IzOS00M2Y0LThiOWItMTFiZTZlMDNiN2VjNzhiMjUxMTYtZGNkMy00MDAxLTg3MWYtNTU3ZWU4NTQ1ZWVi"), ("state": "CfDJ8IfTHaP7X4tMgtSdbTGk8GixLMSvZJ_VdGxOfhifHVxrMZRi8ioZ00RvoLNPtrg4Gfrzt1dsMyoM6Bu6kiB643SApUiYq3sD0uB0PQetwZOl0IzRtvyrsKws3fv9-j0oyp-xnRJ7SgACrUGbyJXS2BKw9rUcTINxYZtjY2idO1l0"), ("x-client-SKU": "ID_NETSTANDARD2_0"), ("x-client-ver": "6.8.0.0")] }
[2020-12-31T03:10:40.6698143+00:00][INFO][36][IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator] Showing login: User is not authenticated
[2020-12-31T03:10:40.6706310+00:00][INFO][36][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/connect/authorize?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fwww.em.host%2Fadmin%2Fidentity%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=KeZ9P3crbz335ApHcnih53RfsWS7rHafgcgerERO6i0&code_challenge_method=S256&response_mode=form_post&nonce=637449810399591218.MjhlNGE2MWMtN2IzOS00M2Y0LThiOWItMTFiZTZlMDNiN2VjNzhiMjUxMTYtZGNkMy00MDAxLTg3MWYtNTU3ZWU4NTQ1ZWVi&state=CfDJ8IfTHaP7X4tMgtSdbTGk8GixLMSvZJ_VdGxOfhifHVxrMZRi8ioZ00RvoLNPtrg4Gfrzt1dsMyoM6Bu6kiB643SApUiYq3sD0uB0PQetwZOl0IzRtvyrsKws3fv9-j0oyp-xnRJ7SgACrUGbyJXS2BKw9rUcTINxYZtjY2idO1l0&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0" responded 302 in 625.9209 ms
[2020-12-31T03:10:40.6727880+00:00][INFO][36][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://sts.em.host/connect/authorize?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fwww.em.host%2Fadmin%2Fidentity%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=KeZ9P3crbz335ApHcnih53RfsWS7rHafgcgerERO6i0&code_challenge_method=S256&response_mode=form_post&nonce=637449810399591218.MjhlNGE2MWMtN2IzOS00M2Y0LThiOWItMTFiZTZlMDNiN2VjNzhiMjUxMTYtZGNkMy00MDAxLTg3MWYtNTU3ZWU4NTQ1ZWVi&state=CfDJ8IfTHaP7X4tMgtSdbTGk8GixLMSvZJ_VdGxOfhifHVxrMZRi8ioZ00RvoLNPtrg4Gfrzt1dsMyoM6Bu6kiB643SApUiYq3sD0uB0PQetwZOl0IzRtvyrsKws3fv9-j0oyp-xnRJ7SgACrUGbyJXS2BKw9rUcTINxYZtjY2idO1l0&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0 - - - 302 0 - 629.1361ms
[2020-12-31T03:10:40.7059063+00:00][INFO][37][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://sts.em.host/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fwww.em.host%252Fadmin%252Fidentity%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3DKeZ9P3crbz335ApHcnih53RfsWS7rHafgcgerERO6i0%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D637449810399591218.MjhlNGE2MWMtN2IzOS00M2Y0LThiOWItMTFiZTZlMDNiN2VjNzhiMjUxMTYtZGNkMy00MDAxLTg3MWYtNTU3ZWU4NTQ1ZWVi%26state%3DCfDJ8IfTHaP7X4tMgtSdbTGk8GixLMSvZJ_VdGxOfhifHVxrMZRi8ioZ00RvoLNPtrg4Gfrzt1dsMyoM6Bu6kiB643SApUiYq3sD0uB0PQetwZOl0IzRtvyrsKws3fv9-j0oyp-xnRJ7SgACrUGbyJXS2BKw9rUcTINxYZtjY2idO1l0%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0 - -
[2020-12-31T03:10:40.7103626+00:00][INFO][37][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T03:10:40.7115025+00:00][INFO][37][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with "{action = \"Login\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String)" on controller "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>" ("EventManager.Identity.STS.Identity").
[2020-12-31T03:10:40.7244854+00:00][DBUG][37][IdentityServer4.Validation.AuthorizeRequestValidator] Start authorize request protocol validation
[2020-12-31T03:10:40.7271400+00:00][INFO][37][Microsoft.EntityFrameworkCore.Infrastructure] Entity Framework Core "5.0.1" initialized '"IdentityServerConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=EventManager.Identity.Admin.EntityFramework.SqlServer "
[2020-12-31T03:10:40.7562327+00:00][INFO][36][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("3"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c].[Id], [c].[AbsoluteRefreshTokenLifetime], [c].[AccessTokenLifetime], [c].[AccessTokenType], [c].[AllowAccessTokensViaBrowser], [c].[AllowOfflineAccess], [c].[AllowPlainTextPkce], [c].[AllowRememberConsent], [c].[AllowedIdentityTokenSigningAlgorithms], [c].[AlwaysIncludeUserClaimsInIdToken], [c].[AlwaysSendClientClaims], [c].[AuthorizationCodeLifetime], [c].[BackChannelLogoutSessionRequired], [c].[BackChannelLogoutUri], [c].[ClientClaimsPrefix], [c].[ClientId], [c].[ClientName], [c].[ClientUri], [c].[ConsentLifetime], [c].[Created], [c].[Description], [c].[DeviceCodeLifetime], [c].[EnableLocalLogin], [c].[Enabled], [c].[FrontChannelLogoutSessionRequired], [c].[FrontChannelLogoutUri], [c].[IdentityTokenLifetime], [c].[IncludeJwtId], [c].[LastAccessed], [c].[LogoUri], [c].[NonEditable], [c].[PairWiseSubjectSalt], [c].[ProtocolType], [c].[RefreshTokenExpiration], [c].[RefreshTokenUsage], [c].[RequireClientSecret], [c].[RequireConsent], [c].[RequirePkce], [c].[RequireRequestObject], [c].[SlidingRefreshTokenLifetime], [c].[UpdateAccessTokenClaimsOnRefresh], [c].[Updated], [c].[UserCodeType], [c].[UserSsoLifetime]
FROM [Clients] AS [c]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:40.8177973+00:00][INFO][25][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("4"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Origin]
FROM [Clients] AS [c]
INNER JOIN [ClientCorsOrigins] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:40.8458139+00:00][INFO][34][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("24"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[GrantType]
FROM [Clients] AS [c]
INNER JOIN [ClientGrantTypes] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:40.8919241+00:00][INFO][36][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("24"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Scope]
FROM [Clients] AS [c]
INNER JOIN [ClientScopes] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:40.8988972+00:00][INFO][25][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("4"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Type], [c0].[Value]
FROM [Clients] AS [c]
INNER JOIN [ClientClaims] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:40.9155059+00:00][INFO][34][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("6"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Created], [c0].[Description], [c0].[Expiration], [c0].[Type], [c0].[Value]
FROM [Clients] AS [c]
INNER JOIN [ClientSecrets] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:40.9318553+00:00][INFO][25][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("12"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Provider]
FROM [Clients] AS [c]
INNER JOIN [ClientIdPRestrictions] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:40.9423223+00:00][INFO][34][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("9"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[PostLogoutRedirectUri]
FROM [Clients] AS [c]
INNER JOIN [ClientPostLogoutRedirectUris] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:40.9900455+00:00][INFO][37][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("4"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Key], [c0].[Value]
FROM [Clients] AS [c]
INNER JOIN [ClientProperties] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:40.9967277+00:00][INFO][36][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("5"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [Clients] AS [c]
INNER JOIN [ClientRedirectUris] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:41.0010578+00:00][DBUG][36][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T03:10:41.0020069+00:00][DBUG][36][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T03:10:41.0030478+00:00][DBUG][36][IdentityServer4.Validation.AuthorizeRequestValidator] Checking for PKCE parameters
[2020-12-31T03:10:41.0152272+00:00][INFO][37][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [i].[Id], [i].[Created], [i].[Description], [i].[DisplayName], [i].[Emphasize], [i].[Enabled], [i].[Name], [i].[NonEditable], [i].[Required], [i].[ShowInDiscoveryDocument], [i].[Updated], [i0].[Id], [i0].[IdentityResourceId], [i0].[Type], [i1].[Id], [i1].[IdentityResourceId], [i1].[Key], [i1].[Value]
FROM [IdentityResources] AS [i]
LEFT JOIN [IdentityResourceClaims] AS [i0] ON [i].[Id] = [i0].[IdentityResourceId]
LEFT JOIN [IdentityResourceProperties] AS [i1] ON [i].[Id] = [i1].[IdentityResourceId]
WHERE [i].[Name] IN (N'openid', N'profile', N'email', N'roles')
ORDER BY [i].[Id], [i0].[Id], [i1].[Id]"
[2020-12-31T03:10:41.0184787+00:00][DBUG][37][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T03:10:41.0573553+00:00][INFO][25][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("34"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[AllowedAccessTokenSigningAlgorithms], [a].[Created], [a].[Description], [a].[DisplayName], [a].[Enabled], [a].[LastAccessed], [a].[Name], [a].[NonEditable], [a].[ShowInDiscoveryDocument], [a].[Updated], [a0].[Id], [a0].[ApiResourceId], [a0].[Created], [a0].[Description], [a0].[Expiration], [a0].[Type], [a0].[Value], [a1].[Id], [a1].[ApiResourceId], [a1].[Scope], [a2].[Id], [a2].[ApiResourceId], [a2].[Type], [a3].[Id], [a3].[ApiResourceId], [a3].[Key], [a3].[Value]
FROM [ApiResources] AS [a]
LEFT JOIN [ApiResourceSecrets] AS [a0] ON [a].[Id] = [a0].[ApiResourceId]
LEFT JOIN [ApiResourceScopes] AS [a1] ON [a].[Id] = [a1].[ApiResourceId]
LEFT JOIN [ApiResourceClaims] AS [a2] ON [a].[Id] = [a2].[ApiResourceId]
LEFT JOIN [ApiResourceProperties] AS [a3] ON [a].[Id] = [a3].[ApiResourceId]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResourceScopes] AS [a4]
    WHERE ([a].[Id] = [a4].[ApiResourceId]) AND [a4].[Scope] IN (N'openid', N'profile', N'email', N'roles'))
ORDER BY [a].[Id], [a0].[Id], [a1].[Id], [a2].[Id], [a3].[Id]"
[2020-12-31T03:10:41.0583425+00:00][DBUG][25][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] API resources in database
[2020-12-31T03:10:41.0776253+00:00][INFO][37][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("17"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Enabled], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument], [a0].[Id], [a0].[ScopeId], [a0].[Type], [a1].[Id], [a1].[Key], [a1].[ScopeId], [a1].[Value]
FROM [ApiScopes] AS [a]
LEFT JOIN [ApiScopeClaims] AS [a0] ON [a].[Id] = [a0].[ScopeId]
LEFT JOIN [ApiScopeProperties] AS [a1] ON [a].[Id] = [a1].[ScopeId]
WHERE [a].[Name] IN (N'openid', N'profile', N'email', N'roles')
ORDER BY [a].[Id], [a0].[Id], [a1].[Id]"
[2020-12-31T03:10:41.1015983+00:00][DBUG][37][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] scopes in database
[2020-12-31T03:10:41.1033492+00:00][DBUG][37][IdentityServer4.Validation.AuthorizeRequestValidator] Calling into custom validator: "IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator"
[2020-12-31T03:10:41.1148275+00:00][INFO][25][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("9"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c].[Id], [c].[AbsoluteRefreshTokenLifetime], [c].[AccessTokenLifetime], [c].[AccessTokenType], [c].[AllowAccessTokensViaBrowser], [c].[AllowOfflineAccess], [c].[AllowPlainTextPkce], [c].[AllowRememberConsent], [c].[AllowedIdentityTokenSigningAlgorithms], [c].[AlwaysIncludeUserClaimsInIdToken], [c].[AlwaysSendClientClaims], [c].[AuthorizationCodeLifetime], [c].[BackChannelLogoutSessionRequired], [c].[BackChannelLogoutUri], [c].[ClientClaimsPrefix], [c].[ClientId], [c].[ClientName], [c].[ClientUri], [c].[ConsentLifetime], [c].[Created], [c].[Description], [c].[DeviceCodeLifetime], [c].[EnableLocalLogin], [c].[Enabled], [c].[FrontChannelLogoutSessionRequired], [c].[FrontChannelLogoutUri], [c].[IdentityTokenLifetime], [c].[IncludeJwtId], [c].[LastAccessed], [c].[LogoUri], [c].[NonEditable], [c].[PairWiseSubjectSalt], [c].[ProtocolType], [c].[RefreshTokenExpiration], [c].[RefreshTokenUsage], [c].[RequireClientSecret], [c].[RequireConsent], [c].[RequirePkce], [c].[RequireRequestObject], [c].[SlidingRefreshTokenLifetime], [c].[UpdateAccessTokenClaimsOnRefresh], [c].[Updated], [c].[UserCodeType], [c].[UserSsoLifetime]
FROM [Clients] AS [c]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:41.1333227+00:00][INFO][25][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("5"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Origin]
FROM [Clients] AS [c]
INNER JOIN [ClientCorsOrigins] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:41.1455721+00:00][INFO][34][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("5"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[GrantType]
FROM [Clients] AS [c]
INNER JOIN [ClientGrantTypes] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:41.1781380+00:00][INFO][36][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("30"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Scope]
FROM [Clients] AS [c]
INNER JOIN [ClientScopes] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:41.1852108+00:00][INFO][34][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("4"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Type], [c0].[Value]
FROM [Clients] AS [c]
INNER JOIN [ClientClaims] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:41.1967890+00:00][INFO][36][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("7"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Created], [c0].[Description], [c0].[Expiration], [c0].[Type], [c0].[Value]
FROM [Clients] AS [c]
INNER JOIN [ClientSecrets] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:41.2067303+00:00][INFO][37][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("6"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Provider]
FROM [Clients] AS [c]
INNER JOIN [ClientIdPRestrictions] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:41.2394360+00:00][INFO][34][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("29"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[PostLogoutRedirectUri]
FROM [Clients] AS [c]
INNER JOIN [ClientPostLogoutRedirectUris] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:41.2473571+00:00][INFO][36][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("6"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Key], [c0].[Value]
FROM [Clients] AS [c]
INNER JOIN [ClientProperties] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:41.2645980+00:00][INFO][25][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("12"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [Clients] AS [c]
INNER JOIN [ClientRedirectUris] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:41.2661160+00:00][DBUG][25][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T03:10:41.2678846+00:00][DBUG][25][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T03:10:41.2718106+00:00][INFO][25][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executing ViewResult, running view "Login".
[2020-12-31T03:10:41.3168065+00:00][INFO][25][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executed ViewResult - view "Login" executed in 45.4797ms.
[2020-12-31T03:10:41.3174599+00:00][INFO][25][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)" in 605.3233ms
[2020-12-31T03:10:41.3179423+00:00][INFO][25][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T03:10:41.3183929+00:00][INFO][25][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fwww.em.host%252Fadmin%252Fidentity%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3DKeZ9P3crbz335ApHcnih53RfsWS7rHafgcgerERO6i0%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D637449810399591218.MjhlNGE2MWMtN2IzOS00M2Y0LThiOWItMTFiZTZlMDNiN2VjNzhiMjUxMTYtZGNkMy00MDAxLTg3MWYtNTU3ZWU4NTQ1ZWVi%26state%3DCfDJ8IfTHaP7X4tMgtSdbTGk8GixLMSvZJ_VdGxOfhifHVxrMZRi8ioZ00RvoLNPtrg4Gfrzt1dsMyoM6Bu6kiB643SApUiYq3sD0uB0PQetwZOl0IzRtvyrsKws3fv9-j0oyp-xnRJ7SgACrUGbyJXS2BKw9rUcTINxYZtjY2idO1l0%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0" responded 200 in 611.5487 ms
[2020-12-31T03:10:41.3208085+00:00][INFO][25][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://sts.em.host/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fwww.em.host%252Fadmin%252Fidentity%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3DKeZ9P3crbz335ApHcnih53RfsWS7rHafgcgerERO6i0%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D637449810399591218.MjhlNGE2MWMtN2IzOS00M2Y0LThiOWItMTFiZTZlMDNiN2VjNzhiMjUxMTYtZGNkMy00MDAxLTg3MWYtNTU3ZWU4NTQ1ZWVi%26state%3DCfDJ8IfTHaP7X4tMgtSdbTGk8GixLMSvZJ_VdGxOfhifHVxrMZRi8ioZ00RvoLNPtrg4Gfrzt1dsMyoM6Bu6kiB643SApUiYq3sD0uB0PQetwZOl0IzRtvyrsKws3fv9-j0oyp-xnRJ7SgACrUGbyJXS2BKw9rUcTINxYZtjY2idO1l0%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0 - - - 200 - text/html;+charset=utf-8 613.6988ms
[2020-12-31T03:10:46.0626478+00:00][INFO][33][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://sts.em.host/connect/authorize?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fwww.em.host%2Fadmin%2Fidentity%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=pkD397xwQrV5ydZ3hS5ad54vLObiurvfi6vzFo_KuHc&code_challenge_method=S256&response_mode=form_post&nonce=637449810460269606.ZmQ2NzBjZDYtOGEyYy00NmEyLWIzY2EtMjUyYWYxNDY0ZmRhMjdhYjcxYTAtZDFiZS00N2EwLTg5MzUtYmY0N2RiNWVlZGJm&state=CfDJ8IfTHaP7X4tMgtSdbTGk8GiSOvXxVQVI2W2fhYCnNHiZ5UCjCWgNIN9SGxIrt2s3ssL9V0XC7Bs-DXTS5ggIbHuA5wY9JWQ0402nUYOpnpkXATyDO9YhUdhzs3TPlerSQGA5u24gNmK8_uOqqYrKMofdvgbnuUk_4qpPoB98xfpT&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0 - -
[2020-12-31T03:10:46.0651822+00:00][DBUG][33][IdentityServer4.Hosting.EndpointRouter] Request path "/connect/authorize" matched to endpoint type "Authorize"
[2020-12-31T03:10:46.0693260+00:00][DBUG][33][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Authorize", successfully created handler: "IdentityServer4.Endpoints.AuthorizeEndpoint"
[2020-12-31T03:10:46.0698515+00:00][INFO][33][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize"
[2020-12-31T03:10:46.0713686+00:00][DBUG][33][IdentityServer4.Endpoints.AuthorizeEndpoint] Start authorize request
[2020-12-31T03:10:46.0730778+00:00][DBUG][33][IdentityServer4.Endpoints.AuthorizeEndpoint] No user present in authorize request
[2020-12-31T03:10:46.0748345+00:00][DBUG][33][IdentityServer4.Validation.AuthorizeRequestValidator] Start authorize request protocol validation
[2020-12-31T03:10:46.0791718+00:00][INFO][33][Microsoft.EntityFrameworkCore.Infrastructure] Entity Framework Core "5.0.1" initialized '"IdentityServerConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=EventManager.Identity.Admin.EntityFramework.SqlServer "
[2020-12-31T03:10:46.1017331+00:00][INFO][38][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("20"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c].[Id], [c].[AbsoluteRefreshTokenLifetime], [c].[AccessTokenLifetime], [c].[AccessTokenType], [c].[AllowAccessTokensViaBrowser], [c].[AllowOfflineAccess], [c].[AllowPlainTextPkce], [c].[AllowRememberConsent], [c].[AllowedIdentityTokenSigningAlgorithms], [c].[AlwaysIncludeUserClaimsInIdToken], [c].[AlwaysSendClientClaims], [c].[AuthorizationCodeLifetime], [c].[BackChannelLogoutSessionRequired], [c].[BackChannelLogoutUri], [c].[ClientClaimsPrefix], [c].[ClientId], [c].[ClientName], [c].[ClientUri], [c].[ConsentLifetime], [c].[Created], [c].[Description], [c].[DeviceCodeLifetime], [c].[EnableLocalLogin], [c].[Enabled], [c].[FrontChannelLogoutSessionRequired], [c].[FrontChannelLogoutUri], [c].[IdentityTokenLifetime], [c].[IncludeJwtId], [c].[LastAccessed], [c].[LogoUri], [c].[NonEditable], [c].[PairWiseSubjectSalt], [c].[ProtocolType], [c].[RefreshTokenExpiration], [c].[RefreshTokenUsage], [c].[RequireClientSecret], [c].[RequireConsent], [c].[RequirePkce], [c].[RequireRequestObject], [c].[SlidingRefreshTokenLifetime], [c].[UpdateAccessTokenClaimsOnRefresh], [c].[Updated], [c].[UserCodeType], [c].[UserSsoLifetime]
FROM [Clients] AS [c]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:46.1422643+00:00][INFO][34][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("10"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Origin]
FROM [Clients] AS [c]
INNER JOIN [ClientCorsOrigins] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:46.1988768+00:00][INFO][34][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("27"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[GrantType]
FROM [Clients] AS [c]
INNER JOIN [ClientGrantTypes] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:46.2232195+00:00][INFO][37][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("4"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Scope]
FROM [Clients] AS [c]
INNER JOIN [ClientScopes] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:46.2401084+00:00][INFO][33][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("5"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Type], [c0].[Value]
FROM [Clients] AS [c]
INNER JOIN [ClientClaims] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:46.2611037+00:00][INFO][38][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("18"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Created], [c0].[Description], [c0].[Expiration], [c0].[Type], [c0].[Value]
FROM [Clients] AS [c]
INNER JOIN [ClientSecrets] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:46.2827916+00:00][INFO][36][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("8"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Provider]
FROM [Clients] AS [c]
INNER JOIN [ClientIdPRestrictions] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:46.2985316+00:00][INFO][38][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("9"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[PostLogoutRedirectUri]
FROM [Clients] AS [c]
INNER JOIN [ClientPostLogoutRedirectUris] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:46.3106015+00:00][INFO][33][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("4"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Key], [c0].[Value]
FROM [Clients] AS [c]
INNER JOIN [ClientProperties] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:46.3205922+00:00][INFO][33][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("7"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [Clients] AS [c]
INNER JOIN [ClientRedirectUris] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:46.3265690+00:00][DBUG][33][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T03:10:46.3306592+00:00][DBUG][33][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T03:10:46.3313741+00:00][DBUG][33][IdentityServer4.Validation.AuthorizeRequestValidator] Checking for PKCE parameters
[2020-12-31T03:10:46.3462571+00:00][INFO][35][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [i].[Id], [i].[Created], [i].[Description], [i].[DisplayName], [i].[Emphasize], [i].[Enabled], [i].[Name], [i].[NonEditable], [i].[Required], [i].[ShowInDiscoveryDocument], [i].[Updated], [i0].[Id], [i0].[IdentityResourceId], [i0].[Type], [i1].[Id], [i1].[IdentityResourceId], [i1].[Key], [i1].[Value]
FROM [IdentityResources] AS [i]
LEFT JOIN [IdentityResourceClaims] AS [i0] ON [i].[Id] = [i0].[IdentityResourceId]
LEFT JOIN [IdentityResourceProperties] AS [i1] ON [i].[Id] = [i1].[IdentityResourceId]
WHERE [i].[Name] IN (N'openid', N'profile', N'email', N'roles')
ORDER BY [i].[Id], [i0].[Id], [i1].[Id]"
[2020-12-31T03:10:46.3576433+00:00][DBUG][38][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T03:10:46.3951470+00:00][INFO][37][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("33"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[AllowedAccessTokenSigningAlgorithms], [a].[Created], [a].[Description], [a].[DisplayName], [a].[Enabled], [a].[LastAccessed], [a].[Name], [a].[NonEditable], [a].[ShowInDiscoveryDocument], [a].[Updated], [a0].[Id], [a0].[ApiResourceId], [a0].[Created], [a0].[Description], [a0].[Expiration], [a0].[Type], [a0].[Value], [a1].[Id], [a1].[ApiResourceId], [a1].[Scope], [a2].[Id], [a2].[ApiResourceId], [a2].[Type], [a3].[Id], [a3].[ApiResourceId], [a3].[Key], [a3].[Value]
FROM [ApiResources] AS [a]
LEFT JOIN [ApiResourceSecrets] AS [a0] ON [a].[Id] = [a0].[ApiResourceId]
LEFT JOIN [ApiResourceScopes] AS [a1] ON [a].[Id] = [a1].[ApiResourceId]
LEFT JOIN [ApiResourceClaims] AS [a2] ON [a].[Id] = [a2].[ApiResourceId]
LEFT JOIN [ApiResourceProperties] AS [a3] ON [a].[Id] = [a3].[ApiResourceId]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResourceScopes] AS [a4]
    WHERE ([a].[Id] = [a4].[ApiResourceId]) AND [a4].[Scope] IN (N'openid', N'profile', N'email', N'roles'))
ORDER BY [a].[Id], [a0].[Id], [a1].[Id], [a2].[Id], [a3].[Id]"
[2020-12-31T03:10:46.3996826+00:00][DBUG][37][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] API resources in database
[2020-12-31T03:10:46.4120307+00:00][INFO][33][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Enabled], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument], [a0].[Id], [a0].[ScopeId], [a0].[Type], [a1].[Id], [a1].[Key], [a1].[ScopeId], [a1].[Value]
FROM [ApiScopes] AS [a]
LEFT JOIN [ApiScopeClaims] AS [a0] ON [a].[Id] = [a0].[ScopeId]
LEFT JOIN [ApiScopeProperties] AS [a1] ON [a].[Id] = [a1].[ScopeId]
WHERE [a].[Name] IN (N'openid', N'profile', N'email', N'roles')
ORDER BY [a].[Id], [a0].[Id], [a1].[Id]"
[2020-12-31T03:10:46.4203312+00:00][DBUG][37][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] scopes in database
[2020-12-31T03:10:46.4255511+00:00][DBUG][37][IdentityServer4.Validation.AuthorizeRequestValidator] Calling into custom validator: "IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator"
[2020-12-31T03:10:46.4276358+00:00][DBUG][37][IdentityServer4.Endpoints.AuthorizeEndpoint] ValidatedAuthorizeRequest
AuthorizeRequestValidationLog { ClientId: "urn:em:client:mvc", ClientName: "Event Manager Identity Admin UI", RedirectUri: "https://www.em.host/admin/identity/signin-oidc", AllowedRedirectUris: ["https://www.em.host/admin/identity/signin-oidc"], SubjectId: "anonymous", ResponseType: "code", ResponseMode: "form_post", GrantType: "authorization_code", RequestedScopes: "openid profile email roles", State: "CfDJ8IfTHaP7X4tMgtSdbTGk8GiSOvXxVQVI2W2fhYCnNHiZ5UCjCWgNIN9SGxIrt2s3ssL9V0XC7Bs-DXTS5ggIbHuA5wY9JWQ0402nUYOpnpkXATyDO9YhUdhzs3TPlerSQGA5u24gNmK8_uOqqYrKMofdvgbnuUk_4qpPoB98xfpT", UiLocales: null, Nonce: "637449810460269606.ZmQ2NzBjZDYtOGEyYy00NmEyLWIzY2EtMjUyYWYxNDY0ZmRhMjdhYjcxYTAtZDFiZS00N2EwLTg5MzUtYmY0N2RiNWVlZGJm", AuthenticationContextReferenceClasses: null, DisplayMode: null, PromptMode: "", MaxAge: null, LoginHint: null, SessionId: "", Raw: [("client_id": "urn:em:client:mvc"), ("redirect_uri": "https://www.em.host/admin/identity/signin-oidc"), ("response_type": "code"), ("scope": "openid profile email roles"), ("code_challenge": "pkD397xwQrV5ydZ3hS5ad54vLObiurvfi6vzFo_KuHc"), ("code_challenge_method": "S256"), ("response_mode": "form_post"), ("nonce": "637449810460269606.ZmQ2NzBjZDYtOGEyYy00NmEyLWIzY2EtMjUyYWYxNDY0ZmRhMjdhYjcxYTAtZDFiZS00N2EwLTg5MzUtYmY0N2RiNWVlZGJm"), ("state": "CfDJ8IfTHaP7X4tMgtSdbTGk8GiSOvXxVQVI2W2fhYCnNHiZ5UCjCWgNIN9SGxIrt2s3ssL9V0XC7Bs-DXTS5ggIbHuA5wY9JWQ0402nUYOpnpkXATyDO9YhUdhzs3TPlerSQGA5u24gNmK8_uOqqYrKMofdvgbnuUk_4qpPoB98xfpT"), ("x-client-SKU": "ID_NETSTANDARD2_0"), ("x-client-ver": "6.8.0.0")] }
[2020-12-31T03:10:46.4317842+00:00][INFO][37][IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator] Showing login: User is not authenticated
[2020-12-31T03:10:46.4329645+00:00][INFO][37][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/connect/authorize?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fwww.em.host%2Fadmin%2Fidentity%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=pkD397xwQrV5ydZ3hS5ad54vLObiurvfi6vzFo_KuHc&code_challenge_method=S256&response_mode=form_post&nonce=637449810460269606.ZmQ2NzBjZDYtOGEyYy00NmEyLWIzY2EtMjUyYWYxNDY0ZmRhMjdhYjcxYTAtZDFiZS00N2EwLTg5MzUtYmY0N2RiNWVlZGJm&state=CfDJ8IfTHaP7X4tMgtSdbTGk8GiSOvXxVQVI2W2fhYCnNHiZ5UCjCWgNIN9SGxIrt2s3ssL9V0XC7Bs-DXTS5ggIbHuA5wY9JWQ0402nUYOpnpkXATyDO9YhUdhzs3TPlerSQGA5u24gNmK8_uOqqYrKMofdvgbnuUk_4qpPoB98xfpT&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0" responded 302 in 369.5397 ms
[2020-12-31T03:10:46.4399420+00:00][INFO][37][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://sts.em.host/connect/authorize?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fwww.em.host%2Fadmin%2Fidentity%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=pkD397xwQrV5ydZ3hS5ad54vLObiurvfi6vzFo_KuHc&code_challenge_method=S256&response_mode=form_post&nonce=637449810460269606.ZmQ2NzBjZDYtOGEyYy00NmEyLWIzY2EtMjUyYWYxNDY0ZmRhMjdhYjcxYTAtZDFiZS00N2EwLTg5MzUtYmY0N2RiNWVlZGJm&state=CfDJ8IfTHaP7X4tMgtSdbTGk8GiSOvXxVQVI2W2fhYCnNHiZ5UCjCWgNIN9SGxIrt2s3ssL9V0XC7Bs-DXTS5ggIbHuA5wY9JWQ0402nUYOpnpkXATyDO9YhUdhzs3TPlerSQGA5u24gNmK8_uOqqYrKMofdvgbnuUk_4qpPoB98xfpT&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0 - - - 302 0 - 377.4162ms
[2020-12-31T03:10:46.4669079+00:00][INFO][33][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://sts.em.host/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fwww.em.host%252Fadmin%252Fidentity%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3DpkD397xwQrV5ydZ3hS5ad54vLObiurvfi6vzFo_KuHc%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D637449810460269606.ZmQ2NzBjZDYtOGEyYy00NmEyLWIzY2EtMjUyYWYxNDY0ZmRhMjdhYjcxYTAtZDFiZS00N2EwLTg5MzUtYmY0N2RiNWVlZGJm%26state%3DCfDJ8IfTHaP7X4tMgtSdbTGk8GiSOvXxVQVI2W2fhYCnNHiZ5UCjCWgNIN9SGxIrt2s3ssL9V0XC7Bs-DXTS5ggIbHuA5wY9JWQ0402nUYOpnpkXATyDO9YhUdhzs3TPlerSQGA5u24gNmK8_uOqqYrKMofdvgbnuUk_4qpPoB98xfpT%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0 - -
[2020-12-31T03:10:46.4694039+00:00][INFO][33][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T03:10:46.4704520+00:00][INFO][33][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with "{action = \"Login\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String)" on controller "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>" ("EventManager.Identity.STS.Identity").
[2020-12-31T03:10:46.4766611+00:00][DBUG][33][IdentityServer4.Validation.AuthorizeRequestValidator] Start authorize request protocol validation
[2020-12-31T03:10:46.4801853+00:00][INFO][33][Microsoft.EntityFrameworkCore.Infrastructure] Entity Framework Core "5.0.1" initialized '"IdentityServerConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=EventManager.Identity.Admin.EntityFramework.SqlServer "
[2020-12-31T03:10:46.4904382+00:00][INFO][37][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("8"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c].[Id], [c].[AbsoluteRefreshTokenLifetime], [c].[AccessTokenLifetime], [c].[AccessTokenType], [c].[AllowAccessTokensViaBrowser], [c].[AllowOfflineAccess], [c].[AllowPlainTextPkce], [c].[AllowRememberConsent], [c].[AllowedIdentityTokenSigningAlgorithms], [c].[AlwaysIncludeUserClaimsInIdToken], [c].[AlwaysSendClientClaims], [c].[AuthorizationCodeLifetime], [c].[BackChannelLogoutSessionRequired], [c].[BackChannelLogoutUri], [c].[ClientClaimsPrefix], [c].[ClientId], [c].[ClientName], [c].[ClientUri], [c].[ConsentLifetime], [c].[Created], [c].[Description], [c].[DeviceCodeLifetime], [c].[EnableLocalLogin], [c].[Enabled], [c].[FrontChannelLogoutSessionRequired], [c].[FrontChannelLogoutUri], [c].[IdentityTokenLifetime], [c].[IncludeJwtId], [c].[LastAccessed], [c].[LogoUri], [c].[NonEditable], [c].[PairWiseSubjectSalt], [c].[ProtocolType], [c].[RefreshTokenExpiration], [c].[RefreshTokenUsage], [c].[RequireClientSecret], [c].[RequireConsent], [c].[RequirePkce], [c].[RequireRequestObject], [c].[SlidingRefreshTokenLifetime], [c].[UpdateAccessTokenClaimsOnRefresh], [c].[Updated], [c].[UserCodeType], [c].[UserSsoLifetime]
FROM [Clients] AS [c]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:46.5133474+00:00][INFO][40][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("12"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Origin]
FROM [Clients] AS [c]
INNER JOIN [ClientCorsOrigins] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:46.5650107+00:00][INFO][37][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("6"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[GrantType]
FROM [Clients] AS [c]
INNER JOIN [ClientGrantTypes] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:46.5809073+00:00][INFO][40][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("11"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Scope]
FROM [Clients] AS [c]
INNER JOIN [ClientScopes] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:46.5923264+00:00][INFO][40][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("9"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Type], [c0].[Value]
FROM [Clients] AS [c]
INNER JOIN [ClientClaims] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:46.6052963+00:00][INFO][37][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("10"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Created], [c0].[Description], [c0].[Expiration], [c0].[Type], [c0].[Value]
FROM [Clients] AS [c]
INNER JOIN [ClientSecrets] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:46.6237613+00:00][INFO][33][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("15"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Provider]
FROM [Clients] AS [c]
INNER JOIN [ClientIdPRestrictions] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:46.6616379+00:00][INFO][25][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("27"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[PostLogoutRedirectUri]
FROM [Clients] AS [c]
INNER JOIN [ClientPostLogoutRedirectUris] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:46.6891884+00:00][INFO][25][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("4"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Key], [c0].[Value]
FROM [Clients] AS [c]
INNER JOIN [ClientProperties] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:46.7052896+00:00][INFO][25][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("14"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [Clients] AS [c]
INNER JOIN [ClientRedirectUris] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:46.7067771+00:00][DBUG][25][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T03:10:46.7084565+00:00][DBUG][25][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T03:10:46.7092058+00:00][DBUG][25][IdentityServer4.Validation.AuthorizeRequestValidator] Checking for PKCE parameters
[2020-12-31T03:10:46.7382352+00:00][INFO][33][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [i].[Id], [i].[Created], [i].[Description], [i].[DisplayName], [i].[Emphasize], [i].[Enabled], [i].[Name], [i].[NonEditable], [i].[Required], [i].[ShowInDiscoveryDocument], [i].[Updated], [i0].[Id], [i0].[IdentityResourceId], [i0].[Type], [i1].[Id], [i1].[IdentityResourceId], [i1].[Key], [i1].[Value]
FROM [IdentityResources] AS [i]
LEFT JOIN [IdentityResourceClaims] AS [i0] ON [i].[Id] = [i0].[IdentityResourceId]
LEFT JOIN [IdentityResourceProperties] AS [i1] ON [i].[Id] = [i1].[IdentityResourceId]
WHERE [i].[Name] IN (N'openid', N'profile', N'email', N'roles')
ORDER BY [i].[Id], [i0].[Id], [i1].[Id]"
[2020-12-31T03:10:46.7407409+00:00][DBUG][33][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T03:10:46.7500803+00:00][INFO][25][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[AllowedAccessTokenSigningAlgorithms], [a].[Created], [a].[Description], [a].[DisplayName], [a].[Enabled], [a].[LastAccessed], [a].[Name], [a].[NonEditable], [a].[ShowInDiscoveryDocument], [a].[Updated], [a0].[Id], [a0].[ApiResourceId], [a0].[Created], [a0].[Description], [a0].[Expiration], [a0].[Type], [a0].[Value], [a1].[Id], [a1].[ApiResourceId], [a1].[Scope], [a2].[Id], [a2].[ApiResourceId], [a2].[Type], [a3].[Id], [a3].[ApiResourceId], [a3].[Key], [a3].[Value]
FROM [ApiResources] AS [a]
LEFT JOIN [ApiResourceSecrets] AS [a0] ON [a].[Id] = [a0].[ApiResourceId]
LEFT JOIN [ApiResourceScopes] AS [a1] ON [a].[Id] = [a1].[ApiResourceId]
LEFT JOIN [ApiResourceClaims] AS [a2] ON [a].[Id] = [a2].[ApiResourceId]
LEFT JOIN [ApiResourceProperties] AS [a3] ON [a].[Id] = [a3].[ApiResourceId]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResourceScopes] AS [a4]
    WHERE ([a].[Id] = [a4].[ApiResourceId]) AND [a4].[Scope] IN (N'openid', N'profile', N'email', N'roles'))
ORDER BY [a].[Id], [a0].[Id], [a1].[Id], [a2].[Id], [a3].[Id]"
[2020-12-31T03:10:46.7630225+00:00][DBUG][33][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] API resources in database
[2020-12-31T03:10:46.7715421+00:00][INFO][37][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Enabled], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument], [a0].[Id], [a0].[ScopeId], [a0].[Type], [a1].[Id], [a1].[Key], [a1].[ScopeId], [a1].[Value]
FROM [ApiScopes] AS [a]
LEFT JOIN [ApiScopeClaims] AS [a0] ON [a].[Id] = [a0].[ScopeId]
LEFT JOIN [ApiScopeProperties] AS [a1] ON [a].[Id] = [a1].[ScopeId]
WHERE [a].[Name] IN (N'openid', N'profile', N'email', N'roles')
ORDER BY [a].[Id], [a0].[Id], [a1].[Id]"
[2020-12-31T03:10:46.7746623+00:00][DBUG][37][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] scopes in database
[2020-12-31T03:10:46.7753016+00:00][DBUG][37][IdentityServer4.Validation.AuthorizeRequestValidator] Calling into custom validator: "IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator"
[2020-12-31T03:10:46.7936538+00:00][INFO][40][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("17"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c].[Id], [c].[AbsoluteRefreshTokenLifetime], [c].[AccessTokenLifetime], [c].[AccessTokenType], [c].[AllowAccessTokensViaBrowser], [c].[AllowOfflineAccess], [c].[AllowPlainTextPkce], [c].[AllowRememberConsent], [c].[AllowedIdentityTokenSigningAlgorithms], [c].[AlwaysIncludeUserClaimsInIdToken], [c].[AlwaysSendClientClaims], [c].[AuthorizationCodeLifetime], [c].[BackChannelLogoutSessionRequired], [c].[BackChannelLogoutUri], [c].[ClientClaimsPrefix], [c].[ClientId], [c].[ClientName], [c].[ClientUri], [c].[ConsentLifetime], [c].[Created], [c].[Description], [c].[DeviceCodeLifetime], [c].[EnableLocalLogin], [c].[Enabled], [c].[FrontChannelLogoutSessionRequired], [c].[FrontChannelLogoutUri], [c].[IdentityTokenLifetime], [c].[IncludeJwtId], [c].[LastAccessed], [c].[LogoUri], [c].[NonEditable], [c].[PairWiseSubjectSalt], [c].[ProtocolType], [c].[RefreshTokenExpiration], [c].[RefreshTokenUsage], [c].[RequireClientSecret], [c].[RequireConsent], [c].[RequirePkce], [c].[RequireRequestObject], [c].[SlidingRefreshTokenLifetime], [c].[UpdateAccessTokenClaimsOnRefresh], [c].[Updated], [c].[UserCodeType], [c].[UserSsoLifetime]
FROM [Clients] AS [c]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:46.8070977+00:00][INFO][33][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("9"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Origin]
FROM [Clients] AS [c]
INNER JOIN [ClientCorsOrigins] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:46.8246630+00:00][INFO][37][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("15"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[GrantType]
FROM [Clients] AS [c]
INNER JOIN [ClientGrantTypes] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:46.8762621+00:00][INFO][40][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("29"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Scope]
FROM [Clients] AS [c]
INNER JOIN [ClientScopes] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:46.8867633+00:00][INFO][25][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("7"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Type], [c0].[Value]
FROM [Clients] AS [c]
INNER JOIN [ClientClaims] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:46.8978237+00:00][INFO][33][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("7"ms) [Parameters=["@__clientId_0='?' (Size = 200)"], CommandType='Text', CommandTimeout='30']"
""SELECT [c0].[Id], [c0].[ClientId], [c0].[Created], [c0].[Description], [c0].[Expiration], [c0].[Type], [c0].[Value]
FROM [Clients] AS [c]
INNER JOIN [ClientSecrets] AS [c0] ON [c].[Id] = [c0].[ClientId]
WHERE [c].[ClientId] = @__clientId_0"
[2020-12-31T03:10:4[2020-12-31T03:16:44.7351508+00:00][INFO][1][Microsoft.EntityFrameworkCore.Infrastructure] Entity Framework Core "5.0.1" initialized '"IdentityServerDataProtectionDbContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=EventManager.Identity.Admin.EntityFramework.SqlServer "
[2020-12-31T03:16:46.6760516+00:00][EROR][1][Microsoft.EntityFrameworkCore.Database.Command] Failed executing DbCommand ("200"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [d].[Id], [d].[FriendlyName], [d].[Xml]
FROM [DataProtectionKeys] AS [d]"
[2020-12-31T03:16:46.7980296+00:00][EROR][1][Microsoft.EntityFrameworkCore.Query] An exception occurred while iterating over the results of a query for context type '"EventManager.Identity.Admin.EntityFramework.Shared.DbContexts.IdentityServerDataProtectionDbContext"'."
""Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'DataProtectionKeys'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(DbContext _, Boolean result)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:bcaaa06b-c6f3-47b8-bacd-c10fff08a691
Error Number:208,State:1,Class:16"
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'DataProtectionKeys'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(DbContext _, Boolean result)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:bcaaa06b-c6f3-47b8-bacd-c10fff08a691
Error Number:208,State:1,Class:16
[2020-12-31T03:16:46.8922400+00:00][EROR][1][Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingProvider] An error occurred while reading the key ring.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'DataProtectionKeys'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(DbContext _, Boolean result)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.AspNetCore.DataProtection.EntityFrameworkCore.EntityFrameworkCoreXmlRepository`1.<GetAllElements>g__GetAllElementsCore|3_0()+MoveNext()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at Microsoft.AspNetCore.DataProtection.EntityFrameworkCore.EntityFrameworkCoreXmlRepository`1.GetAllElements()
   at Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager.GetAllKeys()
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingProvider.CreateCacheableKeyRingCore(DateTimeOffset now, IKey keyJustAdded)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingProvider.Microsoft.AspNetCore.DataProtection.KeyManagement.Internal.ICacheableKeyRingProvider.GetCacheableKeyRing(DateTimeOffset now)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingProvider.GetCurrentKeyRingCore(DateTime utcNow, Boolean forceRefresh)
ClientConnectionId:bcaaa06b-c6f3-47b8-bacd-c10fff08a691
Error Number:208,State:1,Class:16
[2020-12-31T03:16:46.9570264+00:00][INFO][1][Microsoft.AspNetCore.DataProtection.Internal.DataProtectionHostedService] Key ring failed to load during application startup.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'DataProtectionKeys'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(DbContext _, Boolean result)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.AspNetCore.DataProtection.EntityFrameworkCore.EntityFrameworkCoreXmlRepository`1.<GetAllElements>g__GetAllElementsCore|3_0()+MoveNext()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at Microsoft.AspNetCore.DataProtection.EntityFrameworkCore.EntityFrameworkCoreXmlRepository`1.GetAllElements()
   at Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager.GetAllKeys()
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingProvider.CreateCacheableKeyRingCore(DateTimeOffset now, IKey keyJustAdded)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingProvider.Microsoft.AspNetCore.DataProtection.KeyManagement.Internal.ICacheableKeyRingProvider.GetCacheableKeyRing(DateTimeOffset now)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingProvider.GetCurrentKeyRingCore(DateTime utcNow, Boolean forceRefresh)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyRingProvider.GetCurrentKeyRing()
   at Microsoft.AspNetCore.DataProtection.Internal.DataProtectionHostedService.StartAsync(CancellationToken token)
ClientConnectionId:bcaaa06b-c6f3-47b8-bacd-c10fff08a691
Error Number:208,State:1,Class:16
[2020-12-31T03:16:47.0899042+00:00][INFO][1][IdentityServer4.Startup] Starting IdentityServer4 version "4.1.1+cebd52f5bc61bdefc262fd20739d4d087c6f961f"
[2020-12-31T03:16:47.1565716+00:00][DBUG][1][IdentityServer4.Startup] Custom IssuerUri set to "https://auth.em.host"
[2020-12-31T03:16:47.1691332+00:00][INFO][1][IdentityServer4.Startup] Using the default authentication scheme "Identity.Application" for IdentityServer
[2020-12-31T03:16:47.1698129+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.Application" as default ASP.NET Core scheme for authentication
[2020-12-31T03:16:47.1709214+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.External" as default ASP.NET Core scheme for sign-in
[2020-12-31T03:16:47.1737383+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.External" as default ASP.NET Core scheme for sign-out
[2020-12-31T03:16:47.1806024+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.Application" as default ASP.NET Core scheme for challenge
[2020-12-31T03:16:47.1821400+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.Application" as default ASP.NET Core scheme for forbid
[2020-12-31T03:16:47.7034996+00:00][INFO][1][Microsoft.Hosting.Lifetime] Now listening on: "https://[::]:50003"
[2020-12-31T03:16:47.7070080+00:00][INFO][1][Microsoft.Hosting.Lifetime] Application started. Press Ctrl+C to shut down.
[2020-12-31T03:16:47.7079511+00:00][INFO][1][Microsoft.Hosting.Lifetime] Hosting environment: "Development"
[2020-12-31T03:16:47.7086037+00:00][INFO][1][Microsoft.Hosting.Lifetime] Content root path: "/app"
[2020-12-31T03:23:09.2473814+00:00][INFO][18][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/.well-known/openid-configuration - -
[2020-12-31T03:23:09.3000619+00:00][DBUG][18][IdentityServer4.Startup] Login Url: "/Account/Login"
[2020-12-31T03:23:09.3005505+00:00][DBUG][18][IdentityServer4.Startup] Login Return Url Parameter: "ReturnUrl"
[2020-12-31T03:23:09.3037236+00:00][DBUG][18][IdentityServer4.Startup] Logout Url: "/Account/Logout"
[2020-12-31T03:23:09.3049576+00:00][DBUG][18][IdentityServer4.Startup] ConsentUrl Url: "/consent"
[2020-12-31T03:23:09.3065827+00:00][DBUG][18][IdentityServer4.Startup] Consent Return Url Parameter: "returnUrl"
[2020-12-31T03:23:09.3072301+00:00][DBUG][18][IdentityServer4.Startup] Error Url: "/home/error"
[2020-12-31T03:23:09.3078175+00:00][DBUG][18][IdentityServer4.Startup] Error Id Parameter: "errorId"
[2020-12-31T03:23:09.3354009+00:00][DBUG][18][IdentityServer4.Hosting.EndpointRouter] Request path "/.well-known/openid-configuration" matched to endpoint type "Discovery"
[2020-12-31T03:23:09.3614649+00:00][DBUG][18][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Discovery", successfully created handler: "IdentityServer4.Endpoints.DiscoveryEndpoint"
[2020-12-31T03:23:09.3641166+00:00][INFO][18][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
[2020-12-31T03:23:09.3682403+00:00][DBUG][18][IdentityServer4.Endpoints.DiscoveryEndpoint] Start discovery request
[2020-12-31T03:23:09.8254509+00:00][INFO][18][Microsoft.EntityFrameworkCore.Infrastructure] Entity Framework Core "5.0.1" initialized '"IdentityServerConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=EventManager.Identity.Admin.EntityFramework.SqlServer "
[2020-12-31T03:23:10.0295465+00:00][WARN][18][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T03:23:10.3137677+00:00][INFO][14][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("45"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [i].[Id], [i].[Created], [i].[Description], [i].[DisplayName], [i].[Emphasize], [i].[Enabled], [i].[Name], [i].[NonEditable], [i].[Required], [i].[ShowInDiscoveryDocument], [i].[Updated], [i0].[Id], [i0].[IdentityResourceId], [i0].[Type], [i1].[Id], [i1].[IdentityResourceId], [i1].[Key], [i1].[Value]
FROM [IdentityResources] AS [i]
LEFT JOIN [IdentityResourceClaims] AS [i0] ON [i].[Id] = [i0].[IdentityResourceId]
LEFT JOIN [IdentityResourceProperties] AS [i1] ON [i].[Id] = [i1].[IdentityResourceId]
ORDER BY [i].[Id], [i0].[Id], [i1].[Id]"
[2020-12-31T03:23:10.4863473+00:00][WARN][14][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T03:23:10.5453074+00:00][INFO][15][Microsoft.EntityFrameworkCore.Database.Command] Executed DbCommand ("26"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [a].[Id], [a].[AllowedAccessTokenSigningAlgorithms], [a].[Created], [a].[Description], [a].[DisplayName], [a].[Enabled], [a].[LastAccessed], [a].[Name], [a].[NonEditable], [a].[ShowInDiscoveryDocument], [a].[Updated], [a0].[Id], [a0].[ApiResourceId], [a0].[Created], [a0].[Description], [a0].[Expiration], [a0].[Type], [a0].[Value], [a1].[Id], [a1].[ApiResourceId], [a1].[Scope], [a2].[Id], [a2].[ApiResourceId], [a2].[Type], [a3].[Id], [a3].[ApiResourceId], [a3].[Key], [a3].[Value]
FROM [ApiResources] AS [a]
LEFT JOIN [ApiResourceSecrets] AS [a0] ON [a].[Id] = [a0].[ApiResourceId]
LEFT JOIN [ApiResourceScopes] AS [a1] ON [a].[Id] = [a1].[ApiResourceId]
LEFT JOIN [ApiResourceClaims] AS [a2] ON [a].[Id] = [a2].[ApiResourceId]
LEFT JOIN [ApiResourceProperties] AS [a3] ON [a].[Id] = [a3].[ApiResourceId]
ORDER BY [a].[Id], [a0].[Id], [a1].[Id], [a2].[Id], [a3].[Id]"
[2020-12-31T03:23:10.5637431+00:00][WARN][15][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for mor[2020-12-31T03:30:20.8102905+00:00][INFO][1][IdentityServer4.Startup] Starting IdentityServer4 version "4.1.1+cebd52f5bc61bdefc262fd20739d4d087c6f961f"
[2020-12-31T03:30:21.2912232+00:00][DBUG][1][IdentityServer4.Startup] Custom IssuerUri set to "https://auth.em.host"
[2020-12-31T03:30:21.3087877+00:00][INFO][1][IdentityServer4.Startup] Using the default authentication scheme "Identity.Application" for IdentityServer
[2020-12-31T03:30:21.3097216+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.Application" as default ASP.NET Core scheme for authentication
[2020-12-31T03:30:21.3107925+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.External" as default ASP.NET Core scheme for sign-in
[2020-12-31T03:30:21.3115405+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.External" as default ASP.NET Core scheme for sign-out
[2020-12-31T03:30:21.3126258+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.Application" as default ASP.NET Core scheme for challenge
[2020-12-31T03:30:21.3134965+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.Application" as default ASP.NET Core scheme for forbid
[2020-12-31T03:30:21.9774537+00:00][INFO][1][Microsoft.Hosting.Lifetime] Now listening on: "https://[::]:50003"
[2020-12-31T03:30:21.9843103+00:00][INFO][1][Microsoft.Hosting.Lifetime] Application started. Press Ctrl+C to shut down.
[2020-12-31T03:30:21.9916861+00:00][INFO][1][Microsoft.Hosting.Lifetime] Hosting environment: "Development"
[2020-12-31T03:30:21.9938880+00:00][INFO][1][Microsoft.Hosting.Lifetime] Content root path: "/app"
[2020-12-31T03:31:00.1107537+00:00][INFO][13][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/login - -
[2020-12-31T03:31:00.1770206+00:00][DBUG][13][IdentityServer4.Startup] Login Url: "/Account/Login"
[2020-12-31T03:31:00.1777111+00:00][DBUG][13][IdentityServer4.Startup] Login Return Url Parameter: "ReturnUrl"
[2020-12-31T03:31:00.1784361+00:00][DBUG][13][IdentityServer4.Startup] Logout Url: "/Account/Logout"
[2020-12-31T03:31:00.1791818+00:00][DBUG][13][IdentityServer4.Startup] ConsentUrl Url: "/consent"
[2020-12-31T03:31:00.1798482+00:00][DBUG][13][IdentityServer4.Startup] Consent Return Url Parameter: "returnUrl"
[2020-12-31T03:31:00.1804932+00:00][DBUG][13][IdentityServer4.Startup] Error Url: "/home/error"
[2020-12-31T03:31:00.1869333+00:00][DBUG][13][IdentityServer4.Startup] Error Id Parameter: "errorId"
[2020-12-31T03:31:00.3598182+00:00][INFO][13][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/login" responded 404 in 220.8730 ms
[2020-12-31T03:31:00.4192616+00:00][INFO][13][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/login - - - 404 0 - 310.3767ms
[2020-12-31T03:31:08.1726968+00:00][INFO][5][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/.well-known/openid-configuration - -
[2020-12-31T03:31:08.1969779+00:00][DBUG][5][IdentityServer4.Hosting.EndpointRouter] Request path "/.well-known/openid-configuration" matched to endpoint type "Discovery"
[2020-12-31T03:31:08.2293270+00:00][DBUG][5][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Discovery", successfully created handler: "IdentityServer4.Endpoints.DiscoveryEndpoint"
[2020-12-31T03:31:08.2305238+00:00][INFO][5][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
[2020-12-31T03:31:08.2423807+00:00][DBUG][5][IdentityServer4.Endpoints.DiscoveryEndpoint] Start discovery request
[2020-12-31T03:31:08.9139797+00:00][WARN][5][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T03:31:09.2058462+00:00][WARN][15][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T03:31:09.2757754+00:00][WARN][5][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T03:31:09.8381864+00:00][DBUG][5][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email", "address", "urn:em:api:scope"] as all scopes, and ["urn:em:api"] as API resources
[2020-12-31T03:31:09.9167732+00:00][INFO][5][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/.well-known/openid-configuration" responded 200 in 1725.4071 ms
[2020-12-31T03:31:09.9213063+00:00][INFO][5][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 1749.4670ms
[2020-12-31T03:31:10.3086795+00:00][INFO][13][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/.well-known/openid-configuration/jwks - -
[2020-12-31T03:31:10.3166002+00:00][DBUG][13][IdentityServer4.Hosting.EndpointRouter] Request path "/.well-known/openid-configuration/jwks" matched to endpoint type "Discovery"
[2020-12-31T03:31:10.3256480+00:00][DBUG][13][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Discovery", successfully created handler: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint"
[2020-12-31T03:31:10.3286335+00:00][INFO][13][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
[2020-12-31T03:31:10.3318579+00:00][DBUG][13][IdentityServer4.Endpoints.DiscoveryKeyEndpoint] Start key discovery request
[2020-12-31T03:31:10.4235328+00:00][INFO][13][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/.well-known/openid-configuration/jwks" responded 200 in 114.1441 ms
[2020-12-31T03:31:10.4259938+00:00][INFO][13][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 115.9401ms
[2020-12-31T03:31:10.6460487+00:00][INFO][15][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/connect/authorize?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=nUXNrthSTAQpm6QkN9BjTy2YJJ0kTz7ztNKy8rhbqYs&code_challenge_method=S256&response_mode=form_post&nonce=637449822704853100.NmQ1OWUwOTItMTM3Yy00NmNiLWIwZTgtNjJiMjlhMjc2NzkzNDczZTEwOTEtOGM5Ni00OTMxLWE0NmEtN2Q1YTc4YzJmZGI5&state=CfDJ8HbmgoufA85PoVB4uWHKwLc051tTyVHzeca-H8ecAYpxfXSGqWjeviJ_VvkNZQvUbWfSv5qL37oC12EnWoQmCybTIQ92KpkilqTqDZK6Ar2hYXgTjPkV7ndOBLwGpLHbALD5UuBCJ1VTytAleMBQcLcGzV5qCwrPNMZiLrbiuupL&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0 - -
[2020-12-31T03:31:10.6507664+00:00][DBUG][15][IdentityServer4.Hosting.EndpointRouter] Request path "/connect/authorize" matched to endpoint type "Authorize"
[2020-12-31T03:31:10.6984968+00:00][DBUG][15][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Authorize", successfully created handler: "IdentityServer4.Endpoints.AuthorizeEndpoint"
[2020-12-31T03:31:10.6990234+00:00][INFO][15][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize"
[2020-12-31T03:31:10.7089198+00:00][DBUG][15][IdentityServer4.Endpoints.AuthorizeEndpoint] Start authorize request
[2020-12-31T03:31:10.7268405+00:00][DBUG][15][IdentityServer4.Endpoints.AuthorizeEndpoint] No user present in authorize request
[2020-12-31T03:31:10.7407929+00:00][DBUG][15][IdentityServer4.Validation.AuthorizeRequestValidator] Start authorize request protocol validation
[2020-12-31T03:31:11.5730080+00:00][DBUG][16][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T03:31:11.5893588+00:00][DBUG][16][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T03:31:11.6095960+00:00][DBUG][16][IdentityServer4.Validation.AuthorizeRequestValidator] Checking for PKCE parameters
[2020-12-31T03:31:11.7095138+00:00][WARN][16][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T03:31:11.7586652+00:00][DBUG][4][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T03:31:11.7951220+00:00][WARN][4][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T03:31:11.8647223+00:00][DBUG][16][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] API resources in database
[2020-12-31T03:31:11.8764863+00:00][WARN][16][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T03:31:11.9168072+00:00][DBUG][16][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] scopes in database
[2020-12-31T03:31:11.9428812+00:00][DBUG][16][IdentityServer4.Validation.AuthorizeRequestValidator] Calling into custom validator: "IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator"
[2020-12-31T03:31:11.9685745+00:00][DBUG][16][IdentityServer4.Endpoints.AuthorizeEndpoint] ValidatedAuthorizeRequest
AuthorizeRequestValidationLog { ClientId: "urn:em:client:mvc", ClientName: "Event Manager Identity Admin UI", RedirectUri: "https://auth.em.host/admin/signin-oidc", AllowedRedirectUris: ["https://auth.em.host/admin/signin-oidc"], SubjectId: "anonymous", ResponseType: "code", ResponseMode: "form_post", GrantType: "authorization_code", RequestedScopes: "openid profile email roles", State: "CfDJ8HbmgoufA85PoVB4uWHKwLc051tTyVHzeca-H8ecAYpxfXSGqWjeviJ_VvkNZQvUbWfSv5qL37oC12EnWoQmCybTIQ92KpkilqTqDZK6Ar2hYXgTjPkV7ndOBLwGpLHbALD5UuBCJ1VTytAleMBQcLcGzV5qCwrPNMZiLrbiuupL", UiLocales: null, Nonce: "637449822704853100.NmQ1OWUwOTItMTM3Yy00NmNiLWIwZTgtNjJiMjlhMjc2NzkzNDczZTEwOTEtOGM5Ni00OTMxLWE0NmEtN2Q1YTc4YzJmZGI5", AuthenticationContextReferenceClasses: null, DisplayMode: null, PromptMode: "", MaxAge: null, LoginHint: null, SessionId: "", Raw: [("client_id": "urn:em:client:mvc"), ("redirect_uri": "https://auth.em.host/admin/signin-oidc"), ("response_type": "code"), ("scope": "openid profile email roles"), ("code_challenge": "nUXNrthSTAQpm6QkN9BjTy2YJJ0kTz7ztNKy8rhbqYs"), ("code_challenge_method": "S256"), ("response_mode": "form_post"), ("nonce": "637449822704853100.NmQ1OWUwOTItMTM3Yy00NmNiLWIwZTgtNjJiMjlhMjc2NzkzNDczZTEwOTEtOGM5Ni00OTMxLWE0NmEtN2Q1YTc4YzJmZGI5"), ("state": "CfDJ8HbmgoufA85PoVB4uWHKwLc051tTyVHzeca-H8ecAYpxfXSGqWjeviJ_VvkNZQvUbWfSv5qL37oC12EnWoQmCybTIQ92KpkilqTqDZK6Ar2hYXgTjPkV7ndOBLwGpLHbALD5UuBCJ1VTytAleMBQcLcGzV5qCwrPNMZiLrbiuupL"), ("x-client-SKU": "ID_NETSTANDARD2_0"), ("x-client-ver": "6.8.0.0")] }
[2020-12-31T03:31:11.9846125+00:00][INFO][16][IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator] Showing login: User is not authenticated
[2020-12-31T03:31:12.0024173+00:00][INFO][16][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/connect/authorize?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=nUXNrthSTAQpm6QkN9BjTy2YJJ0kTz7ztNKy8rhbqYs&code_challenge_method=S256&response_mode=form_post&nonce=637449822704853100.NmQ1OWUwOTItMTM3Yy00NmNiLWIwZTgtNjJiMjlhMjc2NzkzNDczZTEwOTEtOGM5Ni00OTMxLWE0NmEtN2Q1YTc4YzJmZGI5&state=CfDJ8HbmgoufA85PoVB4uWHKwLc051tTyVHzeca-H8ecAYpxfXSGqWjeviJ_VvkNZQvUbWfSv5qL37oC12EnWoQmCybTIQ92KpkilqTqDZK6Ar2hYXgTjPkV7ndOBLwGpLHbALD5UuBCJ1VTytAleMBQcLcGzV5qCwrPNMZiLrbiuupL&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0" responded 302 in 1352.3737 ms
[2020-12-31T03:31:12.0082750+00:00][INFO][16][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/connect/authorize?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=nUXNrthSTAQpm6QkN9BjTy2YJJ0kTz7ztNKy8rhbqYs&code_challenge_method=S256&response_mode=form_post&nonce=637449822704853100.NmQ1OWUwOTItMTM3Yy00NmNiLWIwZTgtNjJiMjlhMjc2NzkzNDczZTEwOTEtOGM5Ni00OTMxLWE0NmEtN2Q1YTc4YzJmZGI5&state=CfDJ8HbmgoufA85PoVB4uWHKwLc051tTyVHzeca-H8ecAYpxfXSGqWjeviJ_VvkNZQvUbWfSv5qL37oC12EnWoQmCybTIQ92KpkilqTqDZK6Ar2hYXgTjPkV7ndOBLwGpLHbALD5UuBCJ1VTytAleMBQcLcGzV5qCwrPNMZiLrbiuupL&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0 - - - 302 0 - 1357.7085ms
[2020-12-31T03:31:12.0458632+00:00][INFO][4][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fauth.em.host%252Fadmin%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3DnUXNrthSTAQpm6QkN9BjTy2YJJ0kTz7ztNKy8rhbqYs%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D637449822704853100.NmQ1OWUwOTItMTM3Yy00NmNiLWIwZTgtNjJiMjlhMjc2NzkzNDczZTEwOTEtOGM5Ni00OTMxLWE0NmEtN2Q1YTc4YzJmZGI5%26state%3DCfDJ8HbmgoufA85PoVB4uWHKwLc051tTyVHzeca-H8ecAYpxfXSGqWjeviJ_VvkNZQvUbWfSv5qL37oC12EnWoQmCybTIQ92KpkilqTqDZK6Ar2hYXgTjPkV7ndOBLwGpLHbALD5UuBCJ1VTytAleMBQcLcGzV5qCwrPNMZiLrbiuupL%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0 - -
[2020-12-31T03:31:12.0671144+00:00][INFO][4][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T03:31:12.1229926+00:00][INFO][4][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with "{action = \"Login\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String)" on controller "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>" ("EventManager.Identity.STS.Identity").
[2020-12-31T03:31:12.1694392+00:00][DBUG][4][IdentityServer4.Validation.AuthorizeRequestValidator] Start authorize request protocol validation
[2020-12-31T03:31:12.4027757+00:00][DBUG][20][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T03:31:12.4076917+00:00][DBUG][20][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T03:31:12.4204580+00:00][DBUG][20][IdentityServer4.Validation.AuthorizeRequestValidator] Checking for PKCE parameters
[2020-12-31T03:31:12.4397487+00:00][DBUG][19][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T03:31:12.4740115+00:00][DBUG][19][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] API resources in database
[2020-12-31T03:31:12.4921147+00:00][DBUG][12][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] scopes in database
[2020-12-31T03:31:12.4929350+00:00][DBUG][12][IdentityServer4.Validation.AuthorizeRequestValidator] Calling into custom validator: "IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator"
[2020-12-31T03:31:12.6217259+00:00][DBUG][16][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T03:31:12.6223428+00:00][DBUG][16][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T03:31:12.6745440+00:00][INFO][16][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executing ViewResult, running view "Login".
[2020-12-31T03:31:13.7432672+00:00][INFO][16][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executed ViewResult - view "Login" executed in 1075.4799ms.
[2020-12-31T03:31:13.7528457+00:00][INFO][16][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)" in 1624.3434ms
[2020-12-31T03:31:13.7547630+00:00][INFO][16][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T03:31:13.7580360+00:00][INFO][16][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fauth.em.host%252Fadmin%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3DnUXNrthSTAQpm6QkN9BjTy2YJJ0kTz7ztNKy8rhbqYs%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D637449822704853100.NmQ1OWUwOTItMTM3Yy00NmNiLWIwZTgtNjJiMjlhMjc2NzkzNDczZTEwOTEtOGM5Ni00OTMxLWE0NmEtN2Q1YTc4YzJmZGI5%26state%3DCfDJ8HbmgoufA85PoVB4uWHKwLc051tTyVHzeca-H8ecAYpxfXSGqWjeviJ_VvkNZQvUbWfSv5qL37oC12EnWoQmCybTIQ92KpkilqTqDZK6Ar2hYXgTjPkV7ndOBLwGpLHbALD5UuBCJ1VTytAleMBQcLcGzV5qCwrPNMZiLrbiuupL%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0" responded 200 in 1711.2234 ms
[2020-12-31T03:31:13.7626049+00:00][INFO][16][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fauth.em.host%252Fadmin%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3DnUXNrthSTAQpm6QkN9BjTy2YJJ0kTz7ztNKy8rhbqYs%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D637449822704853100.NmQ1OWUwOTItMTM3Yy00NmNiLWIwZTgtNjJiMjlhMjc2NzkzNDczZTEwOTEtOGM5Ni00OTMxLWE0NmEtN2Q1YTc4YzJmZGI5%26state%3DCfDJ8HbmgoufA85PoVB4uWHKwLc051tTyVHzeca-H8ecAYpxfXSGqWjeviJ_VvkNZQvUbWfSv5qL37oC12EnWoQmCybTIQ92KpkilqTqDZK6Ar2hYXgTjPkV7ndOBLwGpLHbALD5UuBCJ1VTytAleMBQcLcGzV5qCwrPNMZiLrbiuupL%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0 - - - 200 - text/html;+charset=utf-8 1716.4491ms
[2020-12-31T03:31:13.9430625+00:00][INFO][14][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/dist/css/bundle.min.css?v=6Y8xGSDMhkjYMZuaFSdp3fqA3xdNX-Q6_xp14ExGbY8 - -
[2020-12-31T03:31:13.9600640+00:00][INFO][12][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/dist/css/web.css?v=gzbQ_J4PfKys2r0KpTe01uKRO7lnqK_lEp7OvIB7ZAA - -
[2020-12-31T03:31:14.0425743+00:00][INFO][15][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/dist/js/bundle.min.js?v=11Fw87BWmEIjIw_LrA_JwvJM5t0w9WbTFIog6ElarB0 - -
[2020-12-31T03:31:14.2223089+00:00][INFO][12][Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware] Sending file. Request path: '"/dist/css/web.css"'. Physical path: '"/app/wwwroot/dist/css/web.css"'
[2020-12-31T03:31:14.2230621+00:00][INFO][12][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/dist/css/web.css?v=gzbQ_J4PfKys2r0KpTe01uKRO7lnqK_lEp7OvIB7ZAA" responded 200 in 220.0994 ms
[2020-12-31T03:31:14.2237171+00:00][INFO][12][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/dist/css/web.css?v=gzbQ_J4PfKys2r0KpTe01uKRO7lnqK_lEp7OvIB7ZAA - - - 200 8009 text/css 263.6136ms
[2020-12-31T03:31:14.2689306+00:00][INFO][4][Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware] Sending file. Request path: '"/dist/js/bundle.min.js"'. Physical path: '"/app/wwwroot/dist/js/bundle.min.js"'
[2020-12-31T03:31:14.2701762+00:00][INFO][4][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/dist/js/bundle.min.js?v=11Fw87BWmEIjIw_LrA_JwvJM5t0w9WbTFIog6ElarB0" responded 200 in 226.7875 ms
[2020-12-31T03:31:14.3190237+00:00][INFO][4][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/dist/js/bundle.min.js?v=11Fw87BWmEIjIw_LrA_JwvJM5t0w9WbTFIog6ElarB0 - - - 200 250698 application/javascript 276.4252ms
[2020-12-31T03:31:14.3689243+00:00][INFO][4][Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware] Sending file. Request path: '"/dist/css/bundle.min.css"'. Physical path: '"/app/wwwroot/dist/css/bundle.min.css"'
[2020-12-31T03:31:14.3700330+00:00][INFO][4][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/dist/css/bundle.min.css?v=6Y8xGSDMhkjYMZuaFSdp3fqA3xdNX-Q6_xp14ExGbY8" responded 200 in 382.3920 ms
[2020-12-31T03:31:14.3719326+00:00][INFO][4][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/dist/css/bundle.min.css?v=6Y8xGSDMhkjYMZuaFSdp3fqA3xdNX-Q6_xp14ExGbY8 - - - 200 205310 text/css 428.7441ms
[2020-12-31T03:31:14.5575908+00:00][INFO][14][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/dist/fonts/open-iconic.woff - -
[2020-12-31T03:31:14.5803355+00:00][INFO][15][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/dist/fonts/fontawesome-webfont.woff2?v=4.7.0 - -
[2020-12-31T03:31:14.6572251+00:00][INFO][19][Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware] Sending file. Request path: '"/dist/fonts/open-iconic.woff"'. Physical path: '"/app/wwwroot/dist/fonts/open-iconic.woff"'
[2020-12-31T03:31:14.6578920+00:00][INFO][19][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/dist/fonts/open-iconic.woff" responded 200 in 95.6791 ms
[2020-12-31T03:31:14.6586271+00:00][INFO][19][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/dist/fonts/open-iconic.woff - - - 200 14984 application/font-woff 100.9982ms
[2020-12-31T03:31:14.7236959+00:00][INFO][6][Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware] Sending file. Request path: '"/dist/fonts/fontawesome-webfont.woff2"'. Physical path: '"/app/wwwroot/dist/fonts/fontawesome-webfont.woff2"'
[2020-12-31T03:31:14.7246642+00:00][INFO][6][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/dist/fonts/fontawesome-webfont.woff2?v=4.7.0" responded 200 in 142.5728 ms
[2020-12-31T03:31:14.7274331+00:00][INFO][6][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/dist/fonts/fontawesome-webfont.woff2?v=4.7.0 - - - 200 77160 font/woff2 147.1159ms
[2020-12-31T03:31:38.6190011+00:00][INFO][14][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 POST https://auth.em.host/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fauth.em.host%252Fadmin%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3DnUXNrthSTAQpm6QkN9BjTy2YJJ0kTz7ztNKy8rhbqYs%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D637449822704853100.NmQ1OWUwOTItMTM3Yy00NmNiLWIwZTgtNjJiMjlhMjc2NzkzNDczZTEwOTEtOGM5Ni00OTMxLWE0NmEtN2Q1YTc4YzJmZGI5%26state%3DCfDJ8HbmgoufA85PoVB4uWHKwLc051tTyVHzeca-H8ecAYpxfXSGqWjeviJ_VvkNZQvUbWfSv5qL37oC12EnWoQmCybTIQ92KpkilqTqDZK6Ar2hYXgTjPkV7ndOBLwGpLHbALD5UuBCJ1VTytAleMBQcLcGzV5qCwrPNMZiLrbiuupL%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0 application/x-www-form-urlencoded 981
[2020-12-31T03:31:38.6318016+00:00][DBUG][14][IdentityServer4.Hosting.CorsPolicyProvider] CORS request made for path: "/Account/Login" from origin: "null" but was ignored because path was not for an allowed IdentityServer CORS endpoint
[2020-12-31T03:31:38.6346759+00:00][INFO][14][Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware] No CORS policy found for the specified request.
[2020-12-31T03:31:38.6426690+00:00][INFO][14][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T03:31:38.6586167+00:00][INFO][14][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with "{action = \"Login\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EventManager.Identity.STS.Identity.ViewModels.Account.LoginInputModel, System.String)" on controller "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>" ("EventManager.Identity.STS.Identity").
[2020-12-31T03:31:38.7016190+00:00][DBUG][14][IdentityServer4.Validation.AuthorizeRequestValidator] Start authorize request protocol validation
[2020-12-31T03:31:39.0332470+00:00][DBUG][26][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T03:31:39.0368270+00:00][DBUG][26][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T03:31:39.0384697+00:00][DBUG][26][IdentityServer4.Validation.AuthorizeRequestValidator] Checking for PKCE parameters
[2020-12-31T03:31:39.0591559+00:00][DBUG][26][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T03:31:39.0906239+00:00][DBUG][28][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] API resources in database
[2020-12-31T03:31:39.1023501+00:00][DBUG][28][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] scopes in database
[2020-12-31T03:31:39.1029741+00:00][DBUG][28][IdentityServer4.Validation.AuthorizeRequestValidator] Calling into custom validator: "IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator"
[2020-12-31T03:31:39.5188480+00:00][DBUG][31][IdentityServer4.Hosting.IdentityServerAuthenticationService] Augmenting SignInContext
[2020-12-31T03:31:39.5230371+00:00][DBUG][31][IdentityServer4.Hosting.IdentityServerAuthenticationService] Adding idp claim with value: "local"
[2020-12-31T03:31:39.5243807+00:00][DBUG][31][IdentityServer4.Hosting.IdentityServerAuthenticationService] Adding auth_time claim with value: "1609385499"
[2020-12-31T03:31:39.5454947+00:00][INFO][31][Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler] AuthenticationScheme: "Identity.Application" signed in.
[2020-12-31T03:31:39.5609407+00:00][INFO][31][IdentityServer4.Events.DefaultEventService] UserLoginSuccessEvent { Username: "admin", Provider: null, ProviderUserId: null, SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", DisplayName: "admin", Endpoint: "UI", ClientId: null, Category: "Authentication", Name: "User Login Success", EventType: Success, Id: 1000, Message: null, ActivityId: "0HM5D7HV3BGEH:00000002", TimeStamp: 12/31/2020 03:31:39, ProcessId: 26, LocalIpAddress: "::ffff:172.19.0.7:50003", RemoteIpAddress: "172.19.0.1" }
[2020-12-31T03:31:39.5686849+00:00][INFO][31][Microsoft.AspNetCore.Mvc.Infrastructure.RedirectResultExecutor] Executing RedirectResult, redirecting to "/connect/authorize/callback?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=nUXNrthSTAQpm6QkN9BjTy2YJJ0kTz7ztNKy8rhbqYs&code_challenge_method=S256&response_mode=form_post&nonce=637449822704853100.NmQ1OWUwOTItMTM3Yy00NmNiLWIwZTgtNjJiMjlhMjc2NzkzNDczZTEwOTEtOGM5Ni00OTMxLWE0NmEtN2Q1YTc4YzJmZGI5&state=CfDJ8HbmgoufA85PoVB4uWHKwLc051tTyVHzeca-H8ecAYpxfXSGqWjeviJ_VvkNZQvUbWfSv5qL37oC12EnWoQmCybTIQ92KpkilqTqDZK6Ar2hYXgTjPkV7ndOBLwGpLHbALD5UuBCJ1VTytAleMBQcLcGzV5qCwrPNMZiLrbiuupL&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0".
[2020-12-31T03:31:39.5712805+00:00][INFO][31][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)" in 911.3193ms
[2020-12-31T03:31:39.5762571+00:00][INFO][31][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T03:31:39.5770746+00:00][INFO][31][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "POST" "/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fauth.em.host%252Fadmin%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3DnUXNrthSTAQpm6QkN9BjTy2YJJ0kTz7ztNKy8rhbqYs%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D637449822704853100.NmQ1OWUwOTItMTM3Yy00NmNiLWIwZTgtNjJiMjlhMjc2NzkzNDczZTEwOTEtOGM5Ni00OTMxLWE0NmEtN2Q1YTc4YzJmZGI5%26state%3DCfDJ8HbmgoufA85PoVB4uWHKwLc051tTyVHzeca-H8ecAYpxfXSGqWjeviJ_VvkNZQvUbWfSv5qL37oC12EnWoQmCybTIQ92KpkilqTqDZK6Ar2hYXgTjPkV7ndOBLwGpLHbALD5UuBCJ1VTytAleMBQcLcGzV5qCwrPNMZiLrbiuupL%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0" responded 302 in 957.2925 ms
[2020-12-31T03:31:39.5802172+00:00][INFO][31][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 POST https://auth.em.host/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fauth.em.host%252Fadmin%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3DnUXNrthSTAQpm6QkN9BjTy2YJJ0kTz7ztNKy8rhbqYs%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D637449822704853100.NmQ1OWUwOTItMTM3Yy00NmNiLWIwZTgtNjJiMjlhMjc2NzkzNDczZTEwOTEtOGM5Ni00OTMxLWE0NmEtN2Q1YTc4YzJmZGI5%26state%3DCfDJ8HbmgoufA85PoVB4uWHKwLc051tTyVHzeca-H8ecAYpxfXSGqWjeviJ_VvkNZQvUbWfSv5qL37oC12EnWoQmCybTIQ92KpkilqTqDZK6Ar2hYXgTjPkV7ndOBLwGpLHbALD5UuBCJ1VTytAleMBQcLcGzV5qCwrPNMZiLrbiuupL%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0 application/x-www-form-urlencoded 981 - 302 0 - 961.1763ms
[2020-12-31T03:31:39.6204152+00:00][INFO][25][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/connect/authorize/callback?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=nUXNrthSTAQpm6QkN9BjTy2YJJ0kTz7ztNKy8rhbqYs&code_challenge_method=S256&response_mode=form_post&nonce=637449822704853100.NmQ1OWUwOTItMTM3Yy00NmNiLWIwZTgtNjJiMjlhMjc2NzkzNDczZTEwOTEtOGM5Ni00OTMxLWE0NmEtN2Q1YTc4YzJmZGI5&state=CfDJ8HbmgoufA85PoVB4uWHKwLc051tTyVHzeca-H8ecAYpxfXSGqWjeviJ_VvkNZQvUbWfSv5qL37oC12EnWoQmCybTIQ92KpkilqTqDZK6Ar2hYXgTjPkV7ndOBLwGpLHbALD5UuBCJ1VTytAleMBQcLcGzV5qCwrPNMZiLrbiuupL&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0 - -
[2020-12-31T03:31:39.6339596+00:00][DBUG][25][IdentityServer4.Hosting.EndpointRouter] Request path "/connect/authorize/callback" matched to endpoint type "Authorize"
[2020-12-31T03:31:39.6355334+00:00][DBUG][25][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Authorize", successfully created handler: "IdentityServer4.Endpoints.AuthorizeCallbackEndpoint"
[2020-12-31T03:31:39.6363410+00:00][INFO][25][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeCallbackEndpoint" for "/connect/authorize/callback"
[2020-12-31T03:31:39.6481560+00:00][DBUG][25][IdentityServer4.Endpoints.AuthorizeCallbackEndpoint] Start authorize callback request
[2020-12-31T03:31:39.6552386+00:00][DBUG][25][IdentityServer4.Endpoints.AuthorizeCallbackEndpoint] User in authorize request: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b"
[2020-12-31T03:31:39.6595231+00:00][DBUG][25][IdentityServer4.Validation.AuthorizeRequestValidator] Start authorize request protocol validation
[2020-12-31T03:31:39.7931296+00:00][DBUG][31][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T03:31:39.7938922+00:00][DBUG][31][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T03:31:39.7947243+00:00][DBUG][31][IdentityServer4.Validation.AuthorizeRequestValidator] Checking for PKCE parameters
[2020-12-31T03:31:39.8387289+00:00][DBUG][24][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T03:31:39.8588218+00:00][DBUG][24][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] API resources in database
[2020-12-31T03:31:39.8701727+00:00][DBUG][29][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] scopes in database
[2020-12-31T03:31:39.8723164+00:00][DBUG][29][IdentityServer4.Validation.AuthorizeRequestValidator] Calling into custom validator: "IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator"
[2020-12-31T03:31:39.8785420+00:00][DBUG][29][IdentityServer4.Endpoints.AuthorizeCallbackEndpoint] ValidatedAuthorizeRequest
AuthorizeRequestValidationLog { ClientId: "urn:em:client:mvc", ClientName: "Event Manager Identity Admin UI", RedirectUri: "https://auth.em.host/admin/signin-oidc", AllowedRedirectUris: ["https://auth.em.host/admin/signin-oidc"], SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", ResponseType: "code", ResponseMode: "form_post", GrantType: "authorization_code", RequestedScopes: "openid profile email roles", State: "CfDJ8HbmgoufA85PoVB4uWHKwLc051tTyVHzeca-H8ecAYpxfXSGqWjeviJ_VvkNZQvUbWfSv5qL37oC12EnWoQmCybTIQ92KpkilqTqDZK6Ar2hYXgTjPkV7ndOBLwGpLHbALD5UuBCJ1VTytAleMBQcLcGzV5qCwrPNMZiLrbiuupL", UiLocales: null, Nonce: "637449822704853100.NmQ1OWUwOTItMTM3Yy00NmNiLWIwZTgtNjJiMjlhMjc2NzkzNDczZTEwOTEtOGM5Ni00OTMxLWE0NmEtN2Q1YTc4YzJmZGI5", AuthenticationContextReferenceClasses: null, DisplayMode: null, PromptMode: "", MaxAge: null, LoginHint: null, SessionId: "58CCABBB3F870AA190584D9589B0D705", Raw: [("client_id": "urn:em:client:mvc"), ("redirect_uri": "https://auth.em.host/admin/signin-oidc"), ("response_type": "code"), ("scope": "openid profile email roles"), ("code_challenge": "nUXNrthSTAQpm6QkN9BjTy2YJJ0kTz7ztNKy8rhbqYs"), ("code_challenge_method": "S256"), ("response_mode": "form_post"), ("nonce": "637449822704853100.NmQ1OWUwOTItMTM3Yy00NmNiLWIwZTgtNjJiMjlhMjc2NzkzNDczZTEwOTEtOGM5Ni00OTMxLWE0NmEtN2Q1YTc4YzJmZGI5"), ("state": "CfDJ8HbmgoufA85PoVB4uWHKwLc051tTyVHzeca-H8ecAYpxfXSGqWjeviJ_VvkNZQvUbWfSv5qL37oC12EnWoQmCybTIQ92KpkilqTqDZK6Ar2hYXgTjPkV7ndOBLwGpLHbALD5UuBCJ1VTytAleMBQcLcGzV5qCwrPNMZiLrbiuupL"), ("x-client-SKU": "ID_NETSTANDARD2_0"), ("x-client-ver": "6.8.0.0")] }
[2020-12-31T03:31:39.9565804+00:00][DBUG][29][IdentityServer4.Services.DefaultConsentService] Client is configured to not require consent, no consent is required
[2020-12-31T03:31:39.9680135+00:00][DBUG][29][IdentityServer4.ResponseHandling.AuthorizeResponseGenerator] Creating Authorization Code Flow response.
[2020-12-31T03:31:40.1615996+00:00][DBUG][31][IdentityServer4.EntityFramework.Stores.PersistedGrantStore] "3FW1mdwNaoYHds4YviTbIDxU5e+1otb1dCfP75SLFSI=" not found in database
[2020-12-31T03:31:40.5113436+00:00][INFO][28][IdentityServer4.Events.DefaultEventService] TokenIssuedSuccessEvent { ClientId: "urn:em:client:mvc", ClientName: "Event Manager Identity Admin UI", RedirectUri: "https://auth.em.host/admin/signin-oidc", Endpoint: "Authorize", SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", Scopes: "openid profile email roles", GrantType: "authorization_code", Tokens: [Token { TokenType: "code", TokenValue: "****B0DD" }], Category: "Token", Name: "Token Issued Success", EventType: Success, Id: 2000, Message: null, ActivityId: "0HM5D7HV3BGEI:00000002", TimeStamp: 12/31/2020 03:31:40, ProcessId: 26, LocalIpAddress: "::ffff:172.19.0.7:50003", RemoteIpAddress: "172.19.0.1" }
[2020-12-31T03:31:40.5186132+00:00][DBUG][28][IdentityServer4.Endpoints.AuthorizeCallbackEndpoint] Authorize endpoint response
AuthorizeResponseLog { SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", ClientId: "urn:em:client:mvc", RedirectUri: "https://auth.em.host/admin/signin-oidc", State: "CfDJ8HbmgoufA85PoVB4uWHKwLc051tTyVHzeca-H8ecAYpxfXSGqWjeviJ_VvkNZQvUbWfSv5qL37oC12EnWoQmCybTIQ92KpkilqTqDZK6Ar2hYXgTjPkV7ndOBLwGpLHbALD5UuBCJ1VTytAleMBQcLcGzV5qCwrPNMZiLrbiuupL", Scope: "openid profile email roles", Error: null, ErrorDescription: null }
[2020-12-31T03:31:40.5304554+00:00][DBUG][28][IdentityServer4.Hosting.IdentityServerAuthenticationService] Augmenting SignInContext
[2020-12-31T03:31:40.5334011+00:00][INFO][28][Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler] AuthenticationScheme: "Identity.Application" signed in.
[2020-12-31T03:31:40.5414948+00:00][INFO][28][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/connect/authorize/callback?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=nUXNrthSTAQpm6QkN9BjTy2YJJ0kTz7ztNKy8rhbqYs&code_challenge_method=S256&response_mode=form_post&nonce=637449822704853100.NmQ1OWUwOTItMTM3Yy00NmNiLWIwZTgtNjJiMjlhMjc2NzkzNDczZTEwOTEtOGM5Ni00OTMxLWE0NmEtN2Q1YTc4YzJmZGI5&state=CfDJ8HbmgoufA85PoVB4uWHKwLc051tTyVHzeca-H8ecAYpxfXSGqWjeviJ_VvkNZQvUbWfSv5qL37oC12EnWoQmCybTIQ92KpkilqTqDZK6Ar2hYXgTjPkV7ndOBLwGpLHbALD5UuBCJ1VTytAleMBQcLcGzV5qCwrPNMZiLrbiuupL&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0" responded 200 in 919.8992 ms
[2020-12-31T03:31:40.5423865+00:00][INFO][28][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/connect/authorize/callback?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=nUXNrthSTAQpm6QkN9BjTy2YJJ0kTz7ztNKy8rhbqYs&code_challenge_method=S256&response_mode=form_post&nonce=637449822704853100.NmQ1OWUwOTItMTM3Yy00NmNiLWIwZTgtNjJiMjlhMjc2NzkzNDczZTEwOTEtOGM5Ni00OTMxLWE0NmEtN2Q1YTc4YzJmZGI5&state=CfDJ8HbmgoufA85PoVB4uWHKwLc051tTyVHzeca-H8ecAYpxfXSGqWjeviJ_VvkNZQvUbWfSv5qL37oC12EnWoQmCybTIQ92KpkilqTqDZK6Ar2hYXgTjPkV7ndOBLwGpLHbALD5UuBCJ1VTytAleMBQcLcGzV5qCwrPNMZiLrbiuupL&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0 - - - 200 - text/html;+charset=UTF-8 922.0015ms
[2020-12-31T03:49:29.0013582+00:00][INFO][52][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/connect/authorize?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=bptTlSPG9m9vfUJHLEpYNxBmgtqIuVonWzE6T-tTPb4&code_challenge_method=S256&response_mode=form_post&nonce=637449833688878142.NDI0MjVmNmUtNzI2ZC00N2JmLWJhOWUtZDYxOTU4M2VjNzJhNTgwNDFiNTgtMTFkMy00NmFiLTg1NDMtMzUwM2QxNGNhZWQz&state=CfDJ8HbmgoufA85PoVB4uWHKwLcwmfyPvz4Ccw0pXGVohoLKPrQk_N-SEDotXt5IbPQ9r-Dp9_NVwFhmxd_RbGWzGfo3_Bwb1U66toFGeVoTi7dqbDKAw3xYXwnUf5naXM8zoIpwUJ6l-_aHwWcRolSI2LoYflemA1eYVD5mSTEPX0NT&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0 - -
[2020-12-31T03:49:29.0054393+00:00][DBUG][52][IdentityServer4.Hosting.EndpointRouter] Request path "/connect/authorize" matched to endpoint type "Authorize"
[2020-12-31T03:49:29.0075829+00:00][DBUG][52][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Authorize", successfully created handler: "IdentityServer4.Endpoints.AuthorizeEndpoint"
[2020-12-31T03:49:29.0174661+00:00][INFO][52][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize"
[2020-12-31T03:49:29.0200396+00:00][DBUG][52][IdentityServer4.Endpoints.AuthorizeEndpoint] Start authorize request
[2020-12-31T03:49:29.0211663+00:00][DBUG][52][IdentityServer4.Endpoints.AuthorizeEndpoint] No user present in authorize request
[2020-12-31T03:49:29.0220193+00:00][DBUG][52][IdentityServer4.Validation.AuthorizeRequestValidator] Start authorize request protocol validation
[2020-12-31T03:49:29.3481280+00:00][DBUG][49][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T03:49:29.3488002+00:00][DBUG][49][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T03:49:29.3495530+00:00][DBUG][49][IdentityServer4.Validation.AuthorizeRequestValidator] Checking for PKCE parameters
[2020-12-31T03:49:29.4360347+00:00][DBUG][52][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T03:49:29.4690115+00:00][DBUG][51][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] API resources in database
[2020-12-31T03:49:29.4835771+00:00][DBUG][52][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] scopes in database
[2020-12-31T03:49:29.4842785+00:00][DBUG][52][IdentityServer4.Validation.AuthorizeRequestValidator] Calling into custom validator: "IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator"
[2020-12-31T03:49:29.4897477+00:00][DBUG][52][IdentityServer4.Endpoints.AuthorizeEndpoint] ValidatedAuthorizeRequest
AuthorizeRequestValidationLog { ClientId: "urn:em:client:mvc", ClientName: "Event Manager Identity Admin UI", RedirectUri: "https://auth.em.host/admin/signin-oidc", AllowedRedirectUris: ["https://auth.em.host/admin/signin-oidc"], SubjectId: "anonymous", ResponseType: "code", ResponseMode: "form_post", GrantType: "authorization_code", RequestedScopes: "openid profile email roles", State: "CfDJ8HbmgoufA85PoVB4uWHKwLcwmfyPvz4Ccw0pXGVohoLKPrQk_N-SEDotXt5IbPQ9r-Dp9_NVwFhmxd_RbGWzGfo3_Bwb1U66toFGeVoTi7dqbDKAw3xYXwnUf5naXM8zoIpwUJ6l-_aHwWcRolSI2LoYflemA1eYVD5mSTEPX0NT", UiLocales: null, Nonce: "637449833688878142.NDI0MjVmNmUtNzI2ZC00N2JmLWJhOWUtZDYxOTU4M2VjNzJhNTgwNDFiNTgtMTFkMy00NmFiLTg1NDMtMzUwM2QxNGNhZWQz", AuthenticationContextReferenceClasses: null, DisplayMode: null, PromptMode: "", MaxAge: null, LoginHint: null, SessionId: "", Raw: [("client_id": "urn:em:client:mvc"), ("redirect_uri": "https://auth.em.host/admin/signin-oidc"), ("response_type": "code"), ("scope": "openid profile email roles"), ("code_challenge": "bptTlSPG9m9vfUJHLEpYNxBmgtqIuVonWzE6T-tTPb4"), ("code_challenge_method": "S256"), ("response_mode": "form_post"), ("nonce": "637449833688878142.NDI0MjVmNmUtNzI2ZC00N2JmLWJhOWUtZDYxOTU4M2VjNzJhNTgwNDFiNTgtMTFkMy00NmFiLTg1NDMtMzUwM2QxNGNhZWQz"), ("state": "CfDJ8HbmgoufA85PoVB4uWHKwLcwmfyPvz4Ccw0pXGVohoLKPrQk_N-SEDotXt5IbPQ9r-Dp9_NVwFhmxd_RbGWzGfo3_Bwb1U66toFGeVoTi7dqbDKAw3xYXwnUf5naXM8zoIpwUJ6l-_aHwWcRolSI2LoYflemA1eYVD5mSTEPX0NT"), ("x-client-SKU": "ID_NETSTANDARD2_0"), ("x-client-ver": "6.8.0.0")] }
[2020-12-31T03:49:29.4934242+00:00][INFO][52][IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator] Showing login: User is not authenticated
[2020-12-31T03:49:29.4950847+00:00][INFO][52][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/connect/authorize?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=bptTlSPG9m9vfUJHLEpYNxBmgtqIuVonWzE6T-tTPb4&code_challenge_method=S256&response_mode=form_post&nonce=637449833688878142.NDI0MjVmNmUtNzI2ZC00N2JmLWJhOWUtZDYxOTU4M2VjNzJhNTgwNDFiNTgtMTFkMy00NmFiLTg1NDMtMzUwM2QxNGNhZWQz&state=CfDJ8HbmgoufA85PoVB4uWHKwLcwmfyPvz4Ccw0pXGVohoLKPrQk_N-SEDotXt5IbPQ9r-Dp9_NVwFhmxd_RbGWzGfo3_Bwb1U66toFGeVoTi7dqbDKAw3xYXwnUf5naXM8zoIpwUJ6l-_aHwWcRolSI2LoYflemA1eYVD5mSTEPX0NT&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0" responded 302 in 492.2159 ms
[2020-12-31T03:49:29.4967362+00:00][INFO][52][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/connect/authorize?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=bptTlSPG9m9vfUJHLEpYNxBmgtqIuVonWzE6T-tTPb4&code_challenge_method=S256&response_mode=form_post&nonce=637449833688878142.NDI0MjVmNmUtNzI2ZC00N2JmLWJhOWUtZDYxOTU4M2VjNzJhNTgwNDFiNTgtMTFkMy00NmFiLTg1NDMtMzUwM2QxNGNhZWQz&state=CfDJ8HbmgoufA85PoVB4uWHKwLcwmfyPvz4Ccw0pXGVohoLKPrQk_N-SEDotXt5IbPQ9r-Dp9_NVwFhmxd_RbGWzGfo3_Bwb1U66toFGeVoTi7dqbDKAw3xYXwnUf5naXM8zoIpwUJ6l-_aHwWcRolSI2LoYflemA1eYVD5mSTEPX0NT&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0 - - - 302 0 - 495.8060ms
[2020-12-31T03:49:29.5490373+00:00][INFO][54][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fauth.em.host%252Fadmin%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3DbptTlSPG9m9vfUJHLEpYNxBmgtqIuVonWzE6T-tTPb4%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D637449833688878142.NDI0MjVmNmUtNzI2ZC00N2JmLWJhOWUtZDYxOTU4M2VjNzJhNTgwNDFiNTgtMTFkMy00NmFiLTg1NDMtMzUwM2QxNGNhZWQz%26state%3DCfDJ8HbmgoufA85PoVB4uWHKwLcwmfyPvz4Ccw0pXGVohoLKPrQk_N-SEDotXt5IbPQ9r-Dp9_NVwFhmxd_RbGWzGfo3_Bwb1U66toFGeVoTi7dqbDKAw3xYXwnUf5naXM8zoIpwUJ6l-_aHwWcRolSI2LoYflemA1eYVD5mSTEPX0NT%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0 - -
[2020-12-31T03:49:29.5533543+00:00][INFO][54][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T03:49:29.5587841+00:00][INFO][54][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with "{action = \"Login\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String)" on controller "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>" ("EventManager.Identity.STS.Identity").
[2020-12-31T03:49:29.5753548+00:00][DBUG][54][IdentityServer4.Validation.AuthorizeRequestValidator] Start authorize request protocol validation
[2020-12-31T03:49:29.7184357+00:00][DBUG][54][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T03:49:29.7192558+00:00][DBUG][54][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T03:49:29.7224980+00:00][DBUG][54][IdentityServer4.Validation.AuthorizeRequestValidator] Checking for PKCE parameters
[2020-12-31T03:49:29.7441522+00:00][DBUG][52][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T03:49:29.7963676+00:00][DBUG][51][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] API resources in database
[2020-12-31T03:49:29.8056474+00:00][DBUG][49][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] scopes in database
[2020-12-31T03:49:29.8071438+00:00][DBUG][49][IdentityServer4.Validation.AuthorizeRequestValidator] Calling into custom validator: "IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator"
[2020-12-31T03:49:30.0889338+00:00][DBUG][58][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T03:49:30.0899201+00:00][DBUG][58][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T03:49:30.0997232+00:00][INFO][58][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executing ViewResult, running view "Login".
[2020-12-31T03:49:30.1267412+00:00][INFO][58][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executed ViewResult - view "Login" executed in 27.6273ms.
[2020-12-31T03:49:30.1275888+00:00][INFO][58][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)" in 565.897ms
[2020-12-31T03:49:30.1283431+00:00][INFO][58][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T03:49:30.1290484+00:00][INFO][58][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fauth.em.host%252Fadmin%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3DbptTlSPG9m9vfUJHLEpYNxBmgtqIuVonWzE6T-tTPb4%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D637449833688878142.NDI0MjVmNmUtNzI2ZC00N2JmLWJhOWUtZDYxOTU4M2VjNzJhNTgwNDFiNTgtMTFkMy00NmFiLTg1NDMtMzUwM2QxNGNhZWQz%26state%3DCfDJ8HbmgoufA85PoVB4uWHKwLcwmfyPvz4Ccw0pXGVohoLKPrQk_N-SEDotXt5IbPQ9r-Dp9_NVwFhmxd_RbGWzGfo3_Bwb1U66toFGeVoTi7dqbDKAw3xYXwnUf5naXM8zoIpwUJ6l-_aHwWcRolSI2LoYflemA1eYVD5mSTEPX0NT%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0" responded 200 in 579.3004 ms
[2020-12-31T03:49:30.1304413+00:00][INFO][58][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fauth.em.host%252Fadmin%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3DbptTlSPG9m9vfUJHLEpYNxBmgtqIuVonWzE6T-tTPb4%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D637449833688878142.NDI0MjVmNmUtNzI2ZC00N2JmLWJhOWUtZDYxOTU4M2VjNzJhNTgwNDFiNTgtMTFkMy00NmFiLTg1NDMtMzUwM2QxNGNhZWQz%26state%3DCfDJ8HbmgoufA85PoVB4uWHKwLcwmfyPvz4Ccw0pXGVohoLKPrQk_N-SEDotXt5IbPQ9r-Dp9_NVwFhmxd_RbGWzGfo3_Bwb1U66toFGeVoTi7dqbDKAw3xYXwnUf5naXM8zoIpwUJ6l-_aHwWcRolSI2LoYflemA1eYVD5mSTEPX0NT%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0 - - - 200 - text/html;+charset=utf-8 581.3715ms
[2020-12-31T03:49:30.2552917+00:00][INFO][51][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/dist/css/bundle.min.css?v=6Y8xGSDMhkjYMZuaFSdp3fqA3xdNX-Q6_xp14ExGbY8 - -
[2020-12-31T03:49:30.3309743+00:00][INFO][58][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/dist/js/bundle.min.js?v=11Fw87BWmEIjIw_LrA_JwvJM5t0w9WbTFIog6ElarB0 - -
[2020-12-31T03:49:30.3572630+00:00][INFO][49][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/dist/css/web.css?v=gzbQ_J4PfKys2r0KpTe01uKRO7lnqK_lEp7OvIB7ZAA - -
[2020-12-31T03:49:30.4406070+00:00][INFO][52][Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware] Sending file. Request path: '"/dist/css/web.css"'. Physical path: '"/app/wwwroot/dist/css/web.css"'
[2020-12-31T03:49:30.4701892+00:00][INFO][51][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/dist/css/web.css?v=gzbQ_J4PfKys2r0KpTe01uKRO7lnqK_lEp7OvIB7ZAA" responded 200 in 111.8575 ms
[2020-12-31T03:49:30.4780672+00:00][INFO][51][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/dist/css/web.css?v=gzbQ_J4PfKys2r0KpTe01uKRO7lnqK_lEp7OvIB7ZAA - - - 200 8009 text/css 120.7708ms
[2020-12-31T03:49:30.5035433+00:00][INFO][51][Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware] Sending file. Request path: '"/dist/css/bundle.min.css"'. Physical path: '"/app/wwwroot/dist/css/bundle.min.css"'
[2020-12-31T03:49:30.5113475+00:00][INFO][51][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/dist/css/bundle.min.css?v=6Y8xGSDMhkjYMZuaFSdp3fqA3xdNX-Q6_xp14ExGbY8" responded 200 in 255.1820 ms
[2020-12-31T03:49:30.5134067+00:00][INFO][51][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/dist/css/bundle.min.css?v=6Y8xGSDMhkjYMZuaFSdp3fqA3xdNX-Q6_xp14ExGbY8 - - - 200 205310 text/css 257.7475ms
[2020-12-31T03:49:30.5383033+00:00][INFO][60][Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware] Sending file. Request path: '"/dist/js/bundle.min.js"'. Physical path: '"/app/wwwroot/dist/js/bundle.min.js"'
[2020-12-31T03:49:30.5538716+00:00][INFO][60][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/dist/js/bundle.min.js?v=11Fw87BWmEIjIw_LrA_JwvJM5t0w9WbTFIog6ElarB0" responded 200 in 196.5713 ms
[2020-12-31T03:49:30.5549260+00:00][INFO][60][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/dist/js/bundle.min.js?v=11Fw87BWmEIjIw_LrA_JwvJM5t0w9WbTFIog6ElarB0 - - - 200 250698 application/javascript 223.8987ms
[2020-12-31T03:49:30.6602077+00:00][INFO][49][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/dist/fonts/open-iconic.woff - -
[2020-12-31T03:49:30.6656576+00:00][INFO][62][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/dist/fonts/fontawesome-webfont.woff2?v=4.7.0 - -
[2020-12-31T03:49:30.7389981+00:00][INFO][61][Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware] Sending file. Request path: '"/dist/fonts/fontawesome-webfont.woff2"'. Physical path: '"/app/wwwroot/dist/fonts/fontawesome-webfont.woff2"'
[2020-12-31T03:49:30.7404804+00:00][INFO][61][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/dist/fonts/fontawesome-webfont.woff2?v=4.7.0" responded 200 in 73.2729 ms
[2020-12-31T03:49:30.7417607+00:00][INFO][61][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/dist/fonts/fontawesome-webfont.woff2?v=4.7.0 - - - 200 77160 font/woff2 76.0742ms
[2020-12-31T03:49:30.8401924+00:00][INFO][61][Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware] Sending file. Request path: '"/dist/fonts/open-iconic.woff"'. Physical path: '"/app/wwwroot/dist/fonts/open-iconic.woff"'
[2020-12-31T03:49:30.8522288+00:00][INFO][61][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/dist/fonts/open-iconic.woff" responded 200 in 191.2523 ms
[2020-12-31T03:49:30.8537575+00:00][INFO][61][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/dist/fonts/open-iconic.woff - - - 200 14984 application/font-woff 193.4982ms
[2020-12-31T03:49:30.9543962+00:00][INFO][51][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/favicon.ico - -
[2020-12-31T03:49:31.0333071+00:00][INFO][49][Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware] Sending file. Request path: '"/favicon.ico"'. Physical path: '"/app/wwwroot/favicon.ico"'
[2020-12-31T03:49:31.0338579+00:00][INFO][49][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/favicon.ico" responded 200 in 77.0672 ms
[2020-12-31T03:49:31.0352976+00:00][INFO][49][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/favicon.ico - - - 200 4286 image/x-icon 80.8161ms
[2020-12-31T03:50:27.6425201+00:00][INFO][66][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 POST https://auth.em.host/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fauth.em.host%252Fadmin%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3DbptTlSPG9m9vfUJHLEpYNxBmgtqIuVonWzE6T-tTPb4%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D637449833688878142.NDI0MjVmNmUtNzI2ZC00N2JmLWJhOWUtZDYxOTU4M2VjNzJhNTgwNDFiNTgtMTFkMy00NmFiLTg1NDMtMzUwM2QxNGNhZWQz%26state%3DCfDJ8HbmgoufA85PoVB4uWHKwLcwmfyPvz4Ccw0pXGVohoLKPrQk_N-SEDotXt5IbPQ9r-Dp9_NVwFhmxd_RbGWzGfo3_Bwb1U66toFGeVoTi7dqbDKAw3xYXwnUf5naXM8zoIpwUJ6l-_aHwWcRolSI2LoYflemA1eYVD5mSTEPX0NT%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0 application/x-www-form-urlencoded 981
[2020-12-31T03:50:27.6442930+00:00][DBUG][66][IdentityServer4.Hosting.CorsPolicyProvider] CORS request made for path: "/Account/Login" from origin: "null" but was ignored because path was not for an allowed IdentityServer CORS endpoint
[2020-12-31T03:50:27.6450330+00:00][INFO][66][Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware] No CORS policy found for the specified request.
[2020-12-31T03:50:27.6510112+00:00][INFO][66][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T03:50:27.6519575+00:00][INFO][66][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with "{action = \"Login\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EventManager.Identity.STS.Identity.ViewModels.Account.LoginInputModel, System.String)" on controller "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>" ("EventManager.Identity.STS.Identity").
[2020-12-31T03:50:27.6633807+00:00][DBUG][66][IdentityServer4.Validation.AuthorizeRequestValidator] Start authorize request protocol validation
[2020-12-31T03:50:27.9602337+00:00][DBUG][71][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T03:50:27.9629681+00:00][DBUG][71][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T03:50:27.9650788+00:00][DBUG][71][IdentityServer4.Validation.AuthorizeRequestValidator] Checking for PKCE parameters
[2020-12-31T03:50:27.9911477+00:00][DBUG][65][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T03:50:28.0096833+00:00][DBUG][65][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] API resources in database
[2020-12-31T03:50:28.0222459+00:00][DBUG][71][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] scopes in database
[2020-12-31T03:50:28.0256441+00:00][DBUG][71][IdentityServer4.Validation.AuthorizeRequestValidator] Calling into custom validator: "IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator"
[2020-12-31T03:50:28.1324097+00:00][DBUG][49][IdentityServer4.Hosting.IdentityServerAuthenticationService] Augmenting SignInContext
[2020-12-31T03:50:28.1343121+00:00][DBUG][49][IdentityServer4.Hosting.IdentityServerAuthenticationService] Adding idp claim with value: "local"
[2020-12-31T03:50:28.1396474+00:00][DBUG][49][IdentityServer4.Hosting.IdentityServerAuthenticationService] Adding auth_time claim with value: "1609386628"
[2020-12-31T03:50:28.1443728+00:00][INFO][49][Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler] AuthenticationScheme: "Identity.Application" signed in.
[2020-12-31T03:50:28.1459244+00:00][INFO][49][IdentityServer4.Events.DefaultEventService] UserLoginSuccessEvent { Username: "admin", Provider: null, ProviderUserId: null, SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", DisplayName: "admin", Endpoint: "UI", ClientId: null, Category: "Authentication", Name: "User Login Success", EventType: Success, Id: 1000, Message: null, ActivityId: "0HM5D7HV3BGER:00000002", TimeStamp: 12/31/2020 03:50:28, ProcessId: 26, LocalIpAddress: "::ffff:172.19.0.7:50003", RemoteIpAddress: "172.19.0.1" }
[2020-12-31T03:50:28.1516908+00:00][INFO][49][Microsoft.AspNetCore.Mvc.Infrastructure.RedirectResultExecutor] Executing RedirectResult, redirecting to "/connect/authorize/callback?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=bptTlSPG9m9vfUJHLEpYNxBmgtqIuVonWzE6T-tTPb4&code_challenge_method=S256&response_mode=form_post&nonce=637449833688878142.NDI0MjVmNmUtNzI2ZC00N2JmLWJhOWUtZDYxOTU4M2VjNzJhNTgwNDFiNTgtMTFkMy00NmFiLTg1NDMtMzUwM2QxNGNhZWQz&state=CfDJ8HbmgoufA85PoVB4uWHKwLcwmfyPvz4Ccw0pXGVohoLKPrQk_N-SEDotXt5IbPQ9r-Dp9_NVwFhmxd_RbGWzGfo3_Bwb1U66toFGeVoTi7dqbDKAw3xYXwnUf5naXM8zoIpwUJ6l-_aHwWcRolSI2LoYflemA1eYVD5mSTEPX0NT&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0".
[2020-12-31T03:50:28.1528621+00:00][INFO][49][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)" in 499.9043ms
[2020-12-31T03:50:28.1537773+00:00][INFO][49][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T03:50:28.1546494+00:00][INFO][49][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "POST" "/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fauth.em.host%252Fadmin%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3DbptTlSPG9m9vfUJHLEpYNxBmgtqIuVonWzE6T-tTPb4%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D637449833688878142.NDI0MjVmNmUtNzI2ZC00N2JmLWJhOWUtZDYxOTU4M2VjNzJhNTgwNDFiNTgtMTFkMy00NmFiLTg1NDMtMzUwM2QxNGNhZWQz%26state%3DCfDJ8HbmgoufA85PoVB4uWHKwLcwmfyPvz4Ccw0pXGVohoLKPrQk_N-SEDotXt5IbPQ9r-Dp9_NVwFhmxd_RbGWzGfo3_Bwb1U66toFGeVoTi7dqbDKAw3xYXwnUf5naXM8zoIpwUJ6l-_aHwWcRolSI2LoYflemA1eYVD5mSTEPX0NT%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0" responded 302 in 510.6858 ms
[2020-12-31T03:50:28.1575758+00:00][INFO][49][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 POST https://auth.em.host/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fauth.em.host%252Fadmin%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3DbptTlSPG9m9vfUJHLEpYNxBmgtqIuVonWzE6T-tTPb4%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D637449833688878142.NDI0MjVmNmUtNzI2ZC00N2JmLWJhOWUtZDYxOTU4M2VjNzJhNTgwNDFiNTgtMTFkMy00NmFiLTg1NDMtMzUwM2QxNGNhZWQz%26state%3DCfDJ8HbmgoufA85PoVB4uWHKwLcwmfyPvz4Ccw0pXGVohoLKPrQk_N-SEDotXt5IbPQ9r-Dp9_NVwFhmxd_RbGWzGfo3_Bwb1U66toFGeVoTi7dqbDKAw3xYXwnUf5naXM8zoIpwUJ6l-_aHwWcRolSI2LoYflemA1eYVD5mSTEPX0NT%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0 application/x-www-form-urlencoded 981 - 302 0 - 515.0713ms
[2020-12-31T03:50:28.1982583+00:00][INFO][65][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/connect/authorize/callback?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=bptTlSPG9m9vfUJHLEpYNxBmgtqIuVonWzE6T-tTPb4&code_challenge_method=S256&response_mode=form_post&nonce=637449833688878142.NDI0MjVmNmUtNzI2ZC00N2JmLWJhOWUtZDYxOTU4M2VjNzJhNTgwNDFiNTgtMTFkMy00NmFiLTg1NDMtMzUwM2QxNGNhZWQz&state=CfDJ8HbmgoufA85PoVB4uWHKwLcwmfyPvz4Ccw0pXGVohoLKPrQk_N-SEDotXt5IbPQ9r-Dp9_NVwFhmxd_RbGWzGfo3_Bwb1U66toFGeVoTi7dqbDKAw3xYXwnUf5naXM8zoIpwUJ6l-_aHwWcRolSI2LoYflemA1eYVD5mSTEPX0NT&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0 - -
[2020-12-31T03:50:28.2065324+00:00][DBUG][65][IdentityServer4.Hosting.EndpointRouter] Request path "/connect/authorize/callback" matched to endpoint type "Authorize"
[2020-12-31T03:50:28.2096857+00:00][DBUG][65][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Authorize", successfully created handler: "IdentityServer4.Endpoints.AuthorizeCallbackEndpoint"
[2020-12-31T03:50:28.2103062+00:00][INFO][65][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeCallbackEndpoint" for "/connect/authorize/callback"
[2020-12-31T03:50:28.2114130+00:00][DBUG][65][IdentityServer4.Endpoints.AuthorizeCallbackEndpoint] Start authorize callback request
[2020-12-31T03:50:28.2132230+00:00][DBUG][65][IdentityServer4.Endpoints.AuthorizeCallbackEndpoint] User in authorize request: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b"
[2020-12-31T03:50:28.2139172+00:00][DBUG][65][IdentityServer4.Validation.AuthorizeRequestValidator] Start authorize request protocol validation
[2020-12-31T03:50:28.4034104+00:00][DBUG][63][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T03:50:28.4045837+00:00][DBUG][63][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T03:50:28.4054991+00:00][DBUG][63][IdentityServer4.Validation.AuthorizeRequestValidator] Checking for PKCE parameters
[2020-12-31T03:50:28.4333948+00:00][DBUG][63][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T03:50:28.4485294+00:00][DBUG][63][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] API resources in database
[2020-12-31T03:50:28.4625087+00:00][DBUG][54][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] scopes in database
[2020-12-31T03:50:28.4633257+00:00][DBUG][54][IdentityServer4.Validation.AuthorizeRequestValidator] Calling into custom validator: "IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator"
[2020-12-31T03:50:28.4642584+00:00][DBUG][54][IdentityServer4.Endpoints.AuthorizeCallbackEndpoint] ValidatedAuthorizeRequest
AuthorizeRequestValidationLog { ClientId: "urn:em:client:mvc", ClientName: "Event Manager Identity Admin UI", RedirectUri: "https://auth.em.host/admin/signin-oidc", AllowedRedirectUris: ["https://auth.em.host/admin/signin-oidc"], SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", ResponseType: "code", ResponseMode: "form_post", GrantType: "authorization_code", RequestedScopes: "openid profile email roles", State: "CfDJ8HbmgoufA85PoVB4uWHKwLcwmfyPvz4Ccw0pXGVohoLKPrQk_N-SEDotXt5IbPQ9r-Dp9_NVwFhmxd_RbGWzGfo3_Bwb1U66toFGeVoTi7dqbDKAw3xYXwnUf5naXM8zoIpwUJ6l-_aHwWcRolSI2LoYflemA1eYVD5mSTEPX0NT", UiLocales: null, Nonce: "637449833688878142.NDI0MjVmNmUtNzI2ZC00N2JmLWJhOWUtZDYxOTU4M2VjNzJhNTgwNDFiNTgtMTFkMy00NmFiLTg1NDMtMzUwM2QxNGNhZWQz", AuthenticationContextReferenceClasses: null, DisplayMode: null, PromptMode: "", MaxAge: null, LoginHint: null, SessionId: "627C4E5C81B4D9E2480C12E250506434", Raw: [("client_id": "urn:em:client:mvc"), ("redirect_uri": "https://auth.em.host/admin/signin-oidc"), ("response_type": "code"), ("scope": "openid profile email roles"), ("code_challenge": "bptTlSPG9m9vfUJHLEpYNxBmgtqIuVonWzE6T-tTPb4"), ("code_challenge_method": "S256"), ("response_mode": "form_post"), ("nonce": "637449833688878142.NDI0MjVmNmUtNzI2ZC00N2JmLWJhOWUtZDYxOTU4M2VjNzJhNTgwNDFiNTgtMTFkMy00NmFiLTg1NDMtMzUwM2QxNGNhZWQz"), ("state": "CfDJ8HbmgoufA85PoVB4uWHKwLcwmfyPvz4Ccw0pXGVohoLKPrQk_N-SEDotXt5IbPQ9r-Dp9_NVwFhmxd_RbGWzGfo3_Bwb1U66toFGeVoTi7dqbDKAw3xYXwnUf5naXM8zoIpwUJ6l-_aHwWcRolSI2LoYflemA1eYVD5mSTEPX0NT"), ("x-client-SKU": "ID_NETSTANDARD2_0"), ("x-client-ver": "6.8.0.0")] }
[2020-12-31T03:50:28.5264065+00:00][DBUG][49][IdentityServer4.Services.DefaultConsentService] Client is configured to not require consent, no consent is required
[2020-12-31T03:50:28.5269376+00:00][DBUG][49][IdentityServer4.ResponseHandling.AuthorizeResponseGenerator] Creating Authorization Code Flow response.
[2020-12-31T03:50:28.5449671+00:00][DBUG][66][IdentityServer4.EntityFramework.Stores.PersistedGrantStore] "rA/xct0oQhsd/4lvITAJpUOwg+js0q6MGrnOsgXW2nE=" not found in database
[2020-12-31T03:50:28.5739954+00:00][INFO][54][IdentityServer4.Events.DefaultEventService] TokenIssuedSuccessEvent { ClientId: "urn:em:client:mvc", ClientName: "Event Manager Identity Admin UI", RedirectUri: "https://auth.em.host/admin/signin-oidc", Endpoint: "Authorize", SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", Scopes: "openid profile email roles", GrantType: "authorization_code", Tokens: [Token { TokenType: "code", TokenValue: "****CF89" }], Category: "Token", Name: "Token Issued Success", EventType: Success, Id: 2000, Message: null, ActivityId: "0HM5D7HV3BGES:00000002", TimeStamp: 12/31/2020 03:50:28, ProcessId: 26, LocalIpAddress: "::ffff:172.19.0.7:50003", RemoteIpAddress: "172.19.0.1" }
[2020-12-31T03:50:28.5758063+00:00][DBUG][54][IdentityServer4.Endpoints.AuthorizeCallbackEndpoint] Authorize endpoint response
AuthorizeResponseLog { SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", ClientId: "urn:em:client:mvc", RedirectUri: "https://auth.em.host/admin/signin-oidc", State: "CfDJ8HbmgoufA85PoVB4uWHKwLcwmfyPvz4Ccw0pXGVohoLKPrQk_N-SEDotXt5IbPQ9r-Dp9_NVwFhmxd_RbGWzGfo3_Bwb1U66toFGeVoTi7dqbDKAw3xYXwnUf5naXM8zoIpwUJ6l-_aHwWcRolSI2LoYflemA1eYVD5mSTEPX0NT", Scope: "openid profile email roles", Error: null, ErrorDescription: null }
[2020-12-31T03:50:28.5773860+00:00][DBUG][54][IdentityServer4.Hosting.IdentityServerAuthenticationService] Augmenting SignInContext
[2020-12-31T03:50:28.5787892+00:00][INFO][54][Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler] AuthenticationScheme: "Identity.Application" signed in.
[2020-12-31T03:50:28.5800401+00:00][INFO][54][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/connect/authorize/callback?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_chall[2020-12-31T04:09:45.7940597+00:00][INFO][1][IdentityServer4.Startup] Starting IdentityServer4 version "4.1.1+cebd52f5bc61bdefc262fd20739d4d087c6f961f"
[2020-12-31T04:09:46.1821736+00:00][DBUG][1][IdentityServer4.Startup] Custom IssuerUri set to "https://auth.em.host"
[2020-12-31T04:09:46.1944754+00:00][INFO][1][IdentityServer4.Startup] Using the default authentication scheme "Identity.Application" for IdentityServer
[2020-12-31T04:09:46.1954930+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.Application" as default ASP.NET Core scheme for authentication
[2020-12-31T04:09:46.1977003+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.External" as default ASP.NET Core scheme for sign-in
[2020-12-31T04:09:46.1991244+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.External" as default ASP.NET Core scheme for sign-out
[2020-12-31T04:09:46.2002757+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.Application" as default ASP.NET Core scheme for challenge
[2020-12-31T04:09:46.2036916+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.Application" as default ASP.NET Core scheme for forbid
[2020-12-31T04:09:46.7703254+00:00][INFO][1][Microsoft.Hosting.Lifetime] Now listening on: "https://[::]:50003"
[2020-12-31T04:09:46.7718368+00:00][INFO][1][Microsoft.Hosting.Lifetime] Application started. Press Ctrl+C to shut down.
[2020-12-31T04:09:46.7725549+00:00][INFO][1][Microsoft.Hosting.Lifetime] Hosting environment: "Development"
[2020-12-31T04:09:46.7733576+00:00][INFO][1][Microsoft.Hosting.Lifetime] Content root path: "/app"
[2020-12-31T04:15:46.0796057+00:00][INFO][17][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/connect/authorize/callback?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=nUXNrthSTAQpm6QkN9BjTy2YJJ0kTz7ztNKy8rhbqYs&code_challenge_method=S256&response_mode=form_post&nonce=637449822704853100.NmQ1OWUwOTItMTM3Yy00NmNiLWIwZTgtNjJiMjlhMjc2NzkzNDczZTEwOTEtOGM5Ni00OTMxLWE0NmEtN2Q1YTc4YzJmZGI5&state=CfDJ8HbmgoufA85PoVB4uWHKwLc051tTyVHzeca-H8ecAYpxfXSGqWjeviJ_VvkNZQvUbWfSv5qL37oC12EnWoQmCybTIQ92KpkilqTqDZK6Ar2hYXgTjPkV7ndOBLwGpLHbALD5UuBCJ1VTytAleMBQcLcGzV5qCwrPNMZiLrbiuupL&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0 - -
[2020-12-31T04:15:46.1360968+00:00][DBUG][17][IdentityServer4.Startup] Login Url: "/Account/Login"
[2020-12-31T04:15:46.1393593+00:00][DBUG][17][IdentityServer4.Startup] Login Return Url Parameter: "ReturnUrl"
[2020-12-31T04:15:46.1419868+00:00][DBUG][17][IdentityServer4.Startup] Logout Url: "/Account/Logout"
[2020-12-31T04:15:46.1427531+00:00][DBUG][17][IdentityServer4.Startup] ConsentUrl Url: "/consent"
[2020-12-31T04:15:46.1434626+00:00][DBUG][17][IdentityServer4.Startup] Consent Return Url Parameter: "returnUrl"
[2020-12-31T04:15:46.1441662+00:00][DBUG][17][IdentityServer4.Startup] Error Url: "/home/error"
[2020-12-31T04:15:46.1448861+00:00][DBUG][17][IdentityServer4.Startup] Error Id Parameter: "errorId"
[2020-12-31T04:15:47.0015665+00:00][DBUG][14][IdentityServer4.Hosting.EndpointRouter] Request path "/connect/authorize/callback" matched to endpoint type "Authorize"
[2020-12-31T04:15:47.0443941+00:00][DBUG][14][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Authorize", successfully created handler: "IdentityServer4.Endpoints.AuthorizeCallbackEndpoint"
[2020-12-31T04:15:47.0455105+00:00][INFO][14][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeCallbackEndpoint" for "/connect/authorize/callback"
[2020-12-31T04:15:47.0525661+00:00][DBUG][14][IdentityServer4.Endpoints.AuthorizeCallbackEndpoint] Start authorize callback request
[2020-12-31T04:15:47.0967030+00:00][DBUG][14][IdentityServer4.Endpoints.AuthorizeCallbackEndpoint] User in authorize request: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b"
[2020-12-31T04:15:47.1010023+00:00][DBUG][14][IdentityServer4.Validation.AuthorizeRequestValidator] Start authorize request protocol validation
[2020-12-31T04:15:48.2389673+00:00][DBUG][12][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T04:15:48.2536510+00:00][DBUG][12][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T04:15:48.2721152+00:00][DBUG][12][IdentityServer4.Validation.AuthorizeRequestValidator] Checking for PKCE parameters
[2020-12-31T04:15:48.3794686+00:00][WARN][12][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T04:15:48.4559371+00:00][DBUG][13][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T04:15:48.5136686+00:00][WARN][13][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T04:15:48.5588309+00:00][DBUG][12][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] API resources in database
[2020-12-31T04:15:48.5722422+00:00][WARN][12][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T04:15:48.6649899+00:00][DBUG][5][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] scopes in database
[2020-12-31T04:15:48.6862978+00:00][DBUG][5][IdentityServer4.Validation.AuthorizeRequestValidator] Calling into custom validator: "IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator"
[2020-12-31T04:15:48.7054442+00:00][DBUG][5][IdentityServer4.Endpoints.AuthorizeCallbackEndpoint] ValidatedAuthorizeRequest
AuthorizeRequestValidationLog { ClientId: "urn:em:client:mvc", ClientName: "Event Manager Identity Admin UI", RedirectUri: "https://auth.em.host/admin/signin-oidc", AllowedRedirectUris: ["https://auth.em.host/admin/signin-oidc"], SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", ResponseType: "code", ResponseMode: "form_post", GrantType: "authorization_code", RequestedScopes: "openid profile email roles", State: "CfDJ8HbmgoufA85PoVB4uWHKwLc051tTyVHzeca-H8ecAYpxfXSGqWjeviJ_VvkNZQvUbWfSv5qL37oC12EnWoQmCybTIQ92KpkilqTqDZK6Ar2hYXgTjPkV7ndOBLwGpLHbALD5UuBCJ1VTytAleMBQcLcGzV5qCwrPNMZiLrbiuupL", UiLocales: null, Nonce: "637449822704853100.NmQ1OWUwOTItMTM3Yy00NmNiLWIwZTgtNjJiMjlhMjc2NzkzNDczZTEwOTEtOGM5Ni00OTMxLWE0NmEtN2Q1YTc4YzJmZGI5", AuthenticationContextReferenceClasses: null, DisplayMode: null, PromptMode: "", MaxAge: null, LoginHint: null, SessionId: "58CCABBB3F870AA190584D9589B0D705", Raw: [("client_id": "urn:em:client:mvc"), ("redirect_uri": "https://auth.em.host/admin/signin-oidc"), ("response_type": "code"), ("scope": "openid profile email roles"), ("code_challenge": "nUXNrthSTAQpm6QkN9BjTy2YJJ0kTz7ztNKy8rhbqYs"), ("code_challenge_method": "S256"), ("response_mode": "form_post"), ("nonce": "637449822704853100.NmQ1OWUwOTItMTM3Yy00NmNiLWIwZTgtNjJiMjlhMjc2NzkzNDczZTEwOTEtOGM5Ni00OTMxLWE0NmEtN2Q1YTc4YzJmZGI5"), ("state": "CfDJ8HbmgoufA85PoVB4uWHKwLc051tTyVHzeca-H8ecAYpxfXSGqWjeviJ_VvkNZQvUbWfSv5qL37oC12EnWoQmCybTIQ92KpkilqTqDZK6Ar2hYXgTjPkV7ndOBLwGpLHbALD5UuBCJ1VTytAleMBQcLcGzV5qCwrPNMZiLrbiuupL"), ("x-client-SKU": "ID_NETSTANDARD2_0"), ("x-client-ver": "6.8.0.0")] }
[2020-12-31T04:15:48.7320421+00:00][DBUG][5][IdentityServer4.Services.DefaultConsentService] Client is configured to not require consent, no consent is required
[2020-12-31T04:15:48.7367445+00:00][DBUG][5][IdentityServer4.ResponseHandling.AuthorizeResponseGenerator] Creating Authorization Code Flow response.
[2020-12-31T04:15:48.8347424+00:00][DBUG][12][IdentityServer4.EntityFramework.Stores.PersistedGrantStore] "nn4lq2UOA0sAGGeoPncAa0pDV9/7MuZZIO1tD4lz/Nw=" not found in database
[2020-12-31T04:15:49.0429147+00:00][INFO][5][IdentityServer4.Events.DefaultEventService] TokenIssuedSuccessEvent { ClientId: "urn:em:client:mvc", ClientName: "Event Manager Identity Admin UI", RedirectUri: "https://auth.em.host/admin/signin-oidc", Endpoint: "Authorize", SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", Scopes: "openid profile email roles", GrantType: "authorization_code", Tokens: [Token { TokenType: "code", TokenValue: "****E080" }], Category: "Token", Name: "Token Issued Success", EventType: Success, Id: 2000, Message: null, ActivityId: "0HM5D8AVINLRV:00000002", TimeStamp: 12/31/2020 04:15:49, ProcessId: 2149, LocalIpAddress: "::ffff:172.19.0.7:50003", RemoteIpAddress: "172.19.0.1" }
[2020-12-31T04:15:49.0527292+00:00][DBUG][5][IdentityServer4.Endpoints.AuthorizeCallbackEndpoint] Authorize endpoint response
AuthorizeResponseLog { SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", ClientId: "urn:em:client:mvc", RedirectUri: "https://auth.em.host/admin/signin-oidc", State: "CfDJ8HbmgoufA85PoVB4uWHKwLc051tTyVHzeca-H8ecAYpxfXSGqWjeviJ_VvkNZQvUbWfSv5qL37oC12EnWoQmCybTIQ92KpkilqTqDZK6Ar2hYXgTjPkV7ndOBLwGpLHbALD5UuBCJ1VTytAleMBQcLcGzV5qCwrPNMZiLrbiuupL", Scope: "openid profile email roles", Error: null, ErrorDescription: null }
[2020-12-31T04:15:49.1150340+00:00][INFO][5][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/connect/authorize/callback?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=nUXNrthSTAQpm6QkN9BjTy2YJJ0kTz7ztNKy8rhbqYs&code_challenge_method=S256&response_mode=form_post&nonce=637449822704853100.NmQ1OWUwOTItMTM3Yy00NmNiLWIwZTgtNjJiMjlhMjc2NzkzNDczZTEwOTEtOGM5Ni00OTMxLWE0NmEtN2Q1YTc4YzJmZGI5&state=CfDJ8HbmgoufA85PoVB4uWHKwLc051tTyVHzeca-H8ecAYpxfXSGqWjeviJ_VvkNZQvUbWfSv5qL37oC12EnWoQmCybTIQ92KpkilqTqDZK6Ar2hYXgTjPkV7ndOBLwGpLHbALD5UuBCJ1VTytAleMBQcLcGzV5qCwrPNMZiLrbiuupL&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0" responded 200 in 3018.3595 ms
[2020-12-31T04:15:49.1306931+00:00][INFO][5][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/connect/authorize/callback?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=nUXNrthSTAQpm6QkN9BjTy2YJJ0kTz7ztNKy8rhbqYs&code_challenge_method=S256&response_mode=form_post&nonce=637449822704853100.NmQ1OWUwOTItMTM3Yy00NmNiLWIwZTgtNjJiMjlhMjc2NzkzNDczZTEwOTEtOGM5Ni00OTMxLWE0NmEtN2Q1YTc4YzJmZGI5&state=CfDJ8HbmgoufA85PoVB4uWHKwLc051tTyVHzeca-H8ecAYpxfXSGqWjeviJ_VvkNZQvUbWfSv5qL37oC12EnWoQmCybTIQ92KpkilqTqDZK6Ar2hYXgTjPkV7ndOBLwGpLHbALD5UuBCJ1VTytAleMBQcLcGzV5qCwrPNMZiLrbiuupL&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0 - - - 200 - text/html;+charset=UTF-8 3054.3848ms
[2020-12-31T04:15:51.8752580+00:00][INFO][15][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fauth.em.host%252Fadmin%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3DnUXNrthSTAQpm6QkN9BjTy2YJJ0kTz7ztNKy8rhbqYs%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D637449822704853100.NmQ1OWUwOTItMTM3Yy00NmNiLWIwZTgtNjJiMjlhMjc2NzkzNDczZTEwOTEtOGM5Ni00OTMxLWE0NmEtN2Q1YTc4YzJmZGI5%26state%3DCfDJ8HbmgoufA85PoVB4uWHKwLc051tTyVHzeca-H8ecAYpxfXSGqWjeviJ_VvkNZQvUbWfSv5qL37oC12EnWoQmCybTIQ92KpkilqTqDZK6Ar2hYXgTjPkV7ndOBLwGpLHbALD5UuBCJ1VTytAleMBQcLcGzV5qCwrPNMZiLrbiuupL%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0 - -
[2020-12-31T04:15:51.9695465+00:00][INFO][15][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T04:15:52.0160830+00:00][INFO][15][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with "{action = \"Login\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String)" on controller "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>" ("EventManager.Identity.STS.Identity").
[2020-12-31T04:15:52.0548127+00:00][DBUG][15][IdentityServer4.Validation.AuthorizeRequestValidator] Start authorize request protocol validation
[2020-12-31T04:15:52.2030257+00:00][DBUG][5][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T04:15:52.2043005+00:00][DBUG][5][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T04:15:52.2061224+00:00][DBUG][5][IdentityServer4.Validation.AuthorizeRequestValidator] Checking for PKCE parameters
[2020-12-31T04:15:52.2460517+00:00][DBUG][17][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T04:15:52.2603684+00:00][DBUG][17][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] API resources in database
[2020-12-31T04:15:52.2955496+00:00][DBUG][4][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] scopes in database
[2020-12-31T04:15:52.2966248+00:00][DBUG][4][IdentityServer4.Validation.AuthorizeRequestValidator] Calling into custom validator: "IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator"
[2020-12-31T04:15:52.3863428+00:00][DBUG][15][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T04:15:52.3868917+00:00][DBUG][15][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T04:15:52.4307007+00:00][INFO][15][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executing ViewResult, running view "Login".
[2020-12-31T04:15:53.1875913+00:00][INFO][15][Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] Authorization was successful.
[2020-12-31T04:15:53.5772612+00:00][INFO][15][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executed ViewResult - view "Login" executed in 1150.0325ms.
[2020-12-31T04:15:53.5810844+00:00][INFO][15][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)" in 1563.5014ms
[2020-12-31T04:15:53.5831315+00:00][INFO][15][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T04:15:53.5918194+00:00][INFO][15][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fauth.em.host%252Fadmin%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3DnUXNrthSTAQpm6QkN9BjTy2YJJ0kTz7ztNKy8rhbqYs%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D637449822704853100.NmQ1OWUwOTItMTM3Yy00NmNiLWIwZTgtNjJiMjlhMjc2NzkzNDczZTEwOTEtOGM5Ni00OTMxLWE0NmEtN2Q1YTc4YzJmZGI5%26state%3DCfDJ8HbmgoufA85PoVB4uWHKwLc051tTyVHzeca-H8ecAYpxfXSGqWjeviJ_VvkNZQvUbWfSv5qL37oC12EnWoQmCybTIQ92KpkilqTqDZK6Ar2hYXgTjPkV7ndOBLwGpLHbALD5UuBCJ1VTytAleMBQcLcGzV5qCwrPNMZiLrbiuupL%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0" responded 200 in 1715.5493 ms
[2020-12-31T04:15:53.5998077+00:00][INFO][15][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fauth.em.host%252Fadmin%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3DnUXNrthSTAQpm6QkN9BjTy2YJJ0kTz7ztNKy8rhbqYs%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D637449822704853100.NmQ1OWUwOTItMTM3Yy00NmNiLWIwZTgtNjJiMjlhMjc2NzkzNDczZTEwOTEtOGM5Ni00OTMxLWE0NmEtN2Q1YTc4YzJmZGI5%26state%3DCfDJ8HbmgoufA85PoVB4uWHKwLc051tTyVHzeca-H8ecAYpxfXSGqWjeviJ_VvkNZQvUbWfSv5qL37oC12EnWoQmCybTIQ92KpkilqTqDZK6Ar2hYXgTjPkV7ndOBLwGpLHbALD5UuBCJ1VTytAleMBQcLcGzV5qCwrPNMZiLrbiuupL%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0 - - - 200 - text/html;+charset=utf-8 1724.3662ms
[2020-12-31T04:16:41.0627627+00:00][INFO][15][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/account/login - -
[2020-12-31T04:16:41.0863995+00:00][INFO][15][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T04:16:41.0884226+00:00][INFO][15][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with "{action = \"Login\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String)" on controller "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>" ("EventManager.Identity.STS.Identity").
[2020-12-31T04:16:41.0986190+00:00][INFO][15][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executing ViewResult, running view "Login".
[2020-12-31T04:16:41.1193602+00:00][INFO][15][Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] Authorization was successful.
[2020-12-31T04:16:41.1312945+00:00][INFO][15][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executed ViewResult - view "Login" executed in 33.1386ms.
[2020-12-31T04:16:41.1319890+00:00][INFO][15][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)" in 42.232ms
[2020-12-31T04:16:41.1326436+00:00][INFO][15][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T04:16:41.1415866+00:00][INFO][15][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/account/login" responded 200 in 77.2364 ms
[2020-12-31T04:16:41.1428501+00:00][INFO][15][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/account/login - - - 200 - text/html;+charset=utf-8 80.0700ms
[2020-12-31T04:16:46.7956742+00:00][INFO][21][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 POST https://auth.em.host/account/login application/x-www-form-urlencoded 304
[2020-12-31T04:16:46.8073869+00:00][DBUG][21][IdentityServer4.Hosting.CorsPolicyProvider] CORS request made for path: "/account/login" from origin: "null" but was ignored because path was not for an allowed IdentityServer CORS endpoint
[2020-12-31T04:16:46.8100415+00:00][INFO][21][Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware] No CORS policy found for the specified request.
[2020-12-31T04:16:46.8184956+00:00][INFO][21][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T04:16:46.8351419+00:00][INFO][21][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with "{action = \"Login\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EventManager.Identity.STS.Identity.ViewModels.Account.LoginInputModel, System.String)" on controller "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>" ("EventManager.Identity.STS.Identity").
[2020-12-31T04:16:47.1297202+00:00][DBUG][26][IdentityServer4.Hosting.IdentityServerAuthenticationService] Augmenting SignInContext
[2020-12-31T04:16:47.1325983+00:00][DBUG][26][IdentityServer4.Hosting.IdentityServerAuthenticationService] Adding idp claim with value: "local"
[2020-12-31T04:16:47.1427721+00:00][DBUG][26][IdentityServer4.Hosting.IdentityServerAuthenticationService] Adding auth_time claim with value: "1609388207"
[2020-12-31T04:16:47.1612198+00:00][INFO][26][Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler] AuthenticationScheme: "Identity.Application" signed in.
[2020-12-31T04:16:47.1710146+00:00][INFO][26][IdentityServer4.Events.DefaultEventService] UserLoginSuccessEvent { Username: "admin", Provider: null, ProviderUserId: null, SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", DisplayName: "admin", Endpoint: "UI", ClientId: null, Category: "Authentication", Name: "User Login Success", EventType: Success, Id: 1000, Message: null, ActivityId: "0HM5D8AVINLS2:00000002", TimeStamp: 12/31/2020 04:16:47, ProcessId: 2149, LocalIpAddress: "::ffff:172.19.0.7:50003", RemoteIpAddress: "172.19.0.1" }
[2020-12-31T04:16:47.1755760+00:00][INFO][26][Microsoft.AspNetCore.Mvc.Infrastructure.RedirectResultExecutor] Executing RedirectResult, redirecting to "/".
[2020-12-31T04:16:47.1776596+00:00][INFO][26][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)" in 339.4957ms
[2020-12-31T04:16:47.1789233+00:00][INFO][26][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T04:16:47.1798287+00:00][INFO][26][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "POST" "/account/login" responded 302 in 382.1810 ms
[2020-12-31T04:16:47.1815438+00:00][INFO][26][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 POST https://auth.em.host/account/login application/x-www-form-urlencoded 304 - 302 0 - 385.8242ms
[2020-12-31T04:16:47.2218966+00:00][INFO][20][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/ - -
[2020-12-31T04:16:47.2267077+00:00][INFO][20][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint '"EventManager.Identity.STS.Identity.Controllers.HomeController.Index (EventManager.Identity.STS.Identity)"'
[2020-12-31T04:16:47.2343782+00:00][INFO][20][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with "{action = \"Index\", controller = \"Home\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Index()" on controller "EventManager.Identity.STS.Identity.Controllers.HomeController" ("EventManager.Identity.STS.Identity").
[2020-12-31T04:16:47.2401794+00:00][INFO][20][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executing ViewResult, running view "Index".
[2020-12-31T04:16:47.2783389+00:00][INFO][20][Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] Authorization was successful.
[2020-12-31T04:16:47.2943602+00:00][INFO][20][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executed ViewResult - view "Index" executed in 54.9354ms.
[2020-12-31T04:16:47.2951414+00:00][INFO][20][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action "EventManager.Identity.STS.Identity.Controllers.HomeController.Index (EventManager.Identity.STS.Identity)" in 60.0215ms
[2020-12-31T04:16:47.2969187+00:00][INFO][20][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint '"EventManager.Identity.STS.Identity.Controllers.HomeController.Index (EventManager.Identity.STS.Identity)"'
[2020-12-31T04:16:47.2982763+00:00][INFO][20][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/" responded 200 in 75.7006 ms
[2020-12-31T04:16:47.2996542+00:00][INFO][20][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/ - - - 200 - text/html;+charset=utf-8 77.6070ms
[2020-12-31T04:16:47.5110909+00:00][INFO][23][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/images/skoruba-icon.png - -
[2020-12-31T04:16:47.6052796+00:00][INFO][20][Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware] Sending file. Request path: '"/images/skoruba-icon.png"'. Physical path: '"/app/wwwroot/images/skoruba-icon.png"'
[2020-12-31T04:16:47.6063082+00:00][INFO][20][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/images/skoruba-icon.png" responded 200 in 94.5158 ms
[2020-12-31T04:16:47.6073378+00:00][INFO][20][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/images/skoruba-icon.png - - - 200 18074 image/png 96.2059ms
[2020-12-31T04:16:57.5302645+00:00][INFO][22][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/Grants - -
[2020-12-31T04:16:57.5366126+00:00][INFO][22][Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] Authorization was successful.
[2020-12-31T04:16:57.5433222+00:00][INFO][22][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint '"EventManager.Identity.STS.Identity.Controllers.GrantsController.Index (EventManager.Identity.STS.Identity)"'
[2020-12-31T04:16:57.5494282+00:00][INFO][22][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with "{action = \"Index\", controller = \"Grants\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index()" on controller "EventManager.Identity.STS.Identity.Controllers.GrantsController" ("EventManager.Identity.STS.Identity").
[2020-12-31T04:16:57.7223447+00:00][DBUG][5][IdentityServer4.EntityFramework.Stores.PersistedGrantStore] 3 persisted grants found for PersistedGrantFilter { SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", SessionId: null, ClientId: null, Type: null }
[2020-12-31T04:16:57.8971839+00:00][DBUG][5][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T04:16:57.8977997+00:00][DBUG][5][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T04:16:57.9682180+00:00][DBUG][22][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T04:16:58.0259260+00:00][DBUG][21][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] API resources in database
[2020-12-31T04:16:58.0369170+00:00][DBUG][21][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] scopes in database
[2020-12-31T04:16:58.0490051+00:00][INFO][21][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executing ViewResult, running view "Index".
[2020-12-31T04:16:58.1161956+00:00][INFO][21][Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] Authorization was successful.
[2020-12-31T04:16:58.1233817+00:00][INFO][21][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executed ViewResult - view "Index" executed in 75.8519ms.
[2020-12-31T04:16:58.1277114+00:00][INFO][21][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action "EventManager.Identity.STS.Identity.Controllers.GrantsController.Index (EventManager.Identity.STS.Identity)" in 576.9508ms
[2020-12-31T04:16:58.1301028+00:00][INFO][21][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint '"EventManager.Identity.STS.Identity.Controllers.GrantsController.Index (EventManager.Identity.STS.Identity)"'
[2020-12-31T04:16:58.1351085+00:00][INFO][21][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/Grants" responded 200 in 602.9048 ms
[2020-12-31T04:16:58.1364228+00:00][INFO][21][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/Grants - - - 200 - text/html;+charset=utf-8 606.1184ms
[2020-12-31T04:17:07.5540576+00:00][INFO][22][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/Grants - -
[2020-12-31T04:17:07.5566544+00:00][INFO][22][Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] Authorization was successful.
[2020-12-31T04:17:07.5594512+00:00][INFO][22][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint '"EventManager.Identity.STS.Identity.Controllers.GrantsController.Index (EventManager.Identity.STS.Identity)"'
[2020-12-31T04:17:07.5667894+00:00][INFO][22][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with "{action = \"Index\", controller = \"Grants\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index()" on controller "EventManager.Identity.STS.Identity.Controllers.GrantsController" ("EventManager.Identity.STS.Identity").
[2020-12-31T04:17:07.6581736+00:00][DBUG][15][IdentityServer4.EntityFramework.Stores.PersistedGrantStore] 3 persisted grants found for PersistedGrantFilter { SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", SessionId: null, ClientId: null, Type: null }
[2020-12-31T04:17:07.8525698+00:00][DBUG][26][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T04:17:07.8532134+00:00][DBUG][26][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T04:17:07.8704265+00:00][DBUG][27][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T04:17:07.8995828+00:00][DBUG][25][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] API resources in database
[2020-12-31T04:17:07.9339001+00:00][DBUG][25][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] scopes in database
[2020-12-31T04:17:07.9347619+00:00][INFO][25][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executing ViewResult, running view "Index".
[2020-12-31T04:17:07.9397645+00:00][INFO][25][Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] Authorization was successful.
[2020-12-31T04:17:07.9521992+00:00][INFO][25][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executed ViewResult - view "Index" executed in 17.3123ms.
[2020-12-31T04:17:07.9533990+00:00][INFO][25][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action "EventManager.Identity.STS.Identity.Controllers.GrantsController.Index (EventManager.Identity.STS.Identity)" in 384.6469ms
[2020-12-31T04:17:07.9550081+00:00][INFO][25][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint '"EventManager.Identity.STS.Identity.Controllers.GrantsController.Index (EventManager.Identity.STS.Identity)"'
[2020-12-31T04:17:07.9660826+00:00][INFO][25][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/Grants" responded 200 in 411.3579 ms
[2020-12-31T04:17:07.9703474+00:00][INFO][25][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/Grants - - - 200 - text/html;+charset=utf-8 416.1394ms
[2020-12-31T04:17:12.3413774+00:00][INFO][27][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/Manage/ChangePassword - -
[2020-12-31T04:17:12.3473488+00:00][INFO][27][Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] Authorization was successful.
[2020-12-31T04:17:12.3484265+00:00][INFO][27][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint '"EventManager.Identity.STS.Identity.Controllers.ManageController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.ChangePassword (EventManager.Identity.STS.Identity)"'
[2020-12-31T04:17:12.3604209+00:00][INFO][27][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with "{action = \"ChangePassword\", controller = \"Manage\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePassword()" on controller "EventManager.Identity.STS.Identity.Controllers.ManageController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>" ("EventManager.Identity.STS.Identity").
[2020-12-31T04:17:12.4310629+00:00][INFO][26][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executing ViewResult, running view "ChangePassword".
[2020-12-31T04:17:12.4812069+00:00][INFO][26][Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] Authorization was successful.
[2020-12-31T04:17:12.4885599+00:00][INFO][26][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executed ViewResult - view "ChangePassword" executed in 60.2237ms.
[2020-12-31T04:17:12.4901993+00:00][INFO][26][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action "EventManager.Identity.STS.Identity.Controllers.ManageController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.ChangePassword (EventManager.Identity.STS.Identity)" in 128.6518ms
[2020-12-31T04:17:12.4911433+00:00][INFO][26][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint '"EventManager.Identity.STS.Identity.Controllers.ManageController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.ChangePassword (EventManager.Identity.STS.Identity)"'
[2020-12-31T04:17:12.4917627+00:00][INFO][26][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/Manage/ChangePassword" responded 200 in 147.3646 ms
[2020-12-31T04:17:12.4925829+00:00][INFO][26][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/Manage/ChangePassword - - - 200 - text/html;+charset=utf-8 152.0958ms
[2020-12-31T04:17:16.0479983+00:00][INFO][15][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/Manage/PersonalData - -
[2020-12-31T04:17:16.0597489+00:00][INFO][15][Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] Authorization was successful.
[2020-12-31T04:17:16.0602491+00:00][INFO][15][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint '"EventManager.Identity.STS.Identity.Controllers.ManageController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.PersonalData (EventManager.Identity.STS.Identity)"'
[2020-12-31T04:17:16.0685712+00:00][INFO][15][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with "{action = \"PersonalData\", controller = \"Manage\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] PersonalData()" on controller "EventManager.Identity.STS.Identity.Controllers.ManageController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>" ("EventManager.Identity.STS.Identity").
[2020-12-31T04:17:16.1010894+00:00][INFO][24][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executing ViewResult, running view "PersonalData".
[2020-12-31T04:17:16.1299660+00:00][INFO][24][Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] Authorization was successful.
[2020-12-31T04:17:16.1420464+00:00][INFO][24][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executed ViewResult - view "PersonalData" executed in 45.0607ms.
[2020-12-31T04:17:16.1432421+00:00][INFO][24][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action "EventManager.Identity.STS.Identity.Controllers.ManageController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.PersonalData (EventManager.Identity.STS.Identity)" in 73.6717ms
[2020-12-31T04:17:16.1442416+00:00][INFO][24][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint '"EventManager.Identity.STS.Identity.Controllers.ManageController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.PersonalData (EventManager.Identity.STS.Identity)"'
[2020-12-31T04:17:16.1450113+00:00][INFO][24][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/Manage/PersonalData" responded 200 in 96.5056 ms
[2020-12-31T04:17:16.1479494+00:00][INFO][24][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/Manage/PersonalData - - - 200 - text/html;+charset=utf-8 99.9147ms
[2020-12-31T04:17:19.2965877+00:00][INFO][15][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/Manage - -
[2020-12-31T04:17:19.2992639+00:00][INFO][15][Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] Authorization was successful.
[2020-12-31T04:17:19.2999600+00:00][INFO][15][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint '"EventManager.Identity.STS.Identity.Controllers.ManageController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Index (EventManager.Identity.STS.Identity)"'
[2020-12-31T04:17:19.3122435+00:00][INFO][15][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with "{action = \"Index\", controller = \"Manage\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index()" on controller "EventManager.Identity.STS.Identity.Controllers.ManageController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>" ("EventManager.Identity.STS.Identity").
[2020-12-31T04:17:19.3793759+00:00][INFO][15][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executing ViewResult, running view "Index".
[2020-12-31T04:17:20.4409633+00:00][INFO][15][Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] Authorization was successful.
[2020-12-31T04:17:20.4521510+00:00][INFO][15][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executed ViewResult - view "Index" executed in 1073.5088ms.
[2020-12-31T04:17:20.4528525+00:00][INFO][15][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action "EventManager.Identity.STS.Identity.Controllers.ManageController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Index (EventManager.Identity.STS.Identity)" in 1139.8879ms
[2020-12-31T04:17:20.4535931+00:00][INFO][15][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint '"EventManager.Identity.STS.Identity.Controllers.ManageController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Index (EventManager.Identity.STS.Identity)"'
[2020-12-31T04:17:20.4542926+00:00][INFO][15][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/Manage" responded 200 in 1157.1586 ms
[2020-12-31T04:17:20.4552429+00:00][INFO][15][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/Manage - - - 200 - text/html;+charset=utf-8 1158.6204ms
[2020-12-31T04:17:23.2205786+00:00][INFO][5][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/.well-known/openid-configuration - -
[2020-12-31T04:17:23.2233882+00:00][DBUG][5][IdentityServer4.Hosting.EndpointRouter] Request path "/.well-known/openid-configuration" matched to endpoint type "Discovery"
[2020-12-31T04:17:23.2317777+00:00][DBUG][5][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Discovery", successfully created handler: "IdentityServer4.Endpoints.DiscoveryEndpoint"
[2020-12-31T04:17:23.2345118+00:00][INFO][5][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
[2020-12-31T04:17:23.2392178+00:00][DBUG][5][IdentityServer4.Endpoints.DiscoveryEndpoint] Start discovery request
[2020-12-31T04:17:23.2595297+00:00][WARN][5][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T04:17:23.3648843+00:00][WARN][25][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T04:17:23.4168572+00:00][WARN][25][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T04:17:23.5268635+00:00][DBUG][5][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email", "address", "urn:em:api:scope"] as all scopes, and ["urn:em:api"] as API resources
[2020-12-31T04:17:23.5706237+00:00][INFO][5][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/.well-known/openid-configuration" responded 200 in 349.2280 ms
[2020-12-31T04:17:23.5714589+00:00][INFO][5][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 350.8562ms
[2020-12-31T04:17:23.7713617+00:00][INFO][25][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/.well-known/openid-configuration/jwks - -
[2020-12-31T04:17:23.7736655+00:00][DBUG][25][IdentityServer4.Hosting.EndpointRouter] Request path "/.well-known/openid-configuration/jwks" matched to endpoint type "Discovery"
[2020-12-31T04:17:23.7782728+00:00][DBUG][25][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Discovery", successfully created handler: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint"
[2020-12-31T04:17:23.7791096+00:00][INFO][25][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
[2020-12-31T04:17:23.7828763+00:00][DBUG][25][IdentityServer4.Endpoints.DiscoveryKeyEndpoint] Start key discovery request
[2020-12-31T04:17:23.8174794+00:00][INFO][25][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/.well-known/openid-configuration/jwks" responded 200 in 45.5835 ms
[2020-12-31T04:17:23.8182933+00:00][INFO][25][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 46.8749ms
[2020-12-31T04:17:23.9811287+00:00][INFO][25][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/connect/authorize?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=9vOR3-dDaSBJH8wY5ZLPo6hflPOj4iPx5ZAJXIbf_1Y&code_challenge_method=S256&response_mode=form_post&nonce=637449850438629666.ZWFiNzMzMzEtNjQ2NC00NWEyLTlkMDQtZTE1ZDFjNDk0NGU4MWZlNjY5YjEtNDliZS00OTgwLWE3MjEtMjQzNjQ5OWZkMGNl&state=CfDJ8HbmgoufA85PoVB4uWHKwLfRA8F2E1weYI9i0ytzuWfBpIdw-Tf3-HR2wqN_pRYM4Oqg3LOsnvmrzQHpJ8eJl8IZBYR-7cxizB5kvurPxUTE97HOQrliulxnKPosxPU-LAsizIyIbCqrukw6lgQXDuJCUwSoOzb16XFY0WPcYEjF&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0 - -
[2020-12-31T04:17:23.9863741+00:00][DBUG][25][IdentityServer4.Hosting.EndpointRouter] Request path "/connect/authorize" matched to endpoint type "Authorize"
[2020-12-31T04:17:23.9885439+00:00][DBUG][25][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Authorize", successfully created handler: "IdentityServer4.Endpoints.AuthorizeEndpoint"
[2020-12-31T04:17:23.9938635+00:00][INFO][25][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize"
[2020-12-31T04:17:23.9992909+00:00][DBUG][25][IdentityServer4.Endpoints.AuthorizeEndpoint] Start authorize request
[2020-12-31T04:17:23.9999876+00:00][DBUG][25][IdentityServer4.Endpoints.AuthorizeEndpoint] User in authorize request: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b"
[2020-12-31T04:17:24.0017369+00:00][DBUG][25][IdentityServer4.Validation.AuthorizeRequestValidator] Start authorize request protocol validation
[2020-12-31T04:17:24.1635952+00:00][DBUG][24][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T04:17:24.1648577+00:00][DBUG][24][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T04:17:24.1669374+00:00][DBUG][24][IdentityServer4.Validation.AuthorizeRequestValidator] Checking for PKCE parameters
[2020-12-31T04:17:24.1884655+00:00][DBUG][24][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T04:17:24.2030573+00:00][DBUG][24][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] API resources in database
[2020-12-31T04:17:24.2357943+00:00][DBUG][25][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] scopes in database
[2020-12-31T04:17:24.2369825+00:00][DBUG][25][IdentityServer4.Validation.AuthorizeRequestValidator] Calling into custom validator: "IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator"
[2020-12-31T04:17:24.2396912+00:00][DBUG][25][IdentityServer4.Endpoints.AuthorizeEndpoint] ValidatedAuthorizeRequest
AuthorizeRequestValidationLog { ClientId: "urn:em:client:mvc", ClientName: "Event Manager Identity Admin UI", RedirectUri: "https://auth.em.host/admin/signin-oidc", AllowedRedirectUris: ["https://auth.em.host/admin/signin-oidc"], SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", ResponseType: "code", ResponseMode: "form_post", GrantType: "authorization_code", RequestedScopes: "openid profile email roles", State: "CfDJ8HbmgoufA85PoVB4uWHKwLfRA8F2E1weYI9i0ytzuWfBpIdw-Tf3-HR2wqN_pRYM4Oqg3LOsnvmrzQHpJ8eJl8IZBYR-7cxizB5kvurPxUTE97HOQrliulxnKPosxPU-LAsizIyIbCqrukw6lgQXDuJCUwSoOzb16XFY0WPcYEjF", UiLocales: null, Nonce: "637449850438629666.ZWFiNzMzMzEtNjQ2NC00NWEyLTlkMDQtZTE1ZDFjNDk0NGU4MWZlNjY5YjEtNDliZS00OTgwLWE3MjEtMjQzNjQ5OWZkMGNl", AuthenticationContextReferenceClasses: null, DisplayMode: null, PromptMode: "", MaxAge: null, LoginHint: null, SessionId: "EBE5C42E3D3FC38137186D3F03C6BC24", Raw: [("client_id": "urn:em:client:mvc"), ("redirect_uri": "https://auth.em.host/admin/signin-oidc"), ("response_type": "code"), ("scope": "openid profile email roles"), ("code_challenge": "9vOR3-dDaSBJH8wY5ZLPo6hflPOj4iPx5ZAJXIbf_1Y"), ("code_challenge_method": "S256"), ("response_mode": "form_post"), ("nonce": "637449850438629666.ZWFiNzMzMzEtNjQ2NC00NWEyLTlkMDQtZTE1ZDFjNDk0NGU4MWZlNjY5YjEtNDliZS00OTgwLWE3MjEtMjQzNjQ5OWZkMGNl"), ("state": "CfDJ8HbmgoufA85PoVB4uWHKwLfRA8F2E1weYI9i0ytzuWfBpIdw-Tf3-HR2wqN_pRYM4Oqg3LOsnvmrzQHpJ8eJl8IZBYR-7cxizB5kvurPxUTE97HOQrliulxnKPosxPU-LAsizIyIbCqrukw6lgQXDuJCUwSoOzb16XFY0WPcYEjF"), ("x-client-SKU": "ID_NETSTANDARD2_0"), ("x-client-ver": "6.8.0.0")] }
[2020-12-31T04:17:24.2668589+00:00][DBUG][5][IdentityServer4.Services.DefaultConsentService] Client is configured to not require consent, no consent is required
[2020-12-31T04:17:24.2682022+00:00][DBUG][5][IdentityServer4.ResponseHandling.AuthorizeResponseGenerator] Creating Authorization Code Flow response.
[2020-12-31T04:17:24.3213345+00:00][DBUG][24][IdentityServer4.EntityFramework.Stores.PersistedGrantStore] "ItzZc0NvO26Q55ByhxBAA0W+MhhzqXPcSKEBokq/LIo=" not found in database
[2020-12-31T04:17:24.3573440+00:00][INFO][22][IdentityServer4.Events.DefaultEventService] TokenIssuedSuccessEvent { ClientId: "urn:em:client:mvc", ClientName: "Event Manager Identity Admin UI", RedirectUri: "https://auth.em.host/admin/signin-oidc", Endpoint: "Authorize", SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", Scopes: "openid profile email roles", GrantType: "authorization_code", Tokens: [Token { TokenType: "code", TokenValue: "****2844" }], Category: "Token", Name: "Token Issued Success", EventType: Success, Id: 2000, Message: null, ActivityId: "0HM5D8AVINLSC:00000002", TimeStamp: 12/31/2020 04:17:24, ProcessId: 2149, LocalIpAddress: "::ffff:172.19.0.7:50003", RemoteIpAddress: "172.19.0.1" }
[2020-12-31T04:17:24.3619196+00:00][DBUG][22][IdentityServer4.Endpoints.AuthorizeEndpoint] Authorize endpoint response
AuthorizeResponseLog { SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", ClientId: "urn:em:client:mvc", RedirectUri: "https://auth.em.host/admin/signin-oidc", State: "CfDJ8HbmgoufA85PoVB4uWHKwLfRA8F2E1weYI9i0ytzuWfBpIdw-Tf3-HR2wqN_pRYM4Oqg3LOsnvmrzQHpJ8eJl8IZBYR-7cxizB5kvurPxUTE97HOQrliulxnKPosxPU-LAsizIyIbCqrukw6lgQXDuJCUwSoOzb16XFY0WPcYEjF", Scope: "openid profile email roles", Error: null, ErrorDescription: null }
[2020-12-31T04:17:24.3874803+00:00][DBUG][22][IdentityServer4.Hosting.IdentityServerAuthenticationService] Augmenting SignInContext
[2020-12-31T04:17:24.3894826+00:00][INFO][22][Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler] AuthenticationScheme: "Identity.Application" signed in.
[2020-12-31T04:17:24.3907701+00:00][INFO][22][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/connect/authorize?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=9vOR3-dDaSBJH8wY5ZLPo6hflPOj4iPx5ZAJXIbf_1Y&code_challenge_method=S256&response_mode=form_post&nonce=637449850438629666.ZWFiNzMzMzEtNjQ2NC00NWEyLTlkMDQtZTE1ZDFjNDk0NGU4MWZlNjY5YjEtNDl[2020-12-31T07:44:29.3842860+00:00][INFO][1][IdentityServer4.Startup] Starting IdentityServer4 version "4.1.1+cebd52f5bc61bdefc262fd20739d4d087c6f961f"
[2020-12-31T07:44:29.7951448+00:00][DBUG][1][IdentityServer4.Startup] Custom IssuerUri set to "https://auth.em.host"
[2020-12-31T07:44:29.8090438+00:00][INFO][1][IdentityServer4.Startup] Using the default authentication scheme "Identity.Application" for IdentityServer
[2020-12-31T07:44:29.8097335+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.Application" as default ASP.NET Core scheme for authentication
[2020-12-31T07:44:29.8104009+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.External" as default ASP.NET Core scheme for sign-in
[2020-12-31T07:44:29.8111029+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.External" as default ASP.NET Core scheme for sign-out
[2020-12-31T07:44:29.8168680+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.Application" as default ASP.NET Core scheme for challenge
[2020-12-31T07:44:29.8185423+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.Application" as default ASP.NET Core scheme for forbid
[2020-12-31T07:44:30.3665131+00:00][INFO][1][Microsoft.Hosting.Lifetime] Now listening on: "https://[::]:50003"
[2020-12-31T07:44:30.3681823+00:00][INFO][1][Microsoft.Hosting.Lifetime] Application started. Press Ctrl+C to shut down.
[2020-12-31T07:44:30.3690051+00:00][INFO][1][Microsoft.Hosting.Lifetime] Hosting environment: "Development"
[2020-12-31T07:44:30.3697141+00:00][INFO][1][Microsoft.Hosting.Lifetime] Content root path: "/app"
[2020-12-31T07:45:29.0733783+00:00][INFO][14][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/.well-known/openid-configuration - -
[2020-12-31T07:45:29.1331235+00:00][DBUG][14][IdentityServer4.Startup] Login Url: "/Account/Login"
[2020-12-31T07:45:29.1337259+00:00][DBUG][14][IdentityServer4.Startup] Login Return Url Parameter: "ReturnUrl"
[2020-12-31T07:45:29.1343287+00:00][DBUG][14][IdentityServer4.Startup] Logout Url: "/Account/Logout"
[2020-12-31T07:45:29.1350693+00:00][DBUG][14][IdentityServer4.Startup] ConsentUrl Url: "/consent"
[2020-12-31T07:45:29.1356760+00:00][DBUG][14][IdentityServer4.Startup] Consent Return Url Parameter: "returnUrl"
[2020-12-31T07:45:29.1414171+00:00][DBUG][14][IdentityServer4.Startup] Error Url: "/home/error"
[2020-12-31T07:45:29.1422107+00:00][DBUG][14][IdentityServer4.Startup] Error Id Parameter: "errorId"
[2020-12-31T07:45:29.1761604+00:00][DBUG][14][IdentityServer4.Hosting.EndpointRouter] Request path "/.well-known/openid-configuration" matched to endpoint type "Discovery"
[2020-12-31T07:45:29.2001588+00:00][DBUG][14][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Discovery", successfully created handler: "IdentityServer4.Endpoints.DiscoveryEndpoint"
[2020-12-31T07:45:29.2012223+00:00][INFO][14][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
[2020-12-31T07:45:29.2065366+00:00][DBUG][14][IdentityServer4.Endpoints.DiscoveryEndpoint] Start discovery request
[2020-12-31T07:45:29.9159125+00:00][WARN][14][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T07:45:30.2287818+00:00][WARN][13][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T07:45:30.2900759+00:00][WARN][14][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T07:45:30.7490011+00:00][DBUG][14][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email", "address", "urn:em:api:scope"] as all scopes, and ["urn:em:api"] as API resources
[2020-12-31T07:45:30.8462617+00:00][INFO][14][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/.well-known/openid-configuration" responded 200 in 1757.1617 ms
[2020-12-31T07:45:30.8560692+00:00][INFO][14][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 1785.1443ms
[2020-12-31T07:45:31.0763729+00:00][INFO][15][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/.well-known/openid-configuration/jwks - -
[2020-12-31T07:45:31.0806574+00:00][DBUG][15][IdentityServer4.Hosting.EndpointRouter] Request path "/.well-known/openid-configuration/jwks" matched to endpoint type "Discovery"
[2020-12-31T07:45:31.1083408+00:00][DBUG][15][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Discovery", successfully created handler: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint"
[2020-12-31T07:45:31.1090294+00:00][INFO][15][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
[2020-12-31T07:45:31.1140765+00:00][DBUG][15][IdentityServer4.Endpoints.DiscoveryKeyEndpoint] Start key discovery request
[2020-12-31T07:45:31.1795157+00:00][INFO][15][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/.well-known/openid-configuration/jwks" responded 200 in 101.0657 ms
[2020-12-31T07:45:31.1811834+00:00][INFO][15][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 104.8243ms
[2020-12-31T07:45:31.3541491+00:00][INFO][16][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/connect/authorize?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=cV10pgliUpSqa0Z6zABBIKEak4TYvlDiO2n0UwRJvMs&code_challenge_method=S256&response_mode=form_post&nonce=637449975312257849.MWNiYTk5MTItZmFlNS00ODkyLWI1ZjctY2E3MDM5OTdlOWJiYjQyZThiYjktOGVlMy00MTFkLTg3ZmMtMzk5ZDFjZTU0YTlj&state=CfDJ8HbmgoufA85PoVB4uWHKwLfOHuNo5IZ4Z28jN--sr2qHQE1lQz4ZoE1h5SBhC4k_i1oBxHyQ0srn53b_WB02wUSbYp5AU6IQdMONlNfSUfW51gePDhtzAnsuNnrfyeNnX_P-zB__zPXys4iQmiDGllKRoLx3MLZP62iIR6E2Pnzw&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0 - -
[2020-12-31T07:45:31.7788062+00:00][DBUG][16][IdentityServer4.Hosting.EndpointRouter] Request path "/connect/authorize" matched to endpoint type "Authorize"
[2020-12-31T07:45:31.8028748+00:00][DBUG][16][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Authorize", successfully created handler: "IdentityServer4.Endpoints.AuthorizeEndpoint"
[2020-12-31T07:45:31.8036072+00:00][INFO][16][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize"
[2020-12-31T07:45:31.8108764+00:00][DBUG][16][IdentityServer4.Endpoints.AuthorizeEndpoint] Start authorize request
[2020-12-31T07:45:31.8275903+00:00][DBUG][16][IdentityServer4.Endpoints.AuthorizeEndpoint] User in authorize request: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b"
[2020-12-31T07:45:31.8352894+00:00][DBUG][16][IdentityServer4.Validation.AuthorizeRequestValidator] Start authorize request protocol validation
[2020-12-31T07:45:32.3418498+00:00][DBUG][4][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T07:45:32.3547702+00:00][DBUG][4][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T07:45:32.3703236+00:00][DBUG][4][IdentityServer4.Validation.AuthorizeRequestValidator] Checking for PKCE parameters
[2020-12-31T07:45:32.4515280+00:00][WARN][4][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T07:45:32.4799300+00:00][DBUG][12][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T07:45:32.5080295+00:00][WARN][12][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T07:45:32.5428428+00:00][DBUG][12][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] API resources in database
[2020-12-31T07:45:32.5546379+00:00][WARN][12][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T07:45:32.5799485+00:00][DBUG][14][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] scopes in database
[2020-12-31T07:45:32.6003559+00:00][DBUG][14][IdentityServer4.Validation.AuthorizeRequestValidator] Calling into custom validator: "IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator"
[2020-12-31T07:45:32.6219357+00:00][DBUG][14][IdentityServer4.Endpoints.AuthorizeEndpoint] ValidatedAuthorizeRequest
AuthorizeRequestValidationLog { ClientId: "urn:em:client:mvc", ClientName: "Event Manager Identity Admin UI", RedirectUri: "https://auth.em.host/admin/signin-oidc", AllowedRedirectUris: ["https://auth.em.host/admin/signin-oidc"], SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", ResponseType: "code", ResponseMode: "form_post", GrantType: "authorization_code", RequestedScopes: "openid profile email roles", State: "CfDJ8HbmgoufA85PoVB4uWHKwLfOHuNo5IZ4Z28jN--sr2qHQE1lQz4ZoE1h5SBhC4k_i1oBxHyQ0srn53b_WB02wUSbYp5AU6IQdMONlNfSUfW51gePDhtzAnsuNnrfyeNnX_P-zB__[2020-12-31T07:50:18.2058777+00:00][INFO][1][IdentityServer4.Startup] Starting IdentityServer4 version "4.1.1+cebd52f5bc61bdefc262fd20739d4d087c6f961f"
[2020-12-31T07:50:18.6672508+00:00][DBUG][1][IdentityServer4.Startup] Custom IssuerUri set to "https://auth.em.host"
[2020-12-31T07:50:18.6816593+00:00][INFO][1][IdentityServer4.Startup] Using the default authentication scheme "Identity.Application" for IdentityServer
[2020-12-31T07:50:18.6829071+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.Application" as default ASP.NET Core scheme for authentication
[2020-12-31T07:50:18.6836043+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.External" as default ASP.NET Core scheme for sign-in
[2020-12-31T07:50:18.6842233+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.External" as default ASP.NET Core scheme for sign-out
[2020-12-31T07:50:18.6870433+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.Application" as default ASP.NET Core scheme for challenge
[2020-12-31T07:50:18.6887492+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.Application" as default ASP.NET Core scheme for forbid
[2020-12-31T07:50:19.2441429+00:00][INFO][1][Microsoft.Hosting.Lifetime] Now listening on: "https://[::]:50003"
[2020-12-31T07:50:19.2454000+00:00][INFO][1][Microsoft.Hosting.Lifetime] Application started. Press Ctrl+C to shut down.
[2020-12-31T07:50:19.2459793+00:00][INFO][1][Microsoft.Hosting.Lifetime] Hosting environment: "Development"
[2020-12-31T07:50:19.2465920+00:00][INFO][1][Microsoft.Hosting.Lifetime] Content root path: "/app"
[2020-12-31T08:22:45.9930063+00:00][INFO][19][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/.well-known/openid-configuration - -
[2020-12-31T08:22:46.0452342+00:00][DBUG][19][IdentityServer4.Startup] Login Url: "/Account/Login"
[2020-12-31T08:22:46.0466081+00:00][DBUG][19][IdentityServer4.Startup] Login Return Url Parameter: "ReturnUrl"
[2020-12-31T08:22:46.0528733+00:00][DBUG][19][IdentityServer4.Startup] Logout Url: "/Account/Logout"
[2020-12-31T08:22:46.0535146+00:00][DBUG][19][IdentityServer4.Startup] ConsentUrl Url: "/consent"
[2020-12-31T08:22:46.0541363+00:00][DBUG][19][IdentityServer4.Startup] Consent Return Url Parameter: "returnUrl"
[2020-12-31T08:22:46.0547891+00:00][DBUG][19][IdentityServer4.Startup] Error Url: "/home/error"
[2020-12-31T08:22:46.0552304+00:00][DBUG][19][IdentityServer4.Startup] Error Id Parameter: "errorId"
[2020-12-31T08:22:46.0992246+00:00][DBUG][19][IdentityServer4.Hosting.EndpointRouter] Request path "/.well-known/openid-configuration" matched to endpoint type "Discovery"
[2020-12-31T08:22:46.1492251+00:00][DBUG][19][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Discovery", successfully created handler: "IdentityServer4.Endpoints.DiscoveryEndpoint"
[2020-12-31T08:22:46.1505295+00:00][INFO][19][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
[2020-12-31T08:22:46.1540842+00:00][DBUG][19][IdentityServer4.Endpoints.DiscoveryEndpoint] Start discovery request
[2020-12-31T08:22:47.0439023+00:00][WARN][19][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T08:22:47.4149880+00:00][WARN][18][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T08:22:47.4601966+00:00][WARN][19][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T08:22:48.0342796+00:00][DBUG][20][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email", "address", "urn:em:api:scope"] as all scopes, and ["urn:em:api"] as API resources
[2020-12-31T08:22:48.1173782+00:00][INFO][20][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/.well-known/openid-configuration" responded 200 in 2107.7475 ms
[2020-12-31T08:22:48.1266235+00:00][INFO][20][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 2138.3701ms
[2020-12-31T08:22:48.3630416+00:00][INFO][14][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/.well-known/openid-configuration/jwks - -
[2020-12-31T08:22:48.3657822+00:00][DBUG][14][IdentityServer4.Hosting.EndpointRouter] Request path "/.well-known/openid-configuration/jwks" matched to endpoint type "Discovery"
[2020-12-31T08:22:48.3680295+00:00][DBUG][14][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Discovery", successfully created handler: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint"
[2020-12-31T08:22:48.3688746+00:00][INFO][14][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
[2020-12-31T08:22:48.3770994+00:00][DBUG][14][IdentityServer4.Endpoints.DiscoveryKeyEndpoint] Start key discovery request
[2020-12-31T08:22:48.4263671+00:00][INFO][14][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/.well-known/openid-configuration/jwks" responded 200 in 62.4797 ms
[2020-12-31T08:22:48.4330691+00:00][INFO][14][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 69.9472ms
[2020-12-31T08:22:48.6726036+00:00][INFO][19][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/connect/authorize?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=EbVS8ITLnYucOVJkv-ZCdu3IGXNWtcomP9Hn3wcY86w&code_challenge_method=S256&response_mode=form_post&nonce=637449997684822461.NjYzY2VhZmQtYTUyYS00OWJjLTljM2MtM2RkMzRiMDQ1ZTdiYWVmMDU2ZjYtZWEzNC00NjkwLTgwODUtYzlmZDg4YWExY2Y5&state=CfDJ8HbmgoufA85PoVB4uWHKwLd8UB3jaFeiNSP3QRPc4l1YwXtjtL8grPMdSwEsDcFSxwpNCg0ktwNNZ_mcmqI6P6_cY1CRIjDw5wgQ6a5SMQyeDLIPoJ1ouw1uNFkLAynpuNu0QR1pjir80Wkq52cIfqwOCrYhr-X7-um93qk2u0KR&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0 - -
[2020-12-31T08:22:49.0914117+00:00][DBUG][21][IdentityServer4.Hosting.EndpointRouter] Request path "/connect/authorize" matched to endpoint type "Authorize"
[2020-12-31T08:22:49.1236918+00:00][DBUG][21][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Authorize", successfully created handler: "IdentityServer4.Endpoints.AuthorizeEndpoint"
[2020-12-31T08:22:49.1242049+00:00][INFO][21][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize"
[2020-12-31T08:22:49.1327506+00:00][DBUG][21][IdentityServer4.Endpoints.AuthorizeEndpoint] Start authorize request
[2020-12-31T08:22:49.1496691+00:00][DBUG][21][IdentityServer4.Endpoints.AuthorizeEndpoint] User in authorize request: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b"
[2020-12-31T08:22:49.1558969+00:00][DBUG][21][IdentityServer4.Validation.AuthorizeRequestValidator] Start authorize request protocol validation
[2020-12-31T08:22:49.6881483+00:00][DBUG][21][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T08:22:49.6997948+00:00][DBUG][21][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T08:22:49.7200416+00:00][DBUG][21][IdentityServer4.Validation.AuthorizeRequestValidator] Checking for PKCE parameters
[2020-12-31T08:22:49.7998577+00:00][WARN][21][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T08:22:49.8514877+00:00][DBUG][19][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T08:22:49.8740388+00:00][WARN][19][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T08:22:49.9412670+00:00][DBUG][12][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] API resources in database
[2020-12-31T08:22:49.9534708+00:00][WARN][12][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T08:22:50.0194015+00:00][DBUG][19][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] scopes in database
[2020-12-31T08:22:50.0359660+00:00][DBUG][19][IdentityServer4.Validation.AuthorizeRequestValidator] Calling into custom validator: "IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator"
[2020-12-31T08:22:50.0567139+00:00][DBUG][19][IdentityServer4.Endpoints.AuthorizeEndpoint] ValidatedAuthorizeRequest
AuthorizeRequestValidationLog { ClientId: "urn:em:client:mvc", ClientName: "Event Manager Identity Admin UI", RedirectUri: "https://auth.em.host/admin/signin-oidc", AllowedRedirectUris: ["https://auth.em.host/admin/signin-oidc"], SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", ResponseType: "code", ResponseMode: "form_post", GrantType: "authorization_code", RequestedScopes: "openid profile email roles", State: "CfDJ8HbmgoufA85PoVB4uWHKwLd8UB3jaFeiNSP3QRPc4l1YwXtjtL8grPMdSwEsDcFSxwpNCg0ktwNNZ_mcmqI6P6_cY1CRIjDw5wgQ6a5SMQyeDLIPoJ1ouw1uNFkLAynpuNu0QR1pjir80Wkq52cIfqwOCrYhr-X7-um93qk2u0KR", UiLocales: null, Nonce: "637449997684822461.NjYzY2VhZmQtYTUyYS00OWJjLTljM2MtM2RkMzRiMDQ1ZTdiYWVmMDU2ZjYtZWEzNC00NjkwLTgwODUtYzlmZDg4YWExY2Y5", AuthenticationContextReferenceClasses: null, DisplayMode: null, PromptMode: "", MaxAge: null, LoginHint: null, SessionId: "EBE5C42E3D3FC38137186D3F03C6BC24", Raw: [("client_id": "urn:em:client:mvc"), ("redirect_uri": "https://auth.em.host/admin/signin-oidc"), ("response_type": "code"), ("scope": "openid profile email roles"), ("code_challenge": "EbVS8ITLnYucOVJkv-ZCdu3IGXNWtcomP9Hn3wcY86w"), ("code_challenge_method": "S256"), ("response_mode": "form_post"), ("nonce": "637449997684822461.NjYzY2VhZmQtYTUyYS00OWJjLTljM2MtM2RkMzRiMDQ1ZTdiYWVmMDU2ZjYtZWEzNC00NjkwLTgwODUtYzlmZDg4YWExY2Y5"), ("state": "CfDJ8HbmgoufA85PoVB4uWHKwLd8UB3jaFeiNSP3QRPc4l1YwXtjtL8grPMdSwEsDcFSxwpNCg0ktwNNZ_mcmqI6P6_cY1CRIjDw5wgQ6a5SMQyeDLIPoJ1ouw1uNFkLAynpuNu0QR1pjir80Wkq52cIfqwOCrYhr-X7-um93qk2u0KR"), ("x-client-SKU": "ID_NETSTANDARD2_0"), ("x-client-ver": "6.8.0.0")] }
[2020-12-31T08:22:50.0818921+00:00][DBUG][19][IdentityServer4.Services.DefaultConsentService] Client is configured to not require consent, no consent is required
[2020-12-31T08:22:50.0868944+00:00][DBUG][19][IdentityServer4.ResponseHandling.AuthorizeResponseGenerator] Creating Authorization Code Flow response.
[2020-12-31T08:22:50.2031903+00:00][DBUG][21][IdentityServer4.EntityFramework.Stores.PersistedGrantStore] "V13uu+Mn4WcOjDZlHt02MnDQqjtpohp89vmH8vUm8nI=" not found in database
[2020-12-31T08:22:50.4293315+00:00][INFO][19][IdentityServer4.Events.DefaultEventService] TokenIssuedSuccessEvent { ClientId: "urn:em:client:mvc", ClientName: "Event Manager Identity Admin UI", RedirectUri: "https://auth.em.host/admin/signin-oidc", Endpoint: "Authorize", SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", Scopes: "openid profile email roles", GrantType: "authorization_code", Tokens: [Token { TokenType: "code", TokenValue: "****3E9B" }], Category: "Token", Name: "Token Issued Success", EventType: Success, Id: 2000, Message: null, ActivityId: "0HM5DCL08AJ9L:00000002", TimeStamp: 12/31/2020 08:22:50, ProcessId: 7166, LocalIpAddress: "::ffff:172.19.0.7:50003", RemoteIpAddress: "172.19.0.1" }
[2020-12-31T08:22:50.4388504+00:00][DBUG][19][IdentityServer4.Endpoints.AuthorizeEndpoint] Authorize endpoint response
AuthorizeResponseLog { SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", ClientId: "urn:em:client:mvc", RedirectUri: "https://auth.em.host/admin/signin-oidc", State: "CfDJ8HbmgoufA85PoVB4uWHKwLd8UB3jaFeiNSP3QRPc4l1YwXtjtL8grPMdSwEsDcFSxwpNCg0ktwNNZ_mcmqI6P6_cY1CRIjDw5wgQ6a5SMQyeDLIPoJ1ouw1uNFkLAynpuNu0QR1pjir80Wkq52cIfqwOCrYhr-X7-um93qk2u0KR", Scope: "openid profile email roles", Error: null, ErrorDescription: null }
[2020-12-31T08:22:50.4702917+00:00][INFO][19][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/connect/authorize?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=EbVS8ITLnYucOVJkv-ZCdu3IGXNWtcomP9Hn3wcY86w&code_challenge_method=S256&response_mode=form_post&nonce=637449997684822461.NjYzY2VhZmQtYTUyYS00OWJjLTljM2MtM2RkMzRiMDQ1ZTdiYWVmMDU2ZjYtZWEzNC00NjkwLTgwODUtYzlmZDg4YWExY2Y5&state=CfDJ8HbmgoufA85PoVB4uWHKwLd8UB3jaFeiNSP3QRPc4l1YwXtjtL8grPMdSwEsDcFSxwpNCg0ktwNNZ_mcmqI6P6_cY1CRIjDw5wgQ6a5SMQyeDLIPoJ1ouw1uNFkLAynpuNu0QR1pjir80Wkq52cIfqwOCrYhr-X7-um93qk2u0KR&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0" responded 200 in 1796.7696 ms
[2020-12-31T08:22:50.4804847+00:00][INFO][19][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/connect/authorize?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=EbVS8ITLnYucOVJkv-ZCdu3IGXNWtcomP9Hn3wcY86w&code_challenge_method=S256&response_mode=form_post&nonce=637449997684822461.NjYzY2VhZmQtYTUyYS00OWJjLTljM2MtM2RkMzRiMDQ1ZTdiYWVmMDU2ZjYtZWEzNC00NjkwLTgwODUtYzlmZDg4YWExY2Y5&state=CfDJ8HbmgoufA85PoVB4uWHKwLd8UB3jaFeiNSP3QRPc4l1YwXtjtL8grPMdSwEsDcFSxwpNCg0ktwNNZ_mcmqI6P6_cY1CRIjDw5wgQ6a5SMQyeDLIPoJ1ouw1uNFkLAynpuNu0QR1pjir80Wkq52cIfqwOCrYhr-X7-um93qk2u0KR&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0 - - - 200 - text/html;+charset=UTF-8 1806.0000ms
[2020-12-31T08:22:51.0045325+00:00][INFO][18][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 POST https://auth.em.host/connect/token application/x-www-form-urlencoded 286
[2020-12-31T08:22:51.0095313+00:00][DBUG][18][IdentityServer4.Hosting.EndpointRouter] Request path "/connect/token" matched to endpoint type "Token"
[2020-12-31T08:22:51.0249972+00:00][DBUG][18][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Token", successfully created handler: "IdentityServer4.Endpoints.TokenEndpoint"
[2020-12-31T08:22:51.0255808+00:00][INFO][18][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.TokenEndpoint" for "/connect/token"
[2020-12-31T08:22:51.0354985+00:00][DBUG][18][IdentityServer4.Endpoints.TokenEndpoint] Start token request.
[2020-12-31T08:22:51.0432841+00:00][DBUG][18][IdentityServer4.Validation.ClientSecretValidator] Start client validation
[2020-12-31T08:22:51.0480219+00:00][DBUG][18][IdentityServer4.Validation.BasicAuthenticationSecretParser] Start parsing Basic Authentication secret
[2020-12-31T08:22:51.0513248+00:00][DBUG][18][IdentityServer4.Validation.PostBodySecretParser] Start parsing for secret in post body
[2020-12-31T08:22:51.0623310+00:00][DBUG][18][IdentityServer4.Validation.ISecretsListParser] Parser found secret: "PostBodySecretParser"
[2020-12-31T08:22:51.0631964+00:00][DBUG][18][IdentityServer4.Validation.ISecretsListParser] Secret id found: "urn:em:client:mvc"
[2020-12-31T08:22:51.2216196+00:00][DBUG][17][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T08:22:51.2225491+00:00][DBUG][17][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T08:22:51.2374206+00:00][DBUG][17][IdentityServer4.Validation.ISecretsListValidator] Secret validator success: "HashedSharedSecretValidator"
[2020-12-31T08:22:51.2384595+00:00][DBUG][17][IdentityServer4.Validation.ClientSecretValidator] Client validation success
[2020-12-31T08:22:51.2415539+00:00][INFO][17][IdentityServer4.Events.DefaultEventService] ClientAuthenticationSuccessEvent { ClientId: "urn:em:client:mvc", AuthenticationMethod: "SharedSecret", Category: "Authentication", Name: "Client Authentication Success", EventType: Success, Id: 1010, Message: null, ActivityId: "0HM5DCL08AJ9M:00000002", TimeStamp: 12/31/2020 08:22:51, ProcessId: 7166, LocalIpAddress: "::ffff:172.19.0.7:50003", RemoteIpAddress: "172.21.0.4" }
[2020-12-31T08:22:51.2516260+00:00][DBUG][17][IdentityServer4.Validation.TokenRequestValidator] Start token request validation
[2020-12-31T08:22:51.2599192+00:00][DBUG][17][IdentityServer4.Validation.TokenRequestValidator] Start validation of authorization code token request
[2020-12-31T08:22:51.2882092+00:00][DBUG][12][IdentityServer4.EntityFramework.Stores.PersistedGrantStore] "V13uu+Mn4WcOjDZlHt02MnDQqjtpohp89vmH8vUm8nI=" found in database: True
[2020-12-31T08:22:51.3560420+00:00][DBUG][17][IdentityServer4.EntityFramework.Stores.PersistedGrantStore] removing "V13uu+Mn4WcOjDZlHt02MnDQqjtpohp89vmH8vUm8nI=" persisted grant from database
[2020-12-31T08:22:51.3899105+00:00][DBUG][16][IdentityServer4.Validation.TokenRequestValidator] Client required a proof key for code exchange. Starting PKCE validation
[2020-12-31T08:22:51.4174564+00:00][DBUG][5][IdentityServer4.Validation.TokenRequestValidator] Validation of authorization code token request success
[2020-12-31T08:22:51.4246436+00:00][INFO][5][IdentityServer4.Validation.TokenRequestValidator] Token request validation success, TokenRequestValidationLog { ClientId: "urn:em:client:mvc", ClientName: "Event Manager Identity Admin UI", GrantType: "authorization_code", Scopes: null, AuthorizationCode: "***[2020-12-31T08:25:51.0106891+00:00][INFO][1][IdentityServer4.Startup] Starting IdentityServer4 version "4.1.1+cebd52f5bc61bdefc262fd20739d4d087c6f961f"
[2020-12-31T08:25:51.4197381+00:00][DBUG][1][IdentityServer4.Startup] Custom IssuerUri set to "https://auth.em.host"
[2020-12-31T08:25:51.4397046+00:00][INFO][1][IdentityServer4.Startup] Using the default authentication scheme "Identity.Application" for IdentityServer
[2020-12-31T08:25:51.4406247+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.Application" as default ASP.NET Core scheme for authentication
[2020-12-31T08:25:51.4413658+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.External" as default ASP.NET Core scheme for sign-in
[2020-12-31T08:25:51.4419609+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.External" as default ASP.NET Core scheme for sign-out
[2020-12-31T08:25:51.4462539+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.Application" as default ASP.NET Core scheme for challenge
[2020-12-31T08:25:51.4470114+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.Application" as default ASP.NET Core scheme for forbid
[2020-12-31T08:25:51.9992617+00:00][INFO][1][Microsoft.Hosting.Lifetime] Now listening on: "https://[::]:50003"
[2020-12-31T08:25:52.0045642+00:00][INFO][1][Microsoft.Hosting.Lifetime] Application started. Press Ctrl+C to shut down.
[2020-12-31T08:25:52.0053828+00:00][INFO][1][Microsoft.Hosting.Lifetime] Hosting environment: "Development"
[2020-12-31T08:25:52.0062179+00:00][INFO][1][Microsoft.Hosting.Lifetime] Content root path: "/app"
[2020-12-31T08:27:11.1270290+00:00][INFO][14][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/.well-known/openid-configuration - -
[2020-12-31T08:27:11.1753669+00:00][DBUG][14][IdentityServer4.Startup] Login Url: "/Account/Login"
[2020-12-31T08:27:11.1758735+00:00][DBUG][14][IdentityServer4.Startup] Login Return Url Parameter: "ReturnUrl"
[2020-12-31T08:27:11.1775898+00:00][DBUG][14][IdentityServer4.Startup] Logout Url: "/Account/Logout"
[2020-12-31T08:27:11.1805185+00:00][DBUG][14][IdentityServer4.Startup] ConsentUrl Url: "/consent"
[2020-12-31T08:27:11.1821494+00:00][DBUG][14][IdentityServer4.Startup] Consent Return Url Parameter: "returnUrl"
[2020-12-31T08:27:11.1832731+00:00][DBUG][14][IdentityServer4.Startup] Error Url: "/home/error"
[2020-12-31T08:27:11.1840697+00:00][DBUG][14][IdentityServer4.Startup] Error Id Parameter: "errorId"
[2020-12-31T08:27:11.2169485+00:00][DBUG][14][IdentityServer4.Hosting.EndpointRouter] Request path "/.well-known/openid-configuration" matched to endpoint type "Discovery"
[2020-12-31T08:27:11.2463776+00:00][DBUG][14][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Discovery", successfully created handler: "IdentityServer4.Endpoints.DiscoveryEndpoint"
[2020-12-31T08:27:11.2515712+00:00][INFO][14][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
[2020-12-31T08:27:11.2558950+00:00][DBUG][14][IdentityServer4.Endpoints.DiscoveryEndpoint] Start discovery request
[2020-12-31T08:27:12.2609596+00:00][WARN][14][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T08:27:13.0674566+00:00][WARN][4][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T08:27:13.1526492+00:00][WARN][7][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T08:27:13.7242248+00:00][DBUG][4][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email", "address", "urn:em:api:scope"] as all scopes, and ["urn:em:api"] as API resources
[2020-12-31T08:27:13.8198743+00:00][INFO][4][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/.well-known/openid-configuration" responded 200 in 2679.3252 ms
[2020-12-31T08:27:13.8354884+00:00][INFO][4][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 2710.6058ms
[2020-12-31T08:27:14.1547880+00:00][INFO][14][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/.well-known/openid-configuration/jwks - -
[2020-12-31T08:27:14.1631554+00:00][DBUG][14][IdentityServer4.Hosting.EndpointRouter] Request path "/.well-known/openid-configuration/jwks" matched to endpoint type "Discovery"
[2020-12-31T08:27:14.1657646+00:00][DBUG][14][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Discovery", successfully created handler: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint"
[2020-12-31T08:27:14.1690025+00:00][INFO][14][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
[2020-12-31T08:27:14.1720744+00:00][DBUG][14][IdentityServer4.Endpoints.DiscoveryKeyEndpoint] Start key discovery request
[2020-12-31T08:27:14.2865965+00:00][INFO][14][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/.well-known/openid-configuration/jwks" responded 200 in 130.7549 ms
[2020-12-31T08:27:14.2891301+00:00][INFO][14][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 133.7500ms
[2020-12-31T08:27:14.6093724+00:00][INFO][5][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/connect/authorize?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=_QjHaJIt5B4ghx9BtT_Wbfuuz5WuQpliwqtTWSOU87o&code_challenge_method=S256&response_mode=form_post&nonce=637450000343800068.YTFkOTEyMDYtNDNhNS00ZGVjLWIwNzItZDNlNjIzMGQzMTNiNzc3Mjg1ZGEtMmIxYS00YWE2LWIxZGMtYjQ4OWVkZWZiMjFi&state=CfDJ8HbmgoufA85PoVB4uWHKwLdizofQ3N3zuuu458Fafe6fORY6OPGr1isD8I49ExfcNL00kjvJb9hwJPqkmClCIsNJjJFY8JoYu5pSUprEHLxFAAuHeYhD00VKfH9YLEycT81QGEoiw2ySKqmi-WHupvJeTCsDaznIxi36BRFtdk1e&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0 - -
[2020-12-31T08:27:14.6213266+00:00][DBUG][5][IdentityServer4.Hosting.EndpointRouter] Request path "/connect/authorize" matched to endpoint type "Authorize"
[2020-12-31T08:27:14.6578817+00:00][DBUG][5][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Authorize", successfully created handler: "IdentityServer4.Endpoints.AuthorizeEndpoint"
[2020-12-31T08:27:14.6595375+00:00][INFO][5][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize"
[2020-12-31T08:27:14.6701427+00:00][DBUG][5][IdentityServer4.Endpoints.AuthorizeEndpoint] Start authorize request
[2020-12-31T08:27:14.6793888+00:00][DBUG][5][IdentityServer4.Endpoints.AuthorizeEndpoint] No user present in authorize request
[2020-12-31T08:27:14.6849721+00:00][DBUG][5][IdentityServer4.Validation.AuthorizeRequestValidator] Start authorize request protocol validation
[2020-12-31T08:27:15.3056271+00:00][DBUG][5][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T08:27:15.3175323+00:00][DBUG][5][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T08:27:15.3342431+00:00][DBUG][5][IdentityServer4.Validation.AuthorizeRequestValidator] Checking for PKCE parameters
[2020-12-31T08:27:15.4299892+00:00][WARN][5][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T08:27:15.4663855+00:00][DBUG][15][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T08:27:15.4957087+00:00][WARN][15][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T08:27:15.5912634+00:00][DBUG][12][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] API resources in database
[2020-12-31T08:27:15.6130386+00:00][WARN][12][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T08:27:15.6404509+00:00][DBUG][5][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] scopes in database
[2020-12-31T08:27:15.6670157+00:00][DBUG][5][IdentityServer4.Validation.AuthorizeRequestValidator] Calling into custom validator: "IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator"
[2020-12-31T08:27:15.6917395+00:00][DBUG][5][IdentityServer4.Endpoints.AuthorizeEndpoint] ValidatedAuthorizeRequest
AuthorizeRequestValidationLog { ClientId: "urn:em:client:mvc", ClientName: "Event Manager Identity Admin UI", RedirectUri: "https://auth.em.host/admin/signin-oidc", AllowedRedirectUris: ["https://auth.em.host/admin/signin-oidc"], SubjectId: "anonymous", ResponseType: "code", ResponseMode: "form_post", GrantType: "authorization_code", RequestedScopes: "openid profile email roles", State: "CfDJ8HbmgoufA85PoVB4uWHKwLdizofQ3N3zuuu458Fafe6fORY6OPGr1isD8I49ExfcNL00kjvJb9hwJPqkmClCIsNJjJFY8JoYu5pSUprEHLxFAAuHeYhD00VKfH9YLEycT81QGEoiw2ySKqmi-WHupvJeTCsDaznIxi36BRFtdk1e", UiLocales: null, Nonce: "637450000343800068.YTFkOTEyMDYtNDNhNS00ZGVjLWIwNzItZDNlNjIzMGQzMTNiNzc3Mjg1ZGEtMmIxYS00YWE2LWIxZGMtYjQ4OWVkZWZiMjFi", AuthenticationContextReferenceClasses: null, DisplayMode: null, PromptMode: "", MaxAge: null, LoginHint: null, SessionId: "", Raw: [("client_id": "urn:em:client:mvc"), ("redirect_uri": "https://auth.em.host/admin/signin-oidc"), ("response_type": "code"), ("scope": "openid profile email roles"), ("code_challenge": "_QjHaJIt5B4ghx9BtT_Wbfuuz5WuQpliwqtTWSOU87o"), ("code_challenge_method": "S256"), ("response_mode": "form_post"), ("nonce": "637450000343800068.YTFkOTEyMDYtNDNhNS00ZGVjLWIwNzItZDNlNjIzMGQzMTNiNzc3Mjg1ZGEtMmIxYS00YWE2LWIxZGMtYjQ4OWVkZWZiMjFi"), ("state": "CfDJ8HbmgoufA85PoVB4uWHKwLdizofQ3N3zuuu458Fafe6fORY6OPGr1isD8I49ExfcNL00kjvJb9hwJPqkmClCIsNJjJFY8JoYu5pSUprEHLxFAAuHeYhD00VKfH9YLEycT81QGEoiw2ySKqmi-WHupvJeTCsDaznIxi36BRFtdk1e"), ("x-client-SKU": "ID_NETSTANDARD2_0"), ("x-client-ver": "6.8.0.0")] }
[2020-12-31T08:27:15.7132344+00:00][INFO][5][IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator] Showing login: User is not authenticated
[2020-12-31T08:27:15.7314145+00:00][INFO][5][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/connect/authorize?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=_QjHaJIt5B4ghx9BtT_Wbfuuz5WuQpliwqtTWSOU87o&code_challenge_method=S256&response_mode=form_post&nonce=637450000343800068.YTFkOTEyMDYtNDNhNS00ZGVjLWIwNzItZDNlNjIzMGQzMTNiNzc3Mjg1ZGEtMmIxYS00YWE2LWIxZGMtYjQ4OWVkZWZiMjFi&state=CfDJ8HbmgoufA85PoVB4uWHKwLdizofQ3N3zuuu458Fafe6fORY6OPGr1isD8I49ExfcNL00kjvJb9hwJPqkmClCIsNJjJFY8JoYu5pSUprEHLxFAAuHeYhD00VKfH9YLEycT81QGEoiw2ySKqmi-WHupvJeTCsDaznIxi36BRFtdk1e&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0" responded 302 in 1120.9380 ms
[2020-12-31T08:27:15.7327618+00:00][INFO][5][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/connect/authorize?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=_QjHaJIt5B4ghx9BtT_Wbfuuz5WuQpliwqtTWSOU87o&code_challenge_method=S256&response_mode=form_post&nonce=637450000343800068.YTFkOTEyMDYtNDNhNS00ZGVjLWIwNzItZDNlNjIzMGQzMTNiNzc3Mjg1ZGEtMmIxYS00YWE2LWIxZGMtYjQ4OWVkZWZiMjFi&state=CfDJ8HbmgoufA85PoVB4uWHKwLdizofQ3N3zuuu458Fafe6fORY6OPGr1isD8I49ExfcNL00kjvJb9hwJPqkmClCIsNJjJFY8JoYu5pSUprEHLxFAAuHeYhD00VKfH9YLEycT81QGEoiw2ySKqmi-WHupvJeTCsDaznIxi36BRFtdk1e&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0 - - - 302 0 - 1123.2154ms
[2020-12-31T08:27:15.7657893+00:00][INFO][15][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fauth.em.host%252Fadmin%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3D_QjHaJIt5B4ghx9BtT_Wbfuuz5WuQpliwqtTWSOU87o%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D637450000343800068.YTFkOTEyMDYtNDNhNS00ZGVjLWIwNzItZDNlNjIzMGQzMTNiNzc3Mjg1ZGEtMmIxYS00YWE2LWIxZGMtYjQ4OWVkZWZiMjFi%26state%3DCfDJ8HbmgoufA85PoVB4uWHKwLdizofQ3N3zuuu458Fafe6fORY6OPGr1isD8I49ExfcNL00kjvJb9hwJPqkmClCIsNJjJFY8JoYu5pSUprEHLxFAAuHeYhD00VKfH9YLEycT81QGEoiw2ySKqmi-WHupvJeTCsDaznIxi36BRFtdk1e%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0 - -
[2020-12-31T08:27:15.8541245+00:00][INFO][15][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T08:27:15.9145610+00:00][INFO][15][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with "{action = \"Login\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String)" on controller "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>" ("EventManager.Identity.STS.Identity").
[2020-12-31T08:27:15.9981733+00:00][DBUG][15][IdentityServer4.Validation.AuthorizeRequestValidator] Start authorize request protocol validation
[2020-12-31T08:27:16.2198519+00:00][DBUG][12][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T08:27:16.2205517+00:00][DBUG][12][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T08:27:16.2212362+00:00][DBUG][12][IdentityServer4.Validation.AuthorizeRequestValidator] Checking for PKCE parameters
[2020-12-31T08:27:16.2514103+00:00][DBUG][7][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T08:27:16.3493096+00:00][DBUG][17][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] API resources in database
[2020-12-31T08:27:16.3589390+00:00][DBUG][17][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] scopes in database
[2020-12-31T08:27:16.3599936+00:00][DBUG][17][IdentityServer4.Validation.AuthorizeRequestValidator] Calling into custom validator: "IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator"
[2020-12-31T08:27:16.4720143+00:00][DBUG][17][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T08:27:16.4730867+00:00][DBUG][17][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T08:27:16.5274693+00:00][INFO][17][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executing ViewResult, running view "Login".
[2020-12-31T08:27:17.4341500+00:00][INFO][17][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executed ViewResult - view "Login" executed in 914.8634ms.
[2020-12-31T08:27:17.4413042+00:00][INFO][17][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)" in 1524.9583ms
[2020-12-31T08:27:17.4431320+00:00][INFO][17][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T08:27:17.4462738+00:00][INFO][17][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fauth.em.host%252Fadmin%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3D_QjHaJIt5B4ghx9BtT_Wbfuuz5WuQpliwqtTWSOU87o%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D637450000343800068.YTFkOTEyMDYtNDNhNS00ZGVjLWIwNzItZDNlNjIzMGQzMTNiNzc3Mjg1ZGEtMmIxYS00YWE2LWIxZGMtYjQ4OWVkZWZiMjFi%26state%3DCfDJ8HbmgoufA85PoVB4uWHKwLdizofQ3N3zuuu458Fafe6fORY6OPGr1isD8I49ExfcNL00kjvJb9hwJPqkmClCIsNJjJFY8JoYu5pSUprEHLxFAAuHeYhD00VKfH9YLEycT81QGEoiw2ySKqmi-WHupvJeTCsDaznIxi36BRFtdk1e%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0" responded 200 in 1679.8729 ms
[2020-12-31T08:27:17.4511937+00:00][INFO][17][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fauth.em.host%252Fadmin%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3D_QjHaJIt5B4ghx9BtT_Wbfuuz5WuQpliwqtTWSOU87o%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D637450000343800068.YTFkOTEyMDYtNDNhNS00ZGVjLWIwNzItZDNlNjIzMGQzMTNiNzc3Mjg1ZGEtMmIxYS00YWE2LWIxZGMtYjQ4OWVkZWZiMjFi%26state%3DCfDJ8HbmgoufA85PoVB4uWHKwLdizofQ3N3zuuu458Fafe6fORY6OPGr1isD8I49ExfcNL00kjvJb9hwJPqkmClCIsNJjJFY8JoYu5pSUprEHLxFAAuHeYhD00VKfH9YLEycT81QGEoiw2ySKqmi-WHupvJeTCsDaznIxi36BRFtdk1e%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0 - - - 200 - text/html;+charset=utf-8 1684.8328ms
[2020-12-31T08:27:31.2797074+00:00][INFO][20][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 POST https://auth.em.host/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fauth.em.host%252Fadmin%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3D_QjHaJIt5B4ghx9BtT_Wbfuuz5WuQpliwqtTWSOU87o%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D637450000343800068.YTFkOTEyMDYtNDNhNS00ZGVjLWIwNzItZDNlNjIzMGQzMTNiNzc3Mjg1ZGEtMmIxYS00YWE2LWIxZGMtYjQ4OWVkZWZiMjFi%26state%3DCfDJ8HbmgoufA85PoVB4uWHKwLdizofQ3N3zuuu458Fafe6fORY6OPGr1isD8I49ExfcNL00kjvJb9hwJPqkmClCIsNJjJFY8JoYu5pSUprEHLxFAAuHeYhD00VKfH9YLEycT81QGEoiw2ySKqmi-WHupvJeTCsDaznIxi36BRFtdk1e%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0 application/x-www-form-urlencoded 981
[2020-12-31T08:27:31.2890035+00:00][DBUG][20][IdentityServer4.Hosting.CorsPolicyProvider] CORS request made for path: "/Account/Login" from origin: "null" but was ignored because path was not for an allowed IdentityServer CORS endpoint
[2020-12-31T08:27:31.2914986+00:00][INFO][20][Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware] No CORS policy found for the specified request.
[2020-12-31T08:27:31.3038363+00:00][INFO][20][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T08:27:31.3229204+00:00][INFO][20][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with "{action = \"Login\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EventManager.Identity.STS.Identity.ViewModels.Account.LoginInputModel, System.String)" on controller "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>" ("EventManager.Identity.STS.Identity").
[2020-12-31T08:27:31.3821758+00:00][DBUG][20][IdentityServer4.Validation.AuthorizeRequestValidator] Start authorize request protocol validation
[2020-12-31T08:27:31.5339732+00:00][DBUG][5][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T08:27:31.5346189+00:00][DBUG][5][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T08:27:31.5364362+00:00][DBUG][5][IdentityServer4.Validation.AuthorizeRequestValidator] Checking for PKCE parameters
[2020-12-31T08:27:31.5913741+00:00][DBUG][12][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T08:27:31.6119236+00:00][DBUG][13][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] API resources in database
[2020-12-31T08:27:31.6281256+00:00][DBUG][13][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] scopes in database
[2020-12-31T08:27:31.6297524+00:00][DBUG][13][IdentityServer4.Validation.AuthorizeRequestValidator] Calling into custom validator: "IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator"
[2020-12-31T08:27:32.1066020+00:00][DBUG][12][IdentityServer4.Hosting.IdentityServerAuthenticationService] Augmenting SignInContext
[2020-12-31T08:27:32.1130622+00:00][DBUG][12][IdentityServer4.Hosting.IdentityServerAuthenticationService] Adding idp claim with value: "local"
[2020-12-31T08:27:32.1183761+00:00][DBUG][12][IdentityServer4.Hosting.IdentityServerAuthenticationService] Adding auth_time claim with value: "1609403252"
[2020-12-31T08:27:32.1354390+00:00][INFO][12][Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler] AuthenticationScheme: "Identity.Application" signed in.
[2020-12-31T08:27:32.1523576+00:00][INFO][12][IdentityServer4.Events.DefaultEventService] UserLoginSuccessEvent { Username: "admin", Provider: null, ProviderUserId: null, SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", DisplayName: "admin", Endpoint: "UI", ClientId: null, Category: "Authentication", Name: "User Login Success", EventType: Success, Id: 1000, Message: null, ActivityId: "0HM5DCNF98CCF:00000002", TimeStamp: 12/31/2020 08:27:32, ProcessId: 8443, LocalIpAddress: "::ffff:172.19.0.7:50003", RemoteIpAddress: "172.19.0.1" }
[2020-12-31T08:27:32.1655037+00:00][INFO][12][Microsoft.AspNetCore.Mvc.Infrastructure.RedirectResultExecutor] Executing RedirectResult, redirecting to "/connect/authorize/callback?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=_QjHaJIt5B4ghx9BtT_Wbfuuz5WuQpliwqtTWSOU87o&code_challenge_method=S256&response_mode=form_post&nonce=637450000343800068.YTFkOTEyMDYtNDNhNS00ZGVjLWIwNzItZDNlNjIzMGQzMTNiNzc3Mjg1ZGEtMmIxYS00YWE2LWIxZGMtYjQ4OWVkZWZiMjFi&state=CfDJ8HbmgoufA85PoVB4uWHKwLdizofQ3N3zuuu458Fafe6fORY6OPGr1isD8I49ExfcNL00kjvJb9hwJPqkmClCIsNJjJFY8JoYu5pSUprEHLxFAAuHeYhD00VKfH9YLEycT81QGEoiw2ySKqmi-WHupvJeTCsDaznIxi36BRFtdk1e&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0".
[2020-12-31T08:27:32.1686840+00:00][INFO][12][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)" in 844.8065ms
[2020-12-31T08:27:32.1696236+00:00][INFO][12][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T08:27:32.1703625+00:00][INFO][12][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "POST" "/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fauth.em.host%252Fadmin%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3D_QjHaJIt5B4ghx9BtT_Wbfuuz5WuQpliwqtTWSOU87o%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D637450000343800068.YTFkOTEyMDYtNDNhNS00ZGVjLWIwNzItZDNlNjIzMGQzMTNiNzc3Mjg1ZGEtMmIxYS00YWE2LWIxZGMtYjQ4OWVkZWZiMjFi%26state%3DCfDJ8HbmgoufA85PoVB4uWHKwLdizofQ3N3zuuu458Fafe6fORY6OPGr1isD8I49ExfcNL00kjvJb9hwJPqkmClCIsNJjJFY8JoYu5pSUprEHLxFAAuHeYhD00VKfH9YLEycT81QGEoiw2ySKqmi-WHupvJeTCsDaznIxi36BRFtdk1e%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0" responded 302 in 887.7298 ms
[2020-12-31T08:27:32.1715617+00:00][INFO][12][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 POST https://auth.em.host/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fauth.em.host%252Fadmin%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3D_QjHaJIt5B4ghx9BtT_Wbfuuz5WuQpliwqtTWSOU87o%26code_challenge_method%3DS256%26response_mode%3Dform_post%26nonce%3D637450000343800068.YTFkOTEyMDYtNDNhNS00ZGVjLWIwNzItZDNlNjIzMGQzMTNiNzc3Mjg1ZGEtMmIxYS00YWE2LWIxZGMtYjQ4OWVkZWZiMjFi%26state%3DCfDJ8HbmgoufA85PoVB4uWHKwLdizofQ3N3zuuu458Fafe6fORY6OPGr1isD8I49ExfcNL00kjvJb9hwJPqkmClCIsNJjJFY8JoYu5pSUprEHLxFAAuHeYhD00VKfH9YLEycT81QGEoiw2ySKqmi-WHupvJeTCsDaznIxi36BRFtdk1e%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0 application/x-www-form-urlencoded 981 - 302 0 - 891.8578ms
[2020-12-31T08:27:32.2425501+00:00][INFO][13][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/connect/authorize/callback?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=_QjHaJIt5B4ghx9BtT_Wbfuuz5WuQpliwqtTWSOU87o&code_challenge_method=S256&response_mode=form_post&nonce=637450000343800068.YTFkOTEyMDYtNDNhNS00ZGVjLWIwNzItZDNlNjIzMGQzMTNiNzc3Mjg1ZGEtMmIxYS00YWE2LWIxZGMtYjQ4OWVkZWZiMjFi&state=CfDJ8HbmgoufA85PoVB4uWHKwLdizofQ3N3zuuu458Fafe6fORY6OPGr1isD8I49ExfcNL00kjvJb9hwJPqkmClCIsNJjJFY8JoYu5pSUprEHLxFAAuHeYhD00VKfH9YLEycT81QGEoiw2ySKqmi-WHupvJeTCsDaznIxi36BRFtdk1e&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0 - -
[2020-12-31T08:27:32.2614439+00:00][DBUG][13][IdentityServer4.Hosting.EndpointRouter] Request path "/connect/authorize/callback" matched to endpoint type "Authorize"
[2020-12-31T08:27:32.2638766+00:00][DBUG][13][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Authorize", successfully created handler: "IdentityServer4.Endpoints.AuthorizeCallbackEndpoint"
[2020-12-31T08:27:32.2651109+00:00][INFO][13][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeCallbackEndpoint" for "/connect/authorize/callback"
[2020-12-31T08:27:32.2738864+00:00][DBUG][13][IdentityServer4.Endpoints.AuthorizeCallbackEndpoint] Start authorize callback request
[2020-12-31T08:27:32.2829058+00:00][DBUG][13][IdentityServer4.Endpoints.AuthorizeCallbackEndpoint] User in authorize request: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b"
[2020-12-31T08:27:32.2835998+00:00][DBUG][13][IdentityServer4.Validation.AuthorizeRequestValidator] Start authorize request protocol validation
[2020-12-31T08:27:32.4261237+00:00][DBUG][13][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T08:27:32.4272465+00:00][DBUG][13][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T08:27:32.4282034+00:00][DBUG][13][IdentityServer4.Validation.AuthorizeRequestValidator] Checking for PKCE parameters
[2020-12-31T08:27:32.5064863+00:00][DBUG][5][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T08:27:32.5369770+00:00][DBUG][20][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] API resources in database
[2020-12-31T08:27:32.5519245+00:00][DBUG][20][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] scopes in database
[2020-12-31T08:27:32.5530703+00:00][DBUG][20][IdentityServer4.Validation.AuthorizeRequestValidator] Calling into custom validator: "IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator"
[2020-12-31T08:27:32.5544768+00:00][DBUG][20][IdentityServer4.Endpoints.AuthorizeCallbackEndpoint] ValidatedAuthorizeRequest
AuthorizeRequestValidationLog { ClientId: "urn:em:client:mvc", ClientName: "Event Manager Identity Admin UI", RedirectUri: "https://auth.em.host/admin/signin-oidc", AllowedRedirectUris: ["https://auth.em.host/admin/signin-oidc"], SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", ResponseType: "code", ResponseMode: "form_post", GrantType: "authorization_code", RequestedScopes: "openid profile email roles", State: "CfDJ8HbmgoufA85PoVB4uWHKwLdizofQ3N3zuuu458Fafe6fORY6OPGr1isD8I49ExfcNL00kjvJb9hwJPqkmClCIsNJjJFY8JoYu5pSUprEHLxFAAuHeYhD00VKfH9YLEycT81QGEoiw2ySKqmi-WHupvJeTCsDaznIxi36BRFtdk1e", UiLocales: null, Nonce: "637450000343800068.YTFkOTEyMDYtNDNhNS00ZGVjLWIwNzItZDNlNjIzMGQzMTNiNzc3Mjg1ZGEtMmIxYS00YWE2LWIxZGMtYjQ4OWVkZWZiMjFi", AuthenticationContextReferenceClasses: null, DisplayMode: null, PromptMode: "", MaxAge: null, LoginHint: null, SessionId: "49AC85ABFDFB0254017ABF3213B1A63C", Raw: [("client_id": "urn:em:client:mvc"), ("redirect_uri": "https://auth.em.host/admin/signin-oidc"), ("response_type": "code"), ("scope": "openid profile email roles"), ("code_challenge": "_QjHaJIt5B4ghx9BtT_Wbfuuz5WuQpliwqtTWSOU87o"), ("code_challenge_method": "S256"), ("response_mode": "form_post"), ("nonce": "637450000343800068.YTFkOTEyMDYtNDNhNS00ZGVjLWIwNzItZDNlNjIzMGQzMTNiNzc3Mjg1ZGEtMmIxYS00YWE2LWIxZGMtYjQ4OWVkZWZiMjFi"), ("state": "CfDJ8HbmgoufA85PoVB4uWHKwLdizofQ3N3zuuu458Fafe6fORY6OPGr1isD8I49ExfcNL00kjvJb9hwJPqkmClCIsNJjJFY8JoYu5pSUprEHLxFAAuHeYhD00VKfH9YLEycT81QGEoiw2ySKqmi-WHupvJeTCsDaznIxi36BRFtdk1e"), ("x-client-SKU": "ID_NETSTANDARD2_0"), ("x-client-ver": "6.8.0.0")] }
[2020-12-31T08:27:32.6602213+00:00][DBUG][14][IdentityServer4.Services.DefaultConsentService] Client is configured to not require consent, no consent is required
[2020-12-31T08:27:32.6675625+00:00][DBUG][14][IdentityServer4.ResponseHandling.AuthorizeResponseGenerator] Creating Authorization Code Flow response.
[2020-12-31T08:27:32.8334270+00:00][DBUG][20][IdentityServer4.EntityFramework.Stores.PersistedGrantStore] "Uxg5mMpmPV8rTQnR8g8ImPLvWkWpP8SVHz1fXWlXvKM=" not found in database
[2020-12-31T08:27:33.4594188+00:00][INFO][14][IdentityServer4.Events.DefaultEventService] TokenIssuedSuccessEvent { ClientId: "urn:em:client:mvc", ClientName: "Event Manager Identity Admin UI", RedirectUri: "https://auth.em.host/admin/signin-oidc", Endpoint: "Authorize", SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", Scopes: "openid profile email roles", GrantType: "authorization_code", Tokens: [Token { TokenType: "code", TokenValue: "****B3AA" }], Category: "Token", Name: "Token Issued Success", EventType: Success, Id: 2000, Message: null, ActivityId: "0HM5DCNF98CCG:00000002", TimeStamp: 12/31/2020 08:27:33, ProcessId: 8443, LocalIpAddress: "::ffff:172.19.0.7:50003", RemoteIpAddress: "172.19.0.1" }
[2020-12-31T08:27:33.4639777+00:00][DBUG][14][IdentityServer4.Endpoints.AuthorizeCallbackEndpoint] Authorize endpoint response
AuthorizeResponseLog { SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", ClientId: "urn:em:client:mvc", RedirectUri: "https://auth.em.host/admin/signin-oidc", State: "CfDJ8HbmgoufA85PoVB4uWHKwLdizofQ3N3zuuu458Fafe6fORY6OPGr1isD8I49ExfcNL00kjvJb9hwJPqkmClCIsNJjJFY8JoYu5pSUprEHLxFAAuHeYhD00VKfH9YLEycT81QGEoiw2ySKqmi-WHupvJeTCsDaznIxi36BRFtdk1e", Scope: "openid profile email roles", Error: null, ErrorDescription: null }
[2020-12-31T08:27:33.4965518+00:00][DBUG][14][IdentityServer4.Hosting.IdentityServerAuthenticationService] Augmenting SignInContext
[2020-12-31T08:27:33.4982424+00:00][INFO][14][Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler] AuthenticationScheme: "Identity.Application" signed in.
[2020-12-31T08:27:33.5132930+00:00][INFO][14][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/connect/authorize/callback?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=_QjHaJIt5B4ghx9BtT_Wbfuuz5WuQpliwqtTWSOU87o&code_challenge_method=S256&response_mode=form_post&nonce=637450000343800068.YTFkOTEyMDYtNDNhNS00ZGVjLWIwNzItZDNlNjIzMGQzMTNiNzc3Mjg1ZGEtMmIxYS00YWE2LWIxZGMtYjQ4OWVkZWZiMjFi&state=CfDJ8HbmgoufA85PoVB4uWHKwLdizofQ3N3zuuu458Fafe6fORY6OPGr1isD8I49ExfcNL00kjvJb9hwJPqkmClCIsNJjJFY8JoYu5pSUprEHLxFAAuHeYhD00VKfH9YLEycT81QGEoiw2ySKqmi-WHupvJeTCsDaznIxi36BRFtdk1e&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0" responded 200 in 1269.5592 ms
[2020-12-31T08:27:33.5143963+00:00][INFO][14][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/connect/authorize/callback?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=_QjHaJIt5B4ghx9BtT_Wbfuuz5WuQpliwqtTWSOU87o&code_challenge_method=S256&response_mode=form_post&nonce=637450000343800068.YTFkOTEyMDYtNDNhNS00ZGVjLWIwNzItZDNlNjIzMGQzMTNiNzc3Mjg1ZGEtMmIxYS00YWE2LWIxZGMtYjQ4OWVkZWZiMjFi&state=CfDJ8HbmgoufA85PoVB4uWHKwLdizofQ3N3zuuu458Fafe6fORY6OPGr1isD8I49ExfcNL00kjvJb9hwJPqkmClCIsNJjJFY8JoYu5pSUprEHLxFAAuHeYhD00VKfH9YLEycT81QGEoiw2ySKqmi-WHupvJeTCsDaznIxi36BRFtdk1e&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0 - - - 200 - text/html;+charset=UTF-8 1271.9832ms
[2020-12-31T08:27:34.0715455+00:00][INFO][4][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 POST https://auth.em.host/connect/token application/x-www-form-urlencoded 286
[2020-12-31T08:27:34.0731597+00:00][DBUG][4][IdentityServer4.Hosting.EndpointRouter] Request path "/connect/token" matched to endpoint type "Token"
[2020-12-31T08:27:34.0836146+00:00][DBUG][4][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Token", successfully created handler: "IdentityServer4.Endpoints.TokenEndpoint"
[2020-12-31T08:27:34.0842422+00:00][INFO][4][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.TokenEndpoint" for "/connect/token"
[2020-12-31T08:27:34.0940940+00:00][DBUG][4][IdentityServer4.Endpoints.TokenEndpoint] Start token request.
[2020-12-31T08:27:34.0999680+00:00][DBUG][4][IdentityServer4.Validation.ClientSecretValidator] Start client validation
[2020-12-31T08:27:34.1053148+00:00][DBUG][4][IdentityServer4.Validation.BasicAuthenticationSecretParser] Start parsing Basic Authentication secret
[2020-12-31T08:27:34.1091156+00:00][DBUG][4][IdentityServer4.Validation.PostBodySecretParser] Start parsing for secret in post body
[2020-12-31T08:27:34.1109752+00:00][DBUG][4][IdentityServer4.Validation.ISecretsListParser] Parser found secret: "PostBodySecretParser"
[2020-12-31T08:27:34.1121009+00:00][DBUG][4][IdentityServer4.Validation.ISecretsListParser] Secret id found: "urn:em:client:mvc"
[2020-12-31T08:27:34.2149829+00:00][DBUG][15][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T08:27:34.2156962+00:00][DBUG][15][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T08:27:34.2277990+00:00][DBUG][15][IdentityServer4.Validation.ISecretsListValidator] Secret validator success: "HashedSharedSecretValidator"
[2020-12-31T08:27:34.2285181+00:00][DBUG][15][IdentityServer4.Validation.ClientSecretValidator] Client validation success
[2020-12-31T08:27:34.2351281+00:00][INFO][15][IdentityServer4.Events.DefaultEventService] ClientAuthenticationSuccessEvent { ClientId: "urn:em:client:mvc", AuthenticationMethod: "SharedSecret", Category: "Authentication", Name: "Client Authentication Success", EventType: Success, Id: 1010, Message: null, ActivityId: "0HM5DCNF98CCH:00000002", TimeStamp: 12/31/2020 08:27:34, ProcessId: 8443, LocalIpAddress: "::ffff:172.19.0.7:50003", RemoteIpAddress: "172.21.0.4" }
[2020-12-31T08:27:34.2442586+00:00][DBUG][15][IdentityServer4.Validation.TokenRequestValidator] Start token request validation
[2020-12-31T08:27:34.2556589+00:00][DBUG][15][IdentityServer4.Validation.TokenRequestValidator] Start validation of authorization code token request
[2020-12-31T08:27:34.3304008+00:00][DBUG][4][IdentityServer4.EntityFramework.Stores.PersistedGrantStore] "Uxg5mMpmPV8rTQnR8g8ImPLvWkWpP8SVHz1fXWlXvKM=" found in database: True
[2020-12-31T08:27:34.4146543+00:00][DBUG][20][IdentityServer4.EntityFramework.Stores.PersistedGrantStore] removing "Uxg5mMpmPV8rTQnR8g8ImPLvWkWpP8SVHz1fXWlXvKM=" persisted grant from database
[2020-12-31T08:27:34.4479470+00:00][DBUG][12][IdentityServer4.Validation.TokenRequestValidator] Client required a proof key for code exchange. Starting PKCE validation
[2020-12-31T08:27:34.4626957+00:00][DBUG][20][IdentityServer4.Validation.TokenRequestValidator] Validation of authorization code token request success
[2020-12-31T08:27:34.4711787+00:00][INFO][20][IdentityServer4.Validation.TokenRequestValidator] Token request validation success, TokenRequestValidationLog { ClientId: "urn:em:client:mvc", ClientName: "Event Manager Identity Admin UI", GrantType: "authorization_code", Scopes: null, AuthorizationCode: "****B3AA", Re[2020-12-31T08:31:37.2685927+00:00][INFO][1][IdentityServer4.Startup] Starting IdentityServer4 version "4.1.1+cebd52f5bc61bdefc262fd20739d4d087c6f961f"
[2020-12-31T08:31:37.6563097+00:00][DBUG][1][IdentityServer4.Startup] Custom IssuerUri set to "https://auth.em.host"
[2020-12-31T08:31:37.6671363+00:00][INFO][1][IdentityServer4.Startup] Using the default authentication scheme "Identity.Application" for IdentityServer
[2020-12-31T08:31:37.6684132+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.Application" as default ASP.NET Core scheme for authentication
[2020-12-31T08:31:37.6690110+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.External" as default ASP.NET Core scheme for sign-in
[2020-12-31T08:31:37.6694638+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.External" as default ASP.NET Core scheme for sign-out
[2020-12-31T08:31:37.6700545+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.Application" as default ASP.NET Core scheme for challenge
[2020-12-31T08:31:37.6706318+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.Application" as default ASP.NET Core scheme for forbid
[2020-12-31T08:31:38.2419368+00:00][INFO][1][Microsoft.Hosting.Lifetime] Now listening on: "https://[::]:50003"
[2020-12-31T08:31:38.2439444+00:00][INFO][1][Microsoft.Hosting.Lifetime] Application started. Press Ctrl+C to shut down.
[2020-12-31T08:31:38.2445751+00:00][INFO][1][Microsoft.Hosting.Lifetime] Hosting environment: "Development"
[2020-12-31T08:31:38.2453863+00:00][INFO][1][Microsoft.Hosting.Lifetime] Content root path: "/app"
[2020-12-31T08:32:06.2407392+00:00][INFO][13][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/ - -
[2020-12-31T08:32:06.4484133+00:00][DBUG][13][IdentityServer4.Startup] Login Url: "/Account/Login"
[2020-12-31T08:32:06.4492177+00:00][DBUG][13][IdentityServer4.Startup] Login Return Url Parameter: "ReturnUrl"
[2020-12-31T08:32:06.4500341+00:00][DBUG][13][IdentityServer4.Startup] Logout Url: "/Account/Logout"
[2020-12-31T08:32:06.4510150+00:00][DBUG][13][IdentityServer4.Startup] ConsentUrl Url: "/consent"
[2020-12-31T08:32:06.4612490+00:00][DBUG][13][IdentityServer4.Startup] Consent Return Url Parameter: "returnUrl"
[2020-12-31T08:32:06.4620269+00:00][DBUG][13][IdentityServer4.Startup] Error Url: "/home/error"
[2020-12-31T08:32:06.4626467+00:00][DBUG][13][IdentityServer4.Startup] Error Id Parameter: "errorId"
[2020-12-31T08:32:06.8031529+00:00][INFO][13][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint '"EventManager.Identity.STS.Identity.Controllers.HomeController.Index (EventManager.Identity.STS.Identity)"'
[2020-12-31T08:32:06.9131276+00:00][INFO][13][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with "{action = \"Index\", controller = \"Home\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Index()" on controller "EventManager.Identity.STS.Identity.Controllers.HomeController" ("EventManager.Identity.STS.Identity").
[2020-12-31T08:32:09.4736296+00:00][INFO][13][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executing ViewResult, running view "Index".
[2020-12-31T08:32:13.7097943+00:00][INFO][13][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executed ViewResult - view "Index" executed in 4265.9831ms.
[2020-12-31T08:32:13.7246407+00:00][INFO][13][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action "EventManager.Identity.STS.Identity.Controllers.HomeController.Index (EventManager.Identity.STS.Identity)" in 6809.3906ms
[2020-12-31T08:32:13.7258359+00:00][INFO][13][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint '"EventManager.Identity.STS.Identity.Controllers.HomeController.Index (EventManager.Identity.STS.Identity)"'
[2020-12-31T08:32:13.7410501+00:00][INFO][13][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/" responded 200 in 7438.9715 ms
[2020-12-31T08:32:13.7586762+00:00][INFO][13][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/ - - - 200 - text/html;+charset=utf-8 7534.0633ms
[2020-12-31T08:32:26.7970291+00:00][INFO][13][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/.well-known/openid-configuration - -
[2020-12-31T08:32:26.8020851+00:00][DBUG][13][IdentityServer4.Hosting.EndpointRouter] Request path "/.well-known/openid-configuration" matched to endpoint type "Discovery"
[2020-12-31T08:32:26.8122101+00:00][DBUG][13][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Discovery", successfully created handler: "IdentityServer4.Endpoints.DiscoveryEndpoint"
[2020-12-31T08:32:26.8150086+00:00][INFO][13][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
[2020-12-31T08:32:26.8197171+00:00][DBUG][13][IdentityServer4.Endpoints.DiscoveryEndpoint] Start discovery request
[2020-12-31T08:32:27.5067167+00:00][WARN][13][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T08:32:27.7791581+00:00][WARN][15][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T08:32:27.8449465+00:00][WARN][14][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T08:32:28.4385975+00:00][DBUG][13][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email", "address", "urn:em:api:scope"] as all scopes, and ["urn:em:api"] as API resources
[2020-12-31T08:32:28.4974405+00:00][INFO][13][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/.well-known/openid-configuration" responded 200 in 1699.6236 ms
[2020-12-31T08:32:28.5010732+00:00][INFO][13][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 1703.9458ms
[2020-12-31T08:32:28.7634419+00:00][INFO][11][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/.well-known/openid-configuration/jwks - -
[2020-12-31T08:32:28.7739243+00:00][DBUG][11][IdentityServer4.Hosting.EndpointRouter] Request path "/.well-known/openid-configuration/jwks" matched to endpoint type "Discovery"
[2020-12-31T08:32:28.7772199+00:00][DBUG][11][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Discovery", successfully created handler: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint"
[2020-12-31T08:32:28.7781498+00:00][INFO][11][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
[2020-12-31T08:32:28.7830372+00:00][DBUG][11][IdentityServer4.Endpoints.DiscoveryKeyEndpoint] Start key discovery request
[2020-12-31T08:32:28.8614065+00:00][INFO][11][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/.well-known/openid-configuration/jwks" responded 200 in 97.2086 ms
[2020-12-31T08:32:28.8632249+00:00][INFO][11][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 99.7515ms
[2020-12-31T08:32:29.0889324+00:00][INFO][14][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/connect/authorize?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=UjJ6Gye9oHBkGmLNAeAsO1Thi4AO4AFzRyPtatFPzUM&code_challenge_method=S256&response_mode=form_post&state=CfDJ8HbmgoufA85PoVB4uWHKwLdet73dwNsqrFg1MO79Itkujn0VMqR1hF1lBE4nVxpe0dNpQVF_1Dcigoho3UrO_TZH2v0Bmt2750V8D-IhXdjjcFFcXl6j-6AsaQ5pyxLFgRfsjB9WrJrF47CcKhrZtiVkca7Pivo4BSESensDMowZ&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0 - -
[2020-12-31T08:32:29.0932769+00:00][DBUG][14][IdentityServer4.Hosting.EndpointRouter] Request path "/connect/authorize" matched to endpoint type "Authorize"
[2020-12-31T08:32:29.0991291+00:00][DBUG][14][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Authorize", successfully created handler: "IdentityServer4.Endpoints.AuthorizeEndpoint"
[2020-12-31T08:32:29.0996719+00:00][INFO][14][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize"
[2020-12-31T08:32:29.1061895+00:00][DBUG][14][IdentityServer4.Endpoints.AuthorizeEndpoint] Start authorize request
[2020-12-31T08:32:29.1148018+00:00][DBUG][14][IdentityServer4.Endpoints.AuthorizeEndpoint] No user present in authorize request
[2020-12-31T08:32:29.1194494+00:00][DBUG][14][IdentityServer4.Validation.AuthorizeRequestValidator] Start authorize request protocol validation
[2020-12-31T08:32:29.7893703+00:00][DBUG][12][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T08:32:29.7990950+00:00][DBUG][12][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T08:32:29.8187794+00:00][DBUG][12][IdentityServer4.Validation.AuthorizeRequestValidator] Checking for PKCE parameters
[2020-12-31T08:32:29.8987843+00:00][WARN][12][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T08:32:29.9313784+00:00][DBUG][15][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T08:32:29.9570625+00:00][WARN][15][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T08:32:29.9983812+00:00][DBUG][18][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] API resources in database
[2020-12-31T08:32:30.0110750+00:00][WARN][18][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T08:32:30.0303839+00:00][DBUG][15][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] scopes in database
[2020-12-31T08:32:30.0430479+00:00][DBUG][15][IdentityServer4.Validation.AuthorizeRequestValidator] Calling into custom validator: "IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator"
[2020-12-31T08:32:30.0600439+00:00][DBUG][15][IdentityServer4.Endpoints.AuthorizeEndpoint] ValidatedAuthorizeRequest
AuthorizeRequestValidationLog { ClientId: "urn:em:client:mvc", ClientName: "Event Manager Identity Admin UI", RedirectUri: "https://auth.em.host/admin/signin-oidc", AllowedRedirectUris: ["https://auth.em.host/admin/signin-oidc"], SubjectId: "anonymous", ResponseType: "code", ResponseMode: "form_post", GrantType: "authorization_code", RequestedScopes: "openid profile email roles", State: "CfDJ8HbmgoufA85PoVB4uWHKwLdet73dwNsqrFg1MO79Itkujn0VMqR1hF1lBE4nVxpe0dNpQVF_1Dcigoho3UrO_TZH2v0Bmt2750V8D-IhXdjjcFFcXl6j-6AsaQ5pyxLFgRfsjB9WrJrF47CcKhrZtiVkca7Pivo4BSESensDMowZ", UiLocales: null, Nonce: null, AuthenticationContextReferenceClasses: null, DisplayMode: null, PromptMode: "", MaxAge: null, LoginHint: null, SessionId: "", Raw: [("client_id": "urn:em:client:mvc"), ("redirect_uri": "https://auth.em.host/admin/signin-oidc"), ("response_type": "code"), ("scope": "openid profile email roles"), ("code_challenge": "UjJ6Gye9oHBkGmLNAeAsO1Thi4AO4AFzRyPtatFPzUM"), ("code_challenge_method": "S256"), ("response_mode": "form_post"), ("state": "CfDJ8HbmgoufA85PoVB4uWHKwLdet73dwNsqrFg1MO79Itkujn0VMqR1hF1lBE4nVxpe0dNpQVF_1Dcigoho3UrO_TZH2v0Bmt2750V8D-IhXdjjcFFcXl6j-6AsaQ5pyxLFgRfsjB9WrJrF47CcKhrZtiVkca7Pivo4BSESensDMowZ"), ("x-client-SKU": "ID_NETSTANDARD2_0"), ("x-client-ver": "6.8.0.0")] }
[2020-12-31T08:32:30.0720312+00:00][INFO][15][IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator] Showing login: User is not authenticated
[2020-12-31T08:32:30.0807669+00:00][INFO][15][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/connect/authorize?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=UjJ6Gye9oHBkGmLNAeAsO1Thi4AO4AFzRyPtatFPzUM&code_challenge_method=S256&response_mode=form_post&state=CfDJ8HbmgoufA85PoVB4uWHKwLdet73dwNsqrFg1MO79Itkujn0VMqR1hF1lBE4nVxpe0dNpQVF_1Dcigoho3UrO_TZH2v0Bmt2750V8D-IhXdjjcFFcXl6j-6AsaQ5pyxLFgRfsjB9WrJrF47CcKhrZtiVkca7Pivo4BSESensDMowZ&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0" responded 302 in 990.0089 ms
[2020-12-31T08:32:30.0819368+00:00][INFO][15][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/connect/authorize?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=UjJ6Gye9oHBkGmLNAeAsO1Thi4AO4AFzRyPtatFPzUM&code_challenge_method=S256&response_mode=form_post&state=CfDJ8HbmgoufA85PoVB4uWHKwLdet73dwNsqrFg1MO79Itkujn0VMqR1hF1lBE4nVxpe0dNpQVF_1Dcigoho3UrO_TZH2v0Bmt2750V8D-IhXdjjcFFcXl6j-6AsaQ5pyxLFgRfsjB9WrJrF47CcKhrZtiVkca7Pivo4BSESensDMowZ&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0 - - - 302 0 - 992.8004ms
[2020-12-31T08:32:30.1407679+00:00][INFO][4][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fauth.em.host%252Fadmin%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3DUjJ6Gye9oHBkGmLNAeAsO1Thi4AO4AFzRyPtatFPzUM%26code_challenge_method%3DS256%26response_mode%3Dform_post%26state%3DCfDJ8HbmgoufA85PoVB4uWHKwLdet73dwNsqrFg1MO79Itkujn0VMqR1hF1lBE4nVxpe0dNpQVF_1Dcigoho3UrO_TZH2v0Bmt2750V8D-IhXdjjcFFcXl6j-6AsaQ5pyxLFgRfsjB9WrJrF47CcKhrZtiVkca7Pivo4BSESensDMowZ%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0 - -
[2020-12-31T08:32:30.1581694+00:00][INFO][4][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T08:32:30.1788399+00:00][INFO][4][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with "{action = \"Login\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String)" on controller "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>" ("EventManager.Identity.STS.Identity").
[2020-12-31T08:32:30.2195923+00:00][DBUG][4][IdentityServer4.Validation.AuthorizeRequestValidator] Start authorize request protocol validation
[2020-12-31T08:32:30.4643683+00:00][DBUG][14][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T08:32:30.4906374+00:00][DBUG][14][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T08:32:30.4916646+00:00][DBUG][14][IdentityServer4.Validation.AuthorizeRequestValidator] Checking for PKCE parameters
[2020-12-31T08:32:30.5457333+00:00][DBUG][18][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T08:32:30.5775569+00:00][DBUG][18][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] API resources in database
[2020-12-31T08:32:30.5975716+00:00][DBUG][14][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] scopes in database
[2020-12-31T08:32:30.6011625+00:00][DBUG][14][IdentityServer4.Validation.AuthorizeRequestValidator] Calling into custom validator: "IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator"
[2020-12-31T08:32:30.7578413+00:00][DBUG][12][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T08:32:30.7583899+00:00][DBUG][12][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T08:32:30.7730963+00:00][INFO][12][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executing ViewResult, running view "Login".
[2020-12-31T08:32:30.8579187+00:00][INFO][12][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executed ViewResult - view "Login" executed in 85.7321ms.
[2020-12-31T08:32:30.8610398+00:00][INFO][12][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)" in 678.7088ms
[2020-12-31T08:32:30.8649365+00:00][INFO][12][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T08:32:30.8728909+00:00][INFO][12][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fauth.em.host%252Fadmin%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3DUjJ6Gye9oHBkGmLNAeAsO1Thi4AO4AFzRyPtatFPzUM%26code_challenge_method%3DS256%26response_mode%3Dform_post%26state%3DCfDJ8HbmgoufA85PoVB4uWHKwLdet73dwNsqrFg1MO79Itkujn0VMqR1hF1lBE4nVxpe0dNpQVF_1Dcigoho3UrO_TZH2v0Bmt2750V8D-IhXdjjcFFcXl6j-6AsaQ5pyxLFgRfsjB9WrJrF47CcKhrZtiVkca7Pivo4BSESensDMowZ%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0" responded 200 in 731.2413 ms
[2020-12-31T08:32:30.8740122+00:00][INFO][12][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fauth.em.host%252Fadmin%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3DUjJ6Gye9oHBkGmLNAeAsO1Thi4AO4AFzRyPtatFPzUM%26code_challenge_method%3DS256%26response_mode%3Dform_post%26state%3DCfDJ8HbmgoufA85PoVB4uWHKwLdet73dwNsqrFg1MO79Itkujn0VMqR1hF1lBE4nVxpe0dNpQVF_1Dcigoho3UrO_TZH2v0Bmt2750V8D-IhXdjjcFFcXl6j-6AsaQ5pyxLFgRfsjB9WrJrF47CcKhrZtiVkca7Pivo4BSESensDMowZ%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0 - - - 200 - text/html;+charset=utf-8 733.1892ms
[2020-12-31T08:32:41.2323769+00:00][INFO][4][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 POST https://auth.em.host/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fauth.em.host%252Fadmin%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3DUjJ6Gye9oHBkGmLNAeAsO1Thi4AO4AFzRyPtatFPzUM%26code_challenge_method%3DS256%26response_mode%3Dform_post%26state%3DCfDJ8HbmgoufA85PoVB4uWHKwLdet73dwNsqrFg1MO79Itkujn0VMqR1hF1lBE4nVxpe0dNpQVF_1Dcigoho3UrO_TZH2v0Bmt2750V8D-IhXdjjcFFcXl6j-6AsaQ5pyxLFgRfsjB9WrJrF47CcKhrZtiVkca7Pivo4BSESensDMowZ%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0 application/x-www-form-urlencoded 855
[2020-12-31T08:32:41.2529585+00:00][DBUG][4][IdentityServer4.Hosting.CorsPolicyProvider] CORS request made for path: "/Account/Login" from origin: "null" but was ignored because path was not for an allowed IdentityServer CORS endpoint
[2020-12-31T08:32:41.2546704+00:00][INFO][4][Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware] No CORS policy found for the specified request.
[2020-12-31T08:32:41.2661702+00:00][INFO][4][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T08:32:41.2790959+00:00][INFO][4][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with "{action = \"Login\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EventManager.Identity.STS.Identity.ViewModels.Account.LoginInputModel, System.String)" on controller "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>" ("EventManager.Identity.STS.Identity").
[2020-12-31T08:32:41.3339141+00:00][DBUG][4][IdentityServer4.Validation.AuthorizeRequestValidator] Start authorize request protocol validation
[2020-12-31T08:32:41.6113940+00:00][DBUG][4][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T08:32:41.6120345+00:00][DBUG][4][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T08:32:41.6128714+00:00][DBUG][4][IdentityServer4.Validation.AuthorizeRequestValidator] Checking for PKCE parameters
[2020-12-31T08:32:41.6730998+00:00][DBUG][12][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T08:32:41.7029827+00:00][DBUG][15][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] API resources in database
[2020-12-31T08:32:41.7325772+00:00][DBUG][4][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] scopes in database
[2020-12-31T08:32:41.7335064+00:00][DBUG][4][IdentityServer4.Validation.AuthorizeRequestValidator] Calling into custom validator: "IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator"
[2020-12-31T08:32:42.1523364+00:00][DBUG][15][IdentityServer4.Hosting.IdentityServerAuthenticationService] Augmenting SignInContext
[2020-12-31T08:32:42.1571266+00:00][DBUG][15][IdentityServer4.Hosting.IdentityServerAuthenticationService] Adding idp claim with value: "local"
[2020-12-31T08:32:42.1582745+00:00][DBUG][15][IdentityServer4.Hosting.IdentityServerAuthenticationService] Adding auth_time claim with value: "1609403562"
[2020-12-31T08:32:42.1761173+00:00][INFO][15][Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler] AuthenticationScheme: "Identity.Application" signed in.
[2020-12-31T08:32:42.1883167+00:00][INFO][15][IdentityServer4.Events.DefaultEventService] UserLoginSuccessEvent { Username: "admin", Provider: null, ProviderUserId: null, SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", DisplayName: "admin", Endpoint: "UI", ClientId: null, Category: "Authentication", Name: "User Login Success", EventType: Success, Id: 1000, Message: null, ActivityId: "0HM5DCQ759MV6:00000002", TimeStamp: 12/31/2020 08:32:42, ProcessId: 9281, LocalIpAddress: "::ffff:172.19.0.7:50003", RemoteIpAddress: "172.19.0.1" }
[2020-12-31T08:32:42.1965713+00:00][INFO][15][Microsoft.AspNetCore.Mvc.Infrastructure.RedirectResultExecutor] Executing RedirectResult, redirecting to "/connect/authorize/callback?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=UjJ6Gye9oHBkGmLNAeAsO1Thi4AO4AFzRyPtatFPzUM&code_challenge_method=S256&response_mode=form_post&state=CfDJ8HbmgoufA85PoVB4uWHKwLdet73dwNsqrFg1MO79Itkujn0VMqR1hF1lBE4nVxpe0dNpQVF_1Dcigoho3UrO_TZH2v0Bmt2750V8D-IhXdjjcFFcXl6j-6AsaQ5pyxLFgRfsjB9WrJrF47CcKhrZtiVkca7Pivo4BSESensDMowZ&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0".
[2020-12-31T08:32:42.1978190+00:00][INFO][15][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)" in 917.9648ms
[2020-12-31T08:32:42.1985257+00:00][INFO][15][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T08:32:42.1993351+00:00][INFO][15][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "POST" "/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fauth.em.host%252Fadmin%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3DUjJ6Gye9oHBkGmLNAeAsO1Thi4AO4AFzRyPtatFPzUM%26code_challenge_method%3DS256%26response_mode%3Dform_post%26state%3DCfDJ8HbmgoufA85PoVB4uWHKwLdet73dwNsqrFg1MO79Itkujn0VMqR1hF1lBE4nVxpe0dNpQVF_1Dcigoho3UrO_TZH2v0Bmt2750V8D-IhXdjjcFFcXl6j-6AsaQ5pyxLFgRfsjB9WrJrF47CcKhrZtiVkca7Pivo4BSESensDMowZ%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0" responded 302 in 953.8233 ms
[2020-12-31T08:32:42.2006367+00:00][INFO][15][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 POST https://auth.em.host/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Durn%253Aem%253Aclient%253Amvc%26redirect_uri%3Dhttps%253A%252F%252Fauth.em.host%252Fadmin%252Fsignin-oidc%26response_type%3Dcode%26scope%3Dopenid%2520profile%2520email%2520roles%26code_challenge%3DUjJ6Gye9oHBkGmLNAeAsO1Thi4AO4AFzRyPtatFPzUM%26code_challenge_method%3DS256%26response_mode%3Dform_post%26state%3DCfDJ8HbmgoufA85PoVB4uWHKwLdet73dwNsqrFg1MO79Itkujn0VMqR1hF1lBE4nVxpe0dNpQVF_1Dcigoho3UrO_TZH2v0Bmt2750V8D-IhXdjjcFFcXl6j-6AsaQ5pyxLFgRfsjB9WrJrF47CcKhrZtiVkca7Pivo4BSESensDMowZ%26x-client-SKU%3DID_NETSTANDARD2_0%26x-client-ver%3D6.8.0.0 application/x-www-form-urlencoded 855 - 302 0 - 968.2281ms
[2020-12-31T08:32:42.2925764+00:00][INFO][14][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/connect/authorize/callback?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=UjJ6Gye9oHBkGmLNAeAsO1Thi4AO4AFzRyPtatFPzUM&code_challenge_method=S256&response_mode=form_post&state=CfDJ8HbmgoufA85PoVB4uWHKwLdet73dwNsqrFg1MO79Itkujn0VMqR1hF1lBE4nVxpe0dNpQVF_1Dcigoho3UrO_TZH2v0Bmt2750V8D-IhXdjjcFFcXl6j-6AsaQ5pyxLFgRfsjB9WrJrF47CcKhrZtiVkca7Pivo4BSESensDMowZ&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0 - -
[2020-12-31T08:32:42.3029079+00:00][DBUG][14][IdentityServer4.Hosting.EndpointRouter] Request path "/connect/authorize/callback" matched to endpoint type "Authorize"
[2020-12-31T08:32:42.3062474+00:00][DBUG][14][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Authorize", successfully created handler: "IdentityServer4.Endpoints.AuthorizeCallbackEndpoint"
[2020-12-31T08:32:42.3069545+00:00][INFO][14][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeCallbackEndpoint" for "/connect/authorize/callback"
[2020-12-31T08:32:42.3139258+00:00][DBUG][14][IdentityServer4.Endpoints.AuthorizeCallbackEndpoint] Start authorize callback request
[2020-12-31T08:32:42.3197961+00:00][DBUG][14][IdentityServer4.Endpoints.AuthorizeCallbackEndpoint] User in authorize request: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b"
[2020-12-31T08:32:42.3204277+00:00][DBUG][14][IdentityServer4.Validation.AuthorizeRequestValidator] Start authorize request protocol validation
[2020-12-31T08:32:42.4250406+00:00][DBUG][12][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T08:32:42.4258049+00:00][DBUG][12][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T08:32:42.4267148+00:00][DBUG][12][IdentityServer4.Validation.AuthorizeRequestValidator] Checking for PKCE parameters
[2020-12-31T08:32:42.4447032+00:00][DBUG][12][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T08:32:42.4736735+00:00][DBUG][18][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] API resources in database
[2020-12-31T08:32:42.4839931+00:00][DBUG][12][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] scopes in database
[2020-12-31T08:32:42.4846588+00:00][DBUG][12][IdentityServer4.Validation.AuthorizeRequestValidator] Calling into custom validator: "IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator"
[2020-12-31T08:32:42.4858249+00:00][DBUG][12][IdentityServer4.Endpoints.AuthorizeCallbackEndpoint] ValidatedAuthorizeRequest
AuthorizeRequestValidationLog { ClientId: "urn:em:client:mvc", ClientName: "Event Manager Identity Admin UI", RedirectUri: "https://auth.em.host/admin/signin-oidc", AllowedRedirectUris: ["https://auth.em.host/admin/signin-oidc"], SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", ResponseType: "code", ResponseMode: "form_post", GrantType: "authorization_code", RequestedScopes: "openid profile email roles", State: "CfDJ8HbmgoufA85PoVB4uWHKwLdet73dwNsqrFg1MO79Itkujn0VMqR1hF1lBE4nVxpe0dNpQVF_1Dcigoho3UrO_TZH2v0Bmt2750V8D-IhXdjjcFFcXl6j-6AsaQ5pyxLFgRfsjB9WrJrF47CcKhrZtiVkca7Pivo4BSESensDMowZ", UiLocales: null, Nonce: null, AuthenticationContextReferenceClasses: null, DisplayMode: null, PromptMode: "", MaxAge: null, LoginHint: null, SessionId: "3B5263C10073405C364E9A0B7955FD5B", Raw: [("client_id": "urn:em:client:mvc"), ("redirect_uri": "https://auth.em.host/admin/signin-oidc"), ("response_type": "code"), ("scope": "openid profile email roles"), ("code_challenge": "UjJ6Gye9oHBkGmLNAeAsO1Thi4AO4AFzRyPtatFPzUM"), ("code_challenge_method": "S256"), ("response_mode": "form_post"), ("state": "CfDJ8HbmgoufA85PoVB4uWHKwLdet73dwNsqrFg1MO79Itkujn0VMqR1hF1lBE4nVxpe0dNpQVF_1Dcigoho3UrO_TZH2v0Bmt2750V8D-IhXdjjcFFcXl6j-6AsaQ5pyxLFgRfsjB9WrJrF47CcKhrZtiVkca7Pivo4BSESensDMowZ"), ("x-client-SKU": "ID_NETSTANDARD2_0"), ("x-client-ver": "6.8.0.0")] }
[2020-12-31T08:32:42.5520367+00:00][DBUG][13][IdentityServer4.Services.DefaultConsentService] Client is configured to not require consent, no consent is required
[2020-12-31T08:32:42.5635282+00:00][DBUG][13][IdentityServer4.ResponseHandling.AuthorizeResponseGenerator] Creating Authorization Code Flow response.
[2020-12-31T08:32:42.6959585+00:00][DBUG][12][IdentityServer4.EntityFramework.Stores.PersistedGrantStore] "ob3MPz3NgG/CNZwsZ1+u/xlmhoxFbvPG86T7wQri7wU=" not found in database
[2020-12-31T08:32:42.9165464+00:00][INFO][4][IdentityServer4.Events.DefaultEventService] TokenIssuedSuccessEvent { ClientId: "urn:em:client:mvc", ClientName: "Event Manager Identity Admin UI", RedirectUri: "https://auth.em.host/admin/signin-oidc", Endpoint: "Authorize", SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", Scopes: "openid profile email roles", GrantType: "authorization_code", Tokens: [Token { TokenType: "code", TokenValue: "****13FE" }], Category: "Token", Name: "Token Issued Success", EventType: Success, Id: 2000, Message: null, ActivityId: "0HM5DCQ759MV7:00000002", TimeStamp: 12/31/2020 08:32:42, ProcessId: 9281, LocalIpAddress: "::ffff:172.19.0.7:50003", RemoteIpAddress: "172.19.0.1" }
[2020-12-31T08:32:42.9242122+00:00][DBUG][4][IdentityServer4.Endpoints.AuthorizeCallbackEndpoint] Authorize endpoint response
AuthorizeResponseLog { SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", ClientId: "urn:em:client:mvc", RedirectUri: "https://auth.em.host/admin/signin-oidc", State: "CfDJ8HbmgoufA85PoVB4uWHKwLdet73dwNsqrFg1MO79Itkujn0VMqR1hF1lBE4nVxpe0dNpQVF_1Dcigoho3UrO_TZH2v0Bmt2750V8D-IhXdjjcFFcXl6j-6AsaQ5pyxLFgRfsjB9WrJrF47CcKhrZtiVkca7Pivo4BSESensDMowZ", Scope: "openid profile email roles", Error: null, ErrorDescription: null }
[2020-12-31T08:32:42.9350895+00:00][DBUG][4][IdentityServer4.Hosting.IdentityServerAuthenticationService] Augmenting SignInContext
[2020-12-31T08:32:42.9397435+00:00][INFO][4][Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler] AuthenticationScheme: "Identity.Application" signed in.
[2020-12-31T08:32:42.9474544+00:00][INFO][4][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/connect/authorize/callback?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=UjJ6Gye9oHBkGmLNAeAsO1Thi4AO4AFzRyPtatFPzUM&code_challenge_method=S256&response_mode=form_post&state=CfDJ8HbmgoufA85PoVB4uWHKwLdet73dwNsqrFg1MO79Itkujn0VMqR1hF1lBE4nVxpe0dNpQVF_1Dcigoho3UrO_TZH2v0Bmt2750V8D-IhXdjjcFFcXl6j-6AsaQ5pyxLFgRfsjB9WrJrF47CcKhrZtiVkca7Pivo4BSESensDMowZ&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0" responded 200 in 653.5168 ms
[2020-12-31T08:32:42.9483474+00:00][INFO][4][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/connect/authorize/callback?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=UjJ6Gye9oHBkGmLNAeAsO1Thi4AO4AFzRyPtatFPzUM&code_challenge_method=S256&response_mode=form_post&state=CfDJ8HbmgoufA85PoVB4uWHKwLdet73dwNsqrFg1MO79Itkujn0VMqR1hF1lBE4nVxpe0dNpQVF_1Dcigoho3UrO_TZH2v0Bmt2750V8D-IhXdjjcFFcXl6j-6AsaQ5pyxLFgRfsjB9WrJrF47CcKhrZtiVkca7Pivo4BSESensDMowZ&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0 - - - 200 - text/html;+charset=UTF-8 655.7761ms
[2020-12-31T08:32:43.5797579+00:00][INFO][12][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 POST https://auth.em.host/connect/token application/x-www-form-urlencoded 286
[2020-12-31T08:32:43.5812948+00:00][DBUG][12][IdentityServer4.Hosting.EndpointRouter] Request path "/connect/token" matched to endpoint type "Token"
[2020-12-31T08:32:43.5893087+00:00][DBUG][12][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Token", successfully created handler: "IdentityServer4.Endpoints.TokenEndpoint"
[2020-12-31T08:32:43.5907892+00:00][INFO][12][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.TokenEndpoint" for "/connect/token"
[2020-12-31T08:32:43.6006704+00:00][DBUG][12][IdentityServer4.Endpoints.TokenEndpoint] Start token request.
[2020-12-31T08:32:43.6052815+00:00][DBUG][12][IdentityServer4.Validation.ClientSecretValidator] Start client validation
[2020-12-31T08:32:43.6150499+00:00][DBUG][12][IdentityServer4.Validation.BasicAuthenticationSecretParser] Start parsing Basic Authentication secret
[2020-12-31T08:32:43.6258661+00:00][DBUG][12][IdentityServer4.Validation.PostBodySecretParser] Start parsing for secret in post body
[2020-12-31T08:32:43.6330013+00:00][DBUG][12][IdentityServer4.Validation.ISecretsListParser] Parser found secret: "PostBodySecretParser"
[2020-12-31T08:32:43.6355949+00:00][DBUG][12][IdentityServer4.Validation.ISecretsListParser] Secret id found: "urn:em:client:mvc"
[2020-12-31T08:32:43.8202096+00:00][DBUG][18][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T08:32:43.8211379+00:00][DBUG][18][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T08:32:43.8350802+00:00][DBUG][18][IdentityServer4.Validation.ISecretsListValidator] Secret validator success: "HashedSharedSecretValidator"
[2020-12-31T08:32:43.8356990+00:00][DBUG][18][IdentityServer4.Validation.ClientSecretValidator] Client validation success
[2020-12-31T08:32:43.8416123+00:00][INFO][18][IdentityServer4.Events.DefaultEventService] ClientAuthenticationSuccessEvent { ClientId: "urn:em:client:mvc", AuthenticationMethod: "SharedSecret", Category: "Authentication", Name: "Client Authentication Success", EventType: Success, Id: 1010, Message: null, ActivityId: "0HM5DCQ759MV8:00000002", TimeStamp: 12/31/2020 08:32:43, ProcessId: 9281, LocalIpAddress: "::ffff:172.19.0.7:50003", RemoteIpAddress: "172.21.0.4" }
[2020-12-31T08:32:43.8479702+00:00][DBUG][18][IdentityServer4.Validation.TokenRequestValidator] Start token request validation
[2020-12-31T08:32:43.8575950+00:00][DBUG][18][IdentityServer4.Validation.TokenRequestValidator] Start validation of authorization code token request
[2020-12-31T08:32:43.9478857+00:00][DBUG][4][IdentityServer4.EntityFramework.Stores.PersistedGrantStore] "ob3MPz3NgG/CNZwsZ1+u/xlmhoxFbvPG86T7wQri7wU=" found in database: True
[2020-12-31T08:32:44.0348373+00:00][DBUG][18][IdentityServer4.EntityFramework.Stores.PersistedGrantStore] removing "ob3MPz3NgG/CNZwsZ1+u/xlmhoxFbvPG86T7wQri7wU=" persisted grant from database
[2020-12-31T08:32:44.1133582+00:00][DBUG][12][IdentityServer4.Validation.TokenRequestValidator] Client required a proof key for code exchange. Starting PKCE validation
[2020-12-31T08:32:44.1314810+00:00][DBUG][12][IdentityServer4.Validation.TokenRequestValidator] Validation of authorization code token request success
[2020-12-31T08:32:44.1391599+00:00][INFO][12][IdentityServer4.Validation.TokenRequestValidator] Token request validation success, TokenRequestValidationLog { ClientId: "urn:em:client:mvc", ClientName: "Event Manager Identity Admin UI", GrantType: "authorization_code", Scopes: null, AuthorizationCode: "****13FE", RefreshToken: "********", UserName: null, AuthenticationContextReferenceClasses: null, Tenant: null, IdP: null, Raw: [("client_id": "urn:em:client:mvc"), ("client_secret": "***REDACTED***"), ("code": "A2CBDC378D4CB8BF271FAA487DF6E6307E14A1D0073D0A68E2FEF9155C4A13FE"), ("grant_type": "authorization_code"), ("redirect_uri": "https://auth.em.host/admin/signin-oidc"), ("code_verifier": "E2s-2yOzM_hlfaWsdKIuDoOPBdQZ95_iOFu1Jx7PGDk")] }
[2020-12-31T08:32:44.2815408+00:00][DBUG][11][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T08:32:44.2822165+00:00][DBUG][11][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T08:32:44.3024577+00:00][DBUG][18][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T08:32:44.3158494+00:00][DBUG][18][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] API resources in database
[2020-12-31T08:32:44.3270316+00:00][DBUG][15][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] scopes in database
[2020-12-31T08:32:44.3442180+00:00][DBUG][15][IdentityServer4.Services.DefaultClaimsService] Getting claims for access token for client: "urn:em:client:mvc"
[2020-12-31T08:32:44.3498382+00:00][DBUG][15][IdentityServer4.Services.DefaultClaimsService] Getting claims for access token for subject: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b"
[2020-12-31T08:32:44.6873687+00:00][DBUG][15][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T08:32:44.6880615+00:00][DBUG][15][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T08:32:44.7415035+00:00][DBUG][18][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T08:32:44.7531943+00:00][DBUG][5][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] API resources in database
[2020-12-31T08:32:44.7880976+00:00][DBUG][15][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] scopes in database
[2020-12-31T08:32:44.7975365+00:00][DBUG][15][IdentityServer4.Services.DefaultClaimsService] Getting claims for identity token for subject: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b" and client: "urn:em:client:mvc"
[2020-12-31T08:32:44.7985045+00:00][DBUG][15][IdentityServer4.Services.DefaultClaimsService] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
[2020-12-31T08:32:44.8104547+00:00][INFO][15][IdentityServer4.Events.DefaultEventService] TokenIssuedSuccessEvent { ClientId: "urn:em:client:mvc", ClientName: "Event Manager Identity Admin UI", RedirectUri: null, Endpoint: "Token", SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", Scopes: "openid profile email roles", GrantType: "authorization_code", Tokens: [Token { TokenType: "id_token", TokenValue: "****Fshw" }, Token { TokenType: "access_token", TokenValue: "****1aXQ" }], Category: "Token", Name: "Token Issued Success", EventType: Success, Id: 2000, Message: null, ActivityId: "0HM5DCQ759MV8:00000002", TimeStamp: 12/31/2020 08:32:44, ProcessId: 9281, LocalIpAddress: "::ffff:172.19.0.7:50003", RemoteIpAddress: "172.21.0.4" }
[2020-12-31T08:32:44.8121661+00:00][DBUG][15][IdentityServer4.Endpoints.TokenEndpoint] Token request success.
[2020-12-31T08:32:44.8318697+00:00][INFO][15][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "POST" "/connect/token" responded 200 in 1251.3485 ms
[2020-12-31T08:32:44.8326934+00:00][INFO][15][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 POST https://auth.em.host/connect/token application/x-www-form-urlencoded 286 - 200 - application/json;+charset=UTF-8 1252.9096ms
[2020-12-31T08:32:45.0223278+00:00][INFO][15][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/connect/userinfo - -
[2020-12-31T08:32:45.0245071+00:00][DBUG][15][IdentityServer4.Hosting.EndpointRouter] Request path "/connect/userinfo[2020-12-31T08:53:41.4710231+00:00][INFO][1][IdentityServer4.Startup] Starting IdentityServer4 version "4.1.1+cebd52f5bc61bdefc262fd20739d4d087c6f961f"
[2020-12-31T08:53:42.5479034+00:00][DBUG][1][IdentityServer4.Startup] Custom IssuerUri set to "https://auth.em.host"
[2020-12-31T08:53:42.6192641+00:00][INFO][1][IdentityServer4.Startup] Using the default authentication scheme "Identity.Application" for IdentityServer
[2020-12-31T08:53:42.6233252+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.Application" as default ASP.NET Core scheme for authentication
[2020-12-31T08:53:42.6248688+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.External" as default ASP.NET Core scheme for sign-in
[2020-12-31T08:53:42.6369788+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.External" as default ASP.NET Core scheme for sign-out
[2020-12-31T08:53:42.6382802+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.Application" as default ASP.NET Core scheme for challenge
[2020-12-31T08:53:42.6391025+00:00][DBUG][1][IdentityServer4.Startup] Using "Identity.Application" as default ASP.NET Core scheme for forbid
[2020-12-31T08:53:44.8421529+00:00][INFO][1][Microsoft.Hosting.Lifetime] Now listening on: "https://[::]:50003"
[2020-12-31T08:53:44.8459197+00:00][INFO][1][Microsoft.Hosting.Lifetime] Application started. Press Ctrl+C to shut down.
[2020-12-31T08:53:44.8585933+00:00][INFO][1][Microsoft.Hosting.Lifetime] Hosting environment: "Development"
[2020-12-31T08:53:44.8594549+00:00][INFO][1][Microsoft.Hosting.Lifetime] Content root path: "/app"
[2020-12-31T08:54:27.6453109+00:00][INFO][13][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/favicon.ico - -
[2020-12-31T08:54:27.7568576+00:00][INFO][14][Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware] Sending file. Request path: '"/favicon.ico"'. Physical path: '"/app/wwwroot/favicon.ico"'
[2020-12-31T08:54:27.7647070+00:00][INFO][14][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/favicon.ico" responded 200 in 104.3555 ms
[2020-12-31T08:54:27.7712245+00:00][INFO][14][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/favicon.ico - - - 200 4286 image/x-icon 132.7993ms
[2020-12-31T08:54:37.7188628+00:00][INFO][15][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/Configuration/Clients - -
[2020-12-31T08:54:37.7620265+00:00][DBUG][15][IdentityServer4.Startup] Login Url: "/Account/Login"
[2020-12-31T08:54:37.7625857+00:00][DBUG][15][IdentityServer4.Startup] Login Return Url Parameter: "ReturnUrl"
[2020-12-31T08:54:37.7631867+00:00][DBUG][15][IdentityServer4.Startup] Logout Url: "/Account/Logout"
[2020-12-31T08:54:37.7636557+00:00][DBUG][15][IdentityServer4.Startup] ConsentUrl Url: "/consent"
[2020-12-31T08:54:37.7641364+00:00][DBUG][15][IdentityServer4.Startup] Consent Return Url Parameter: "returnUrl"
[2020-12-31T08:54:37.7646662+00:00][DBUG][15][IdentityServer4.Startup] Error Url: "/home/error"
[2020-12-31T08:54:37.7660450+00:00][DBUG][15][IdentityServer4.Startup] Error Id Parameter: "errorId"
[2020-12-31T08:54:37.9327033+00:00][INFO][15][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/Configuration/Clients" responded 404 in 211.6715 ms
[2020-12-31T08:54:37.9583918+00:00][INFO][15][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/Configuration/Clients - - - 404 0 - 239.4240ms
[2020-12-31T08:54:50.5747606+00:00][INFO][14][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/Configuration/IdentityResources - -
[2020-12-31T08:54:50.5829259+00:00][INFO][14][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/Configuration/IdentityResources" responded 404 in 7.3237 ms
[2020-12-31T08:54:50.5841204+00:00][INFO][14][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/Configuration/IdentityResources - - - 404 0 - 9.2954ms
[2020-12-31T08:54:59.0517353+00:00][INFO][19][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/Account/Logout - -
[2020-12-31T08:54:59.0672486+00:00][INFO][19][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Logout (EventManager.Identity.STS.Identity)"'
[2020-12-31T08:54:59.1091659+00:00][INFO][19][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with "{action = \"Logout\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout(System.String)" on controller "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>" ("EventManager.Identity.STS.Identity").
[2020-12-31T08:54:59.3849497+00:00][INFO][19][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executing ViewResult, running view "LoggedOut".
[2020-12-31T08:55:00.2195303+00:00][INFO][19][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executed ViewResult - view "LoggedOut" executed in 839.4699ms.
[2020-12-31T08:55:00.2231702+00:00][INFO][19][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Logout (EventManager.Identity.STS.Identity)" in 1111.991ms
[2020-12-31T08:55:00.2240476+00:00][INFO][19][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Logout (EventManager.Identity.STS.Identity)"'
[2020-12-31T08:55:00.2247844+00:00][INFO][19][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/Account/Logout" responded 200 in 1172.1508 ms
[2020-12-31T08:55:00.2286716+00:00][INFO][19][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/Account/Logout - - - 200 - text/html;+charset=utf-8 1176.8873ms
[2020-12-31T08:55:18.8856021+00:00][INFO][16][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/ - -
[2020-12-31T08:55:18.8877936+00:00][INFO][16][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint '"EventManager.Identity.STS.Identity.Controllers.HomeController.Index (EventManager.Identity.STS.Identity)"'
[2020-12-31T08:55:18.8989033+00:00][INFO][16][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with "{action = \"Index\", controller = \"Home\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Index()" on controller "EventManager.Identity.STS.Identity.Controllers.HomeController" ("EventManager.Identity.STS.Identity").
[2020-12-31T08:55:18.9052190+00:00][INFO][16][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executing ViewResult, running view "Index".
[2020-12-31T08:55:18.9352065+00:00][INFO][16][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executed ViewResult - view "Index" executed in 31.8724ms.
[2020-12-31T08:55:18.9373583+00:00][INFO][16][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action "EventManager.Identity.STS.Identity.Controllers.HomeController.Index (EventManager.Identity.STS.Identity)" in 35.6653ms
[2020-12-31T08:55:18.9388689+00:00][INFO][16][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint '"EventManager.Identity.STS.Identity.Controllers.HomeController.Index (EventManager.Identity.STS.Identity)"'
[2020-12-31T08:55:18.9403912+00:00][INFO][16][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/" responded 200 in 53.8609 ms
[2020-12-31T08:55:18.9422860+00:00][INFO][16][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/ - - - 200 - text/html;+charset=utf-8 56.7038ms
[2020-12-31T08:55:23.5563953+00:00][INFO][16][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/Account/Login - -
[2020-12-31T08:55:23.5664784+00:00][INFO][16][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T08:55:23.5751534+00:00][INFO][16][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with "{action = \"Login\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String)" on controller "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>" ("EventManager.Identity.STS.Identity").
[2020-12-31T08:55:23.6084818+00:00][INFO][16][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executing ViewResult, running view "Login".
[2020-12-31T08:55:23.6942766+00:00][INFO][16][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executed ViewResult - view "Login" executed in 87.185ms.
[2020-12-31T08:55:23.6950434+00:00][INFO][16][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)" in 118.7286ms
[2020-12-31T08:55:23.7000389+00:00][INFO][16][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T08:55:23.7022438+00:00][INFO][16][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/Account/Login" responded 200 in 144.6344 ms
[2020-12-31T08:55:23.7040943+00:00][INFO][16][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/Account/Login - - - 200 - text/html;+charset=utf-8 147.5074ms
[2020-12-31T08:55:33.8380060+00:00][INFO][9][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 POST https://auth.em.host/Account/Login application/x-www-form-urlencoded 261
[2020-12-31T08:55:33.8448781+00:00][DBUG][9][IdentityServer4.Hosting.CorsPolicyProvider] CORS request made for path: "/Account/Login" from origin: "null" but was ignored because path was not for an allowed IdentityServer CORS endpoint
[2020-12-31T08:55:33.8528496+00:00][INFO][9][Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware] No CORS policy found for the specified request.
[2020-12-31T08:55:33.8567903+00:00][INFO][9][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T08:55:33.8723738+00:00][INFO][9][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with "{action = \"Login\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EventManager.Identity.STS.Identity.ViewModels.Account.LoginInputModel, System.String)" on controller "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>" ("EventManager.Identity.STS.Identity").
[2020-12-31T08:55:34.8214817+00:00][DBUG][9][IdentityServer4.Hosting.IdentityServerAuthenticationService] Augmenting SignInContext
[2020-12-31T08:55:34.8284904+00:00][DBUG][9][IdentityServer4.Hosting.IdentityServerAuthenticationService] Adding idp claim with value: "local"
[2020-12-31T08:55:34.8292747+00:00][DBUG][9][IdentityServer4.Hosting.IdentityServerAuthenticationService] Adding auth_time claim with value: "1609404934"
[2020-12-31T08:55:34.8557249+00:00][INFO][9][Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler] AuthenticationScheme: "Identity.Application" signed in.
[2020-12-31T08:55:34.8804030+00:00][INFO][9][IdentityServer4.Events.DefaultEventService] UserLoginSuccessEvent { Username: "admin", Provider: null, ProviderUserId: null, SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", DisplayName: "admin", Endpoint: "UI", ClientId: null, Category: "Authentication", Name: "User Login Success", EventType: Success, Id: 1000, Message: null, ActivityId: "0HM5DD6MVD4P9:00000002", TimeStamp: 12/31/2020 08:55:34, ProcessId: 25, LocalIpAddress: "::ffff:172.24.0.7:50003", RemoteIpAddress: "172.24.0.1" }
[2020-12-31T08:55:34.9004472+00:00][INFO][9][Microsoft.AspNetCore.Mvc.Infrastructure.RedirectResultExecutor] Executing RedirectResult, redirecting to "/".
[2020-12-31T08:55:34.9073286+00:00][INFO][9][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)" in 1034.2743ms
[2020-12-31T08:55:34.9106159+00:00][INFO][9][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T08:55:34.9252523+00:00][INFO][9][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "POST" "/Account/Login" responded 302 in 1086.5955 ms
[2020-12-31T08:55:34.9285972+00:00][INFO][9][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 POST https://auth.em.host/Account/Login application/x-www-form-urlencoded 261 - 302 0 - 1090.4812ms
[2020-12-31T08:55:34.9933731+00:00][INFO][18][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/ - -
[2020-12-31T08:55:35.0283756+00:00][INFO][18][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint '"EventManager.Identity.STS.Identity.Controllers.HomeController.Index (EventManager.Identity.STS.Identity)"'
[2020-12-31T08:55:35.0310892+00:00][INFO][18][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with "{action = \"Index\", controller = \"Home\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Index()" on controller "EventManager.Identity.STS.Identity.Controllers.HomeController" ("EventManager.Identity.STS.Identity").
[2020-12-31T08:55:35.0338280+00:00][INFO][18][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executing ViewResult, running view "Index".
[2020-12-31T08:55:35.0805118+00:00][INFO][18][Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] Authorization was successful.
[2020-12-31T08:55:35.0938892+00:00][INFO][18][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executed ViewResult - view "Index" executed in 60.1089ms.
[2020-12-31T08:55:35.0960159+00:00][INFO][18][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action "EventManager.Identity.STS.Identity.Controllers.HomeController.Index (EventManager.Identity.STS.Identity)" in 63.1416ms
[2020-12-31T08:55:35.0976052+00:00][INFO][18][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint '"EventManager.Identity.STS.Identity.Controllers.HomeController.Index (EventManager.Identity.STS.Identity)"'
[2020-12-31T08:55:35.0988948+00:00][INFO][18][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/" responded 200 in 100.3333 ms
[2020-12-31T08:55:35.1013950+00:00][INFO][18][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/ - - - 200 - text/html;+charset=utf-8 107.9760ms
[2020-12-31T08:55:52.1092368+00:00][INFO][14][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/Identity/Users - -
[2020-12-31T08:55:52.1130661+00:00][INFO][14][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/Identity/Users" responded 404 in 3.2818 ms
[2020-12-31T08:55:52.1157281+00:00][INFO][14][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/Identity/Users - - - 404 0 - 4.7835ms
[2020-12-31T08:56:53.4334914+00:00][INFO][22][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/Log/ErrorsLog - -
[2020-12-31T08:56:53.4431742+00:00][INFO][22][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/Log/ErrorsLog" responded 404 in 9.0708 ms
[2020-12-31T08:56:53.4438893+00:00][INFO][22][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/Log/ErrorsLog - - - 404 0 - 10.4217ms
[2020-12-31T08:57:07.2292445+00:00][INFO][24][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/Configuration/ApiScopes - -
[2020-12-31T08:57:07.2368868+00:00][INFO][24][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/Configuration/ApiScopes" responded 404 in 2.7409 ms
[2020-12-31T08:57:07.2389985+00:00][INFO][24][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/Configuration/ApiScopes - - - 404 0 - 9.5808ms
[2020-12-31T08:57:15.1024993+00:00][INFO][27][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/Identity/Roles - -
[2020-12-31T08:57:15.1075995+00:00][INFO][27][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/Identity/Roles" responded 404 in 3.5970 ms
[2020-12-31T08:57:15.1089200+00:00][INFO][27][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/Identity/Roles - - - 404 0 - 6.3397ms
[2020-12-31T08:57:21.7022735+00:00][INFO][26][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/Grant/PersistedGrants - -
[2020-12-31T08:57:21.7118016+00:00][INFO][26][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/Grant/PersistedGrants" responded 404 in 8.9651 ms
[2020-12-31T08:57:21.7132957+00:00][INFO][26][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/Grant/PersistedGrants - - - 404 0 - 10.8824ms
[2020-12-31T09:16:40.6345317+00:00][INFO][50][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/favicon.ico - -
[2020-12-31T09:16:40.6924507+00:00][INFO][51][Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware] Sending file. Request path: '"/favicon.ico"'. Physical path: '"/app/wwwroot/favicon.ico"'
[2020-12-31T09:16:40.7036979+00:00][INFO][51][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/favicon.ico" responded 200 in 57.8508 ms
[2020-12-31T09:16:40.7073107+00:00][INFO][51][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/favicon.ico - - - 200 4286 image/x-icon 72.5144ms
[2020-12-31T09:17:23.1111368+00:00][INFO][49][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/images/loading.gif - -
[2020-12-31T09:17:23.1859461+00:00][INFO][49][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/images/loading.gif" responded 404 in 60.9289 ms
[2020-12-31T09:17:23.1942404+00:00][INFO][49][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/images/loading.gif - - - 404 0 - 76.0911ms
[2020-12-31T09:19:44.2546123+00:00][INFO][51][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/.well-known/openid-configuration - -
[2020-12-31T09:19:44.2575421+00:00][DBUG][51][IdentityServer4.Hosting.EndpointRouter] Request path "/.well-known/openid-configuration" matched to endpoint type "Discovery"
[2020-12-31T09:19:44.2678093+00:00][DBUG][51][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Discovery", successfully created handler: "IdentityServer4.Endpoints.DiscoveryEndpoint"
[2020-12-31T09:19:44.2689070+00:00][INFO][51][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
[2020-12-31T09:19:44.2742462+00:00][DBUG][51][IdentityServer4.Endpoints.DiscoveryEndpoint] Start discovery request
[2020-12-31T09:19:44.6639527+00:00][WARN][51][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T09:19:45.0990174+00:00][WARN][57][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T09:19:45.1685189+00:00][WARN][52][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T09:19:45.7690873+00:00][DBUG][48][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email", "address", "urn:em:api:scope"] as all scopes, and ["urn:em:api"] as API resources
[2020-12-31T09:19:45.8305142+00:00][INFO][48][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/.well-known/openid-configuration" responded 200 in 1575.2665 ms
[2020-12-31T09:19:45.8314131+00:00][INFO][48][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 1576.7490ms
[2020-12-31T09:19:46.0615865+00:00][INFO][52][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/.well-known/openid-configuration/jwks - -
[2020-12-31T09:19:46.0633067+00:00][DBUG][52][IdentityServer4.Hosting.EndpointRouter] Request path "/.well-known/openid-configuration/jwks" matched to endpoint type "Discovery"
[2020-12-31T09:19:46.0663535+00:00][DBUG][52][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Discovery", successfully created handler: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint"
[2020-12-31T09:19:46.0686020+00:00][INFO][52][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
[2020-12-31T09:19:46.0730355+00:00][DBUG][52][IdentityServer4.Endpoints.DiscoveryKeyEndpoint] Start key discovery request
[2020-12-31T09:19:46.1106598+00:00][INFO][52][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/.well-known/openid-configuration/jwks" responded 200 in 48.5362 ms
[2020-12-31T09:19:46.1114973+00:00][INFO][52][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 49.8488ms
[2020-12-31T09:19:46.2669144+00:00][INFO][57][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/connect/endsession?post_logout_redirect_uri=https%3A%2F%2Fauth.em.host%2Fsignout-callback-oidc&id_token_hint=eyJhbGciOiJSUzI1NiIsImtpZCI6IkE1NEYyRjNGQTAwOTY0QjZEODIyOUYzRDVGREI5MEJGMURBMDhGQzRSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6InBVOHZQNkFKWkxiWUlwODlYOXVRdngyZ2o4USJ9.eyJuYmYiOjE2MDk0MDM1NjQsImV4cCI6MTYwOTQwMzg2NCwiaXNzIjoiaHR0cHM6Ly9hdXRoLmVtLmhvc3QiLCJhdWQiOiJ1cm46ZW06Y2xpZW50Om12YyIsImlhdCI6MTYwOTQwMzU2NCwiYXRfaGFzaCI6InpZb0h5Mmh6Rk01VThGd1pnVHZJZ0EiLCJzX2hhc2giOiI1dUV5ZHdubldzVXNtS1pVZ01DT09nIiwic2lkIjoiM0I1MjYzQzEwMDczNDA1QzM2NEU5QTBCNzk1NUZENUIiLCJzdWIiOiJjYmU1YjQwYy04ZWI3LTRiYjAtOGE5Yi0yNzdmYWVlMjBkNmIiLCJhdXRoX3RpbWUiOjE2MDk0MDM1NjIsImlkcCI6ImxvY2FsIiwiYW1yIjpbInB3ZCJdfQ.pi5_rjRBtHntcqjJUMqSyJah8C_vgaTublcCaYFkMYYHb7gQWQuGLWfrpetJreJ8_GYZvL9_XKTFfV8AeqwnOh9ddUAmppQZq5hNH5TRu-TM7DBcgbe52Vsh8rPgRGODt6TsBZaQFpkCrjLVLur4wanNyzooUC8KltXZgms3cZfSEDMY302ot2BytQNdTjarnZ9qBHTwhhAE6Ux_CwM6F2a2G7qPf6mfSDu-C2jjxUE4RaF4uL782gLYf4wHxG4LNNNph7_ZWJfwYSDRCSpK1Jw-PBA0gKYwZPwxE-MGKUO3sGn6X-FXdEF9OND-sol94vknqdWKZzwDtxyrtjFshw&state=CfDJ8HbmgoufA85PoVB4uWHKwLfEFAX6RGL67Ac_jK-8PAjbGcppfIL874ObK0QvkBbiLp1AyytOFTdgACCJeBbTD-zq0IQKbd58mNGNtXM6prJqKg-hA9aJoHCGAk_XZ-Xur3c2kdwa85w7SEoIfv5VIXTvIeT2YZAoKRS54HMv4AHo&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0 - -
[2020-12-31T09:19:46.2697017+00:00][DBUG][57][IdentityServer4.Hosting.EndpointRouter] Request path "/connect/endsession" matched to endpoint type "Endsession"
[2020-12-31T09:19:46.2785669+00:00][DBUG][57][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Endsession", successfully created handler: "IdentityServer4.Endpoints.EndSessionEndpoint"
[2020-12-31T09:19:46.2796519+00:00][INFO][57][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.EndSessionEndpoint" for "/connect/endsession"
[2020-12-31T09:19:46.2872944+00:00][DBUG][57][IdentityServer4.Endpoints.EndSessionEndpoint] Processing signout request for "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b"
[2020-12-31T09:19:46.2961969+00:00][DBUG][57][IdentityServer4.Validation.EndSessionRequestValidator] Start end session request validation
[2020-12-31T09:19:46.3059374+00:00][DBUG][57][IdentityServer4.Validation.TokenValidator] Start identity token validation
[2020-12-31T09:19:47.1041559+00:00][DBUG][48][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T09:19:47.1164333+00:00][DBUG][48][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T09:19:47.1223053+00:00][DBUG][48][IdentityServer4.Validation.TokenValidator] Client found: "urn:em:client:mvc" / "Event Manager Identity Admin UI"
[2020-12-31T09:19:47.1830922+00:00][DBUG][48][IdentityServer4.Validation.TokenValidator] Calling into custom token validator: "IdentityServer4.Validation.DefaultCustomTokenValidator"
[2020-12-31T09:19:47.1938621+00:00][DBUG][48][IdentityServer4.Validation.TokenValidator] Token validation success
TokenValidationLog { ClientId: "urn:em:client:mvc", ClientName: "Event Manager Identity Admin UI", ValidateLifetime: False, AccessTokenType: null, ExpectedScope: null, TokenHandle: null, JwtId: null, Claims: [("nbf": 1609403564), ("exp": 1609403864), ("iss": "https://auth.em.host"), ("aud": "urn:em:client:mvc"), ("iat": 1609403564), ("at_hash": "zYoHy2hzFM5U8FwZgTvIgA"), ("s_hash": "5uEydwnnWsUsmKZUgMCOOg"), ("sid": "3B5263C10073405C364E9A0B7955FD5B"), ("sub": "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b"), ("auth_time": 1609403562), ("idp": "local"), ("amr": "pwd")] }
[2020-12-31T09:19:47.2030671+00:00][WARN][48][IdentityServer4.Validation.EndSessionRequestValidator] Invalid PostLogoutRedirectUri: "https://auth.em.host/signout-callback-oidc"
[2020-12-31T09:19:47.2098895+00:00][INFO][48][IdentityServer4.Validation.EndSessionRequestValidator] End session request validation success
EndSessionRequestValidationLog { ClientId: "urn:em:client:mvc", ClientName: "Event Manager Identity Admin UI", SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", PostLogOutUri: null, State: null, Raw: [("post_logout_redirect_uri": "https://auth.em.host/signout-callback-oidc"), ("id_token_hint": "***REDACTED***"), ("state": "CfDJ8HbmgoufA85PoVB4uWHKwLfEFAX6RGL67Ac_jK-8PAjbGcppfIL874ObK0QvkBbiLp1AyytOFTdgACCJeBbTD-zq0IQKbd58mNGNtXM6prJqKg-hA9aJoHCGAk_XZ-Xur3c2kdwa85w7SEoIfv5VIXTvIeT2YZAoKRS54HMv4AHo"), ("x-client-SKU": "ID_NETSTANDARD2_0"), ("x-client-ver": "6.8.0.0")] }
[2020-12-31T09:19:47.2128575+00:00][DBUG][48][IdentityServer4.Endpoints.EndSessionEndpoint] Success validating end session request from "urn:em:client:mvc"
[2020-12-31T09:19:47.2335212+00:00][INFO][48][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/connect/endsession?post_logout_redirect_uri=https%3A%2F%2Fauth.em.host%2Fsignout-callback-oidc&id_token_hint=eyJhbGciOiJSUzI1NiIsImtpZCI6IkE1NEYyRjNGQTAwOTY0QjZEODIyOUYzRDVGREI5MEJGMURBMDhGQzRSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6InBVOHZQNkFKWkxiWUlwODlYOXVRdngyZ2o4USJ9.eyJuYmYiOjE2MDk0MDM1NjQsImV4cCI6MTYwOTQwMzg2NCwiaXNzIjoiaHR0cHM6Ly9hdXRoLmVtLmhvc3QiLCJhdWQiOiJ1cm46ZW06Y2xpZW50Om12YyIsImlhdCI6MTYwOTQwMzU2NCwiYXRfaGFzaCI6InpZb0h5Mmh6Rk01VThGd1pnVHZJZ0EiLCJzX2hhc2giOiI1dUV5ZHdubldzVXNtS1pVZ01DT09nIiwic2lkIjoiM0I1MjYzQzEwMDczNDA1QzM2NEU5QTBCNzk1NUZENUIiLCJzdWIiOiJjYmU1YjQwYy04ZWI3LTRiYjAtOGE5Yi0yNzdmYWVlMjBkNmIiLCJhdXRoX3RpbWUiOjE2MDk0MDM1NjIsImlkcCI6ImxvY2FsIiwiYW1yIjpbInB3ZCJdfQ.pi5_rjRBtHntcqjJUMqSyJah8C_vgaTublcCaYFkMYYHb7gQWQuGLWfrpetJreJ8_GYZvL9_XKTFfV8AeqwnOh9ddUAmppQZq5hNH5TRu-TM7DBcgbe52Vsh8rPgRGODt6TsBZaQFpkCrjLVLur4wanNyzooUC8KltXZgms3cZfSEDMY302ot2BytQNdTjarnZ9qBHTwhhAE6Ux_CwM6F2a2G7qPf6mfSDu-C2jjxUE4RaF4uL782gLYf4wHxG4LNNNph7_ZWJfwYSDRCSpK1Jw-PBA0gKYwZPwxE-MGKUO3sGn6X-FXdEF9OND-sol94vknqdWKZzwDtxyrtjFshw&state=CfDJ8HbmgoufA85PoVB4uWHKwLfEFAX6RGL67Ac_jK-8PAjbGcppfIL874ObK0QvkBbiLp1AyytOFTdgACCJeBbTD-zq0IQKbd58mNGNtXM6prJqKg-hA9aJoHCGAk_XZ-Xur3c2kdwa85w7SEoIfv5VIXTvIeT2YZAoKRS54HMv4AHo&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0" responded 302 in 965.4712 ms
[2020-12-31T09:19:47.2357686+00:00][INFO][48][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/connect/endsession?post_logout_redirect_uri=https%3A%2F%2Fauth.em.host%2Fsignout-callback-oidc&id_token_hint=eyJhbGciOiJSUzI1NiIsImtpZCI6IkE1NEYyRjNGQTAwOTY0QjZEODIyOUYzRDVGREI5MEJGMURBMDhGQzRSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6InBVOHZQNkFKWkxiWUlwODlYOXVRdngyZ2o4USJ9.eyJuYmYiOjE2MDk0MDM1NjQsImV4cCI6MTYwOTQwMzg2NCwiaXNzIjoiaHR0cHM6Ly9hdXRoLmVtLmhvc3QiLCJhdWQiOiJ1cm46ZW06Y2xpZW50Om12YyIsImlhdCI6MTYwOTQwMzU2NCwiYXRfaGFzaCI6InpZb0h5Mmh6Rk01VThGd1pnVHZJZ0EiLCJzX2hhc2giOiI1dUV5ZHdubldzVXNtS1pVZ01DT09nIiwic2lkIjoiM0I1MjYzQzEwMDczNDA1QzM2NEU5QTBCNzk1NUZENUIiLCJzdWIiOiJjYmU1YjQwYy04ZWI3LTRiYjAtOGE5Yi0yNzdmYWVlMjBkNmIiLCJhdXRoX3RpbWUiOjE2MDk0MDM1NjIsImlkcCI6ImxvY2FsIiwiYW1yIjpbInB3ZCJdfQ.pi5_rjRBtHntcqjJUMqSyJah8C_vgaTublcCaYFkMYYHb7gQWQuGLWfrpetJreJ8_GYZvL9_XKTFfV8AeqwnOh9ddUAmppQZq5hNH5TRu-TM7DBcgbe52Vsh8rPgRGODt6TsBZaQFpkCrjLVLur4wanNyzooUC8KltXZgms3cZfSEDMY302ot2BytQNdTjarnZ9qBHTwhhAE6Ux_CwM6F2a2G7qPf6mfSDu-C2jjxUE4RaF4uL782gLYf4wHxG4LNNNph7_ZWJfwYSDRCSpK1Jw-PBA0gKYwZPwxE-MGKUO3sGn6X-FXdEF9OND-sol94vknqdWKZzwDtxyrtjFshw&state=CfDJ8HbmgoufA85PoVB4uWHKwLfEFAX6RGL67Ac_jK-8PAjbGcppfIL874ObK0QvkBbiLp1AyytOFTdgACCJeBbTD-zq0IQKbd58mNGNtXM6prJqKg-hA9aJoHCGAk_XZ-Xur3c2kdwa85w7SEoIfv5VIXTvIeT2YZAoKRS54HMv4AHo&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0 - - - 302 0 - 968.3655ms
[2020-12-31T09:19:47.2835327+00:00][INFO][56][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/Account/Logout?logoutId=CfDJ8HbmgoufA85PoVB4uWHKwLfkGlCvsctVogk65ToGIZciGY0iTtUs1VAlM2CcF5UOkxIgcZoXJejksnc2vRxtZIDOLbfphB6mjgAmNew0Xpu2UgwBusHl5k5dow-bkuJ1hn0hfQ2iJ583PRh4fEg7_rrsocxGWigwEUYJMoDR3j-ESIRx8u15v4yqKBcPMHULWF6LgLgz9fVxNINQLS4sSr3y7XxC_BBf4pW136QjaMYcXTl7fNqv2AD9H1h9WkS9yN-aviE6wX4m1G9oqK7Z1VwIq-9mTeHrL_FeOPK_vEcIH8HT5-xAlx893txlbK4W6DUsek5UcM7u3TTd0Fk4BkNLOXrsUlk1GKMSjEhdcRwUcttg53kERGW3BuzuJiJMjhGMnHASwRZBIpRll2rpRSW3qfJHxB7sAPdjT4mf6FqKGRBZHcYpds1iv10sMJlKryd7zCcNaAf3Gu5IhBpZsmKVg33CtnutSXhzPvDTMSBekQjp0LgIxtyVIzFjW8mvFJbFL_uRAU0GSWuUS175zBA - -
[2020-12-31T09:19:47.2863733+00:00][INFO][56][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Logout (EventManager.Identity.STS.Identity)"'
[2020-12-31T09:19:47.2872054+00:00][INFO][56][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with "{action = \"Logout\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout(System.String)" on controller "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>" ("EventManager.Identity.STS.Identity").
[2020-12-31T09:19:47.3127162+00:00][INFO][56][Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler] AuthenticationScheme: "Identity.Application" signed out.
[2020-12-31T09:19:47.3161862+00:00][INFO][56][Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler] AuthenticationScheme: "Identity.External" signed out.
[2020-12-31T09:19:47.3177525+00:00][INFO][56][Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler] AuthenticationScheme: "Identity.TwoFactorUserId" signed out.
[2020-12-31T09:19:47.3202980+00:00][INFO][56][IdentityServer4.Events.DefaultEventService] UserLogoutSuccessEvent { SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", DisplayName: "admin", Category: "Authentication", Name: "User Logout Success", EventType: Success, Id: 1002, Message: null, ActivityId: "0HM5DD6MVD4PL:00000002", TimeStamp: 12/31/2020 09:19:47, ProcessId: 25, LocalIpAddress: "::ffff:172.24.0.7:50003", RemoteIpAddress: "172.24.0.1" }
[2020-12-31T09:19:47.3274043+00:00][INFO][56][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executing ViewResult, running view "LoggedOut".
[2020-12-31T09:19:47.3358487+00:00][DBUG][56][IdentityServer4.Hosting.IdentityServerMiddleware] SignOutCalled set; processing post-signout session cleanup.
[2020-12-31T09:19:47.3430435+00:00][INFO][56][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executed ViewResult - view "LoggedOut" executed in 19.6893ms.
[2020-12-31T09:19:47.3440381+00:00][INFO][56][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Logout (EventManager.Identity.STS.Identity)" in 55.9864ms
[2020-12-31T09:19:47.3448192+00:00][INFO][56][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Logout (EventManager.Identity.STS.Identity)"'
[2020-12-31T09:19:47.3457842+00:00][INFO][56][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/Account/Logout?logoutId=CfDJ8HbmgoufA85PoVB4uWHKwLfkGlCvsctVogk65ToGIZciGY0iTtUs1VAlM2CcF5UOkxIgcZoXJejksnc2vRxtZIDOLbfphB6mjgAmNew0Xpu2UgwBusHl5k5dow-bkuJ1hn0hfQ2iJ583PRh4fEg7_rrsocxGWigwEUYJMoDR3j-ESIRx8u15v4yqKBcPMHULWF6LgLgz9fVxNINQLS4sSr3y7XxC_BBf4pW136QjaMYcXTl7fNqv2AD9H1h9WkS9yN-aviE6wX4m1G9oqK7Z1VwIq-9mTeHrL_FeOPK_vEcIH8HT5-xAlx893txlbK4W6DUsek5UcM7u3TTd0Fk4BkNLOXrsUlk1GKMSjEhdcRwUcttg53kERGW3BuzuJiJMjhGMnHASwRZBIpRll2rpRSW3qfJHxB7sAPdjT4mf6FqKGRBZHcYpds1iv10sMJlKryd7zCcNaAf3Gu5IhBpZsmKVg33CtnutSXhzPvDTMSBekQjp0LgIxtyVIzFjW8mvFJbFL_uRAU0GSWuUS175zBA" responded 200 in 61.6025 ms
[2020-12-31T09:19:47.3467478+00:00][INFO][56][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/Account/Logout?logoutId=CfDJ8HbmgoufA85PoVB4uWHKwLfkGlCvsctVogk65ToGIZciGY0iTtUs1VAlM2CcF5UOkxIgcZoXJejksnc2vRxtZIDOLbfphB6mjgAmNew0Xpu2UgwBusHl5k5dow-bkuJ1hn0hfQ2iJ583PRh4fEg7_rrsocxGWigwEUYJMoDR3j-ESIRx8u15v4yqKBcPMHULWF6LgLgz9fVxNINQLS4sSr3y7XxC_BBf4pW136QjaMYcXTl7fNqv2AD9H1h9WkS9yN-aviE6wX4m1G9oqK7Z1VwIq-9mTeHrL_FeOPK_vEcIH8HT5-xAlx893txlbK4W6DUsek5UcM7u3TTd0Fk4BkNLOXrsUlk1GKMSjEhdcRwUcttg53kERGW3BuzuJiJMjhGMnHASwRZBIpRll2rpRSW3qfJHxB7sAPdjT4mf6FqKGRBZHcYpds1iv10sMJlKryd7zCcNaAf3Gu5IhBpZsmKVg33CtnutSXhzPvDTMSBekQjp0LgIxtyVIzFjW8mvFJbFL_uRAU0GSWuUS175zBA - - - 200 - text/html;+charset=utf-8 63.2079ms
[2020-12-31T09:19:55.8303332+00:00][INFO][49][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/ - -
[2020-12-31T09:19:55.8326163+00:00][INFO][49][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint '"EventManager.Identity.STS.Identity.Controllers.HomeController.Index (EventManager.Identity.STS.Identity)"'
[2020-12-31T09:19:55.8336317+00:00][INFO][49][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with "{action = \"Index\", controller = \"Home\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Index()" on controller "EventManager.Identity.STS.Identity.Controllers.HomeController" ("EventManager.Identity.STS.Identity").
[2020-12-31T09:19:55.8434709+00:00][INFO][49][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executing ViewResult, running view "Index".
[2020-12-31T09:19:55.8570961+00:00][INFO][49][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executed ViewResult - view "Index" executed in 17.833ms.
[2020-12-31T09:19:55.8577196+00:00][INFO][49][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action "EventManager.Identity.STS.Identity.Controllers.HomeController.Index (EventManager.Identity.STS.Identity)" in 18.9094ms
[2020-12-31T09:19:55.8585058+00:00][INFO][49][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint '"EventManager.Identity.STS.Identity.Controllers.HomeController.Index (EventManager.Identity.STS.Identity)"'
[2020-12-31T09:19:55.8591183+00:00][INFO][49][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/" responded 200 in 28.1049 ms
[2020-12-31T09:19:55.8624442+00:00][INFO][49][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/ - - - 200 - text/html;+charset=utf-8 32.1295ms
[2020-12-31T09:20:02.3923079+00:00][INFO][52][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/Account/Login - -
[2020-12-31T09:20:02.3946111+00:00][INFO][52][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T09:20:02.3954901+00:00][INFO][52][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with "{action = \"Login\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(System.String)" on controller "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>" ("EventManager.Identity.STS.Identity").
[2020-12-31T09:20:02.3986743+00:00][INFO][52][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executing ViewResult, running view "Login".
[2020-12-31T09:20:02.4303320+00:00][INFO][52][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executed ViewResult - view "Login" executed in 32.8507ms.
[2020-12-31T09:20:02.4318176+00:00][INFO][52][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)" in 35.5508ms
[2020-12-31T09:20:02.4361137+00:00][INFO][52][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T09:20:02.4388738+00:00][INFO][52][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/Account/Login" responded 200 in 45.3915 ms
[2020-12-31T09:20:02.4398856+00:00][INFO][52][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/Account/Login - - - 200 - text/html;+charset=utf-8 47.5515ms
[2020-12-31T09:20:08.7971393+00:00][INFO][52][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 POST https://auth.em.host/Account/Login application/x-www-form-urlencoded 261
[2020-12-31T09:20:08.7980380+00:00][DBUG][52][IdentityServer4.Hosting.CorsPolicyProvider] CORS request made for path: "/Account/Login" from origin: "null" but was ignored because path was not for an allowed IdentityServer CORS endpoint
[2020-12-31T09:20:08.7986069+00:00][INFO][52][Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware] No CORS policy found for the specified request.
[2020-12-31T09:20:08.8029590+00:00][INFO][52][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T09:20:08.8042955+00:00][INFO][52][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with "{action = \"Login\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EventManager.Identity.STS.Identity.ViewModels.Account.LoginInputModel, System.String)" on controller "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>" ("EventManager.Identity.STS.Identity").
[2020-12-31T09:20:09.0072410+00:00][DBUG][55][IdentityServer4.Hosting.IdentityServerAuthenticationService] Augmenting SignInContext
[2020-12-31T09:20:09.0081241+00:00][DBUG][55][IdentityServer4.Hosting.IdentityServerAuthenticationService] Adding idp claim with value: "local"
[2020-12-31T09:20:09.0087909+00:00][DBUG][55][IdentityServer4.Hosting.IdentityServerAuthenticationService] Adding auth_time claim with value: "1609406409"
[2020-12-31T09:20:09.0111581+00:00][INFO][55][Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler] AuthenticationScheme: "Identity.Application" signed in.
[2020-12-31T09:20:09.0122605+00:00][INFO][55][IdentityServer4.Events.DefaultEventService] UserLoginSuccessEvent { Username: "admin", Provider: null, ProviderUserId: null, SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", DisplayName: "admin", Endpoint: "UI", ClientId: null, Category: "Authentication", Name: "User Login Success", EventType: Success, Id: 1000, Message: null, ActivityId: "0HM5DD6MVD4PO:00000002", TimeStamp: 12/31/2020 09:20:09, ProcessId: 25, LocalIpAddress: "::ffff:172.24.0.7:50003", RemoteIpAddress: "172.24.0.1" }
[2020-12-31T09:20:09.0136504+00:00][INFO][55][Microsoft.AspNetCore.Mvc.Infrastructure.RedirectResultExecutor] Executing RedirectResult, redirecting to "/".
[2020-12-31T09:20:09.0147156+00:00][INFO][55][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)" in 209.5061ms
[2020-12-31T09:20:09.0154767+00:00][INFO][55][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Login (EventManager.Identity.STS.Identity)"'
[2020-12-31T09:20:09.0249073+00:00][INFO][55][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "POST" "/Account/Login" responded 302 in 226.8275 ms
[2020-12-31T09:20:09.0265926+00:00][INFO][55][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 POST https://auth.em.host/Account/Login application/x-www-form-urlencoded 261 - 302 0 - 229.4202ms
[2020-12-31T09:20:09.0635448+00:00][INFO][53][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/ - -
[2020-12-31T09:20:09.0732180+00:00][INFO][53][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint '"EventManager.Identity.STS.Identity.Controllers.HomeController.Index (EventManager.Identity.STS.Identity)"'
[2020-12-31T09:20:09.0747381+00:00][INFO][53][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with "{action = \"Index\", controller = \"Home\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Index()" on controller "EventManager.Identity.STS.Identity.Controllers.HomeController" ("EventManager.Identity.STS.Identity").
[2020-12-31T09:20:09.0777415+00:00][INFO][53][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executing ViewResult, running view "Index".
[2020-12-31T09:20:09.0847856+00:00][INFO][53][Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] Authorization was successful.
[2020-12-31T09:20:09.0926669+00:00][INFO][53][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executed ViewResult - view "Index" executed in 15.0139ms.
[2020-12-31T09:20:09.0936851+00:00][INFO][53][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action "EventManager.Identity.STS.Identity.Controllers.HomeController.Index (EventManager.Identity.STS.Identity)" in 17.0032ms
[2020-12-31T09:20:09.0975498+00:00][INFO][53][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint '"EventManager.Identity.STS.Identity.Controllers.HomeController.Index (EventManager.Identity.STS.Identity)"'
[2020-12-31T09:20:09.0992492+00:00][INFO][53][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/" responded 200 in 32.4010 ms
[2020-12-31T09:20:09.1100285+00:00][INFO][53][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/ - - - 200 - text/html;+charset=utf-8 45.2155ms
[2020-12-31T09:20:11.6345682+00:00][INFO][57][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/connect/authorize?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=d8tkb9ResDud7X1QHQIZsS21uK7qucO2GQ-w0xZ98ZU&code_challenge_method=S256&response_mode=form_post&state=CfDJ8HbmgoufA85PoVB4uWHKwLcA3mdAOL8t2hd-x5kpWzZyWnFEwhaPsYwPmf5pDABTInYKLdxcVVA9hvZMPw3Q5tX5Oy-wThQ1TglmaoSpzifdVQoyvPyquGBIK3Oxuv9RutyiL29EM0NWW8I73pXGQjXfDpoqsyBMdyL0yb57v5ph&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0 - -
[2020-12-31T09:20:11.6376773+00:00][DBUG][57][IdentityServer4.Hosting.EndpointRouter] Request path "/connect/authorize" matched to endpoint type "Authorize"
[2020-12-31T09:20:11.6445449+00:00][DBUG][57][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Authorize", successfully created handler: "IdentityServer4.Endpoints.AuthorizeEndpoint"
[2020-12-31T09:20:11.6452040+00:00][INFO][57][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize"
[2020-12-31T09:20:11.6509893+00:00][DBUG][57][IdentityServer4.Endpoints.AuthorizeEndpoint] Start authorize request
[2020-12-31T09:20:11.6628017+00:00][DBUG][57][IdentityServer4.Endpoints.AuthorizeEndpoint] User in authorize request: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b"
[2020-12-31T09:20:11.6729160+00:00][DBUG][57][IdentityServer4.Validation.AuthorizeRequestValidator] Start authorize request protocol validation
[2020-12-31T09:20:11.8332613+00:00][DBUG][57][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T09:20:11.8342497+00:00][DBUG][57][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T09:20:11.8607039+00:00][DBUG][57][IdentityServer4.Validation.AuthorizeRequestValidator] Checking for PKCE parameters
[2020-12-31T09:20:11.9484795+00:00][WARN][57][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T09:20:11.9840945+00:00][DBUG][56][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T09:20:12.0087917+00:00][WARN][56][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T09:20:12.0596045+00:00][DBUG][57][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] API resources in database
[2020-12-31T09:20:12.0705264+00:00][WARN][57][Microsoft.EntityFrameworkCore.Query] Compiling a query which loads related collections for more than one collection navigation either via 'Include' or through projection but no 'QuerySplittingBehavior' has been configured. By default Entity Framework will use 'QuerySplittingBehavior.SingleQuery' which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'
[2020-12-31T09:20:12.1032180+00:00][DBUG][53][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] scopes in database
[2020-12-31T09:20:12.1245116+00:00][DBUG][53][IdentityServer4.Validation.AuthorizeRequestValidator] Calling into custom validator: "IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator"
[2020-12-31T09:20:12.1360340+00:00][DBUG][53][IdentityServer4.Endpoints.AuthorizeEndpoint] ValidatedAuthorizeRequest
AuthorizeRequestValidationLog { ClientId: "urn:em:client:mvc", ClientName: "Event Manager Identity Admin UI", RedirectUri: "https://auth.em.host/admin/signin-oidc", AllowedRedirectUris: ["https://auth.em.host/admin/signin-oidc"], SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", ResponseType: "code", ResponseMode: "form_post", GrantType: "authorization_code", RequestedScopes: "openid profile email roles", State: "CfDJ8HbmgoufA85PoVB4uWHKwLcA3mdAOL8t2hd-x5kpWzZyWnFEwhaPsYwPmf5pDABTInYKLdxcVVA9hvZMPw3Q5tX5Oy-wThQ1TglmaoSpzifdVQoyvPyquGBIK3Oxuv9RutyiL29EM0NWW8I73pXGQjXfDpoqsyBMdyL0yb57v5ph", UiLocales: null, Nonce: null, AuthenticationContextReferenceClasses: null, DisplayMode: null, PromptMode: "", MaxAge: null, LoginHint: null, SessionId: "8819479A00EA731A640DE09B8DEA6741", Raw: [("client_id": "urn:em:client:mvc"), ("redirect_uri": "https://auth.em.host/admin/signin-oidc"), ("response_type": "code"), ("scope": "openid profile email roles"), ("code_challenge": "d8tkb9ResDud7X1QHQIZsS21uK7qucO2GQ-w0xZ98ZU"), ("code_challenge_method": "S256"), ("response_mode": "form_post"), ("state": "CfDJ8HbmgoufA85PoVB4uWHKwLcA3mdAOL8t2hd-x5kpWzZyWnFEwhaPsYwPmf5pDABTInYKLdxcVVA9hvZMPw3Q5tX5Oy-wThQ1TglmaoSpzifdVQoyvPyquGBIK3Oxuv9RutyiL29EM0NWW8I73pXGQjXfDpoqsyBMdyL0yb57v5ph"), ("x-client-SKU": "ID_NETSTANDARD2_0"), ("x-client-ver": "6.8.0.0")] }
[2020-12-31T09:20:12.1900291+00:00][DBUG][56][IdentityServer4.Services.DefaultConsentService] Client is configured to not require consent, no consent is required
[2020-12-31T09:20:12.1972001+00:00][DBUG][56][IdentityServer4.ResponseHandling.AuthorizeResponseGenerator] Creating Authorization Code Flow response.
[2020-12-31T09:20:12.3209265+00:00][DBUG][57][IdentityServer4.EntityFramework.Stores.PersistedGrantStore] "/qTvIdqb0NHOqAUHTqV/UHDA8qlIq2LIuQsOYL0VMBo=" not found in database
[2020-12-31T09:20:12.5420131+00:00][INFO][56][IdentityServer4.Events.DefaultEventService] TokenIssuedSuccessEvent { ClientId: "urn:em:client:mvc", ClientName: "Event Manager Identity Admin UI", RedirectUri: "https://auth.em.host/admin/signin-oidc", Endpoint: "Authorize", SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", Scopes: "openid profile email roles", GrantType: "authorization_code", Tokens: [Token { TokenType: "code", TokenValue: "****FF28" }], Category: "Token", Name: "Token Issued Success", EventType: Success, Id: 2000, Message: null, ActivityId: "0HM5DD6MVD4PQ:00000002", TimeStamp: 12/31/2020 09:20:12, ProcessId: 25, LocalIpAddress: "::ffff:172.24.0.7:50003", RemoteIpAddress: "172.24.0.1" }
[2020-12-31T09:20:12.5473489+00:00][DBUG][56][IdentityServer4.Endpoints.AuthorizeEndpoint] Authorize endpoint response
AuthorizeResponseLog { SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", ClientId: "urn:em:client:mvc", RedirectUri: "https://auth.em.host/admin/signin-oidc", State: "CfDJ8HbmgoufA85PoVB4uWHKwLcA3mdAOL8t2hd-x5kpWzZyWnFEwhaPsYwPmf5pDABTInYKLdxcVVA9hvZMPw3Q5tX5Oy-wThQ1TglmaoSpzifdVQoyvPyquGBIK3Oxuv9RutyiL29EM0NWW8I73pXGQjXfDpoqsyBMdyL0yb57v5ph", Scope: "openid profile email roles", Error: null, ErrorDescription: null }
[2020-12-31T09:20:12.5621034+00:00][DBUG][56][IdentityServer4.Hosting.IdentityServerAuthenticationService] Augmenting SignInContext
[2020-12-31T09:20:12.5636886+00:00][INFO][56][Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler] AuthenticationScheme: "Identity.Application" signed in.
[2020-12-31T09:20:12.5776056+00:00][INFO][56][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/connect/authorize?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=d8tkb9ResDud7X1QHQIZsS21uK7qucO2GQ-w0xZ98ZU&code_challenge_method=S256&response_mode=form_post&state=CfDJ8HbmgoufA85PoVB4uWHKwLcA3mdAOL8t2hd-x5kpWzZyWnFEwhaPsYwPmf5pDABTInYKLdxcVVA9hvZMPw3Q5tX5Oy-wThQ1TglmaoSpzifdVQoyvPyquGBIK3Oxuv9RutyiL29EM0NWW8I73pXGQjXfDpoqsyBMdyL0yb57v5ph&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0" responded 200 in 941.8317 ms
[2020-12-31T09:20:12.5793972+00:00][INFO][56][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/connect/authorize?client_id=urn%3Aem%3Aclient%3Amvc&redirect_uri=https%3A%2F%2Fauth.em.host%2Fadmin%2Fsignin-oidc&response_type=code&scope=openid%20profile%20email%20roles&code_challenge=d8tkb9ResDud7X1QHQIZsS21uK7qucO2GQ-w0xZ98ZU&code_challenge_method=S256&response_mode=form_post&state=CfDJ8HbmgoufA85PoVB4uWHKwLcA3mdAOL8t2hd-x5kpWzZyWnFEwhaPsYwPmf5pDABTInYKLdxcVVA9hvZMPw3Q5tX5Oy-wThQ1TglmaoSpzifdVQoyvPyquGBIK3Oxuv9RutyiL29EM0NWW8I73pXGQjXfDpoqsyBMdyL0yb57v5ph&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0 - - - 200 - text/html;+charset=UTF-8 944.4633ms
[2020-12-31T09:20:12.9276462+00:00][INFO][57][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 POST https://auth.em.host/connect/token application/x-www-form-urlencoded 286
[2020-12-31T09:20:12.9289581+00:00][DBUG][57][IdentityServer4.Hosting.EndpointRouter] Request path "/connect/token" matched to endpoint type "Token"
[2020-12-31T09:20:12.9360796+00:00][DBUG][57][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Token", successfully created handler: "IdentityServer4.Endpoints.TokenEndpoint"
[2020-12-31T09:20:12.9364954+00:00][INFO][57][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.TokenEndpoint" for "/connect/token"
[2020-12-31T09:20:12.9543956+00:00][DBUG][57][IdentityServer4.Endpoints.TokenEndpoint] Start token request.
[2020-12-31T09:20:12.9592099+00:00][DBUG][57][IdentityServer4.Validation.ClientSecretValidator] Start client validation
[2020-12-31T09:20:12.9744320+00:00][DBUG][57][IdentityServer4.Validation.BasicAuthenticationSecretParser] Start parsing Basic Authentication secret
[2020-12-31T09:20:12.9796186+00:00][DBUG][57][IdentityServer4.Validation.PostBodySecretParser] Start parsing for secret in post body
[2020-12-31T09:20:12.9862611+00:00][DBUG][57][IdentityServer4.Validation.ISecretsListParser] Parser found secret: "PostBodySecretParser"
[2020-12-31T09:20:12.9886395+00:00][DBUG][57][IdentityServer4.Validation.ISecretsListParser] Secret id found: "urn:em:client:mvc"
[2020-12-31T09:20:13.0913658+00:00][DBUG][49][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T09:20:13.0919438+00:00][DBUG][49][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T09:20:13.1093621+00:00][DBUG][49][IdentityServer4.Validation.ISecretsListValidator] Secret validator success: "HashedSharedSecretValidator"
[2020-12-31T09:20:13.1105061+00:00][DBUG][49][IdentityServer4.Validation.ClientSecretValidator] Client validation success
[2020-12-31T09:20:13.1186496+00:00][INFO][49][IdentityServer4.Events.DefaultEventService] ClientAuthenticationSuccessEvent { ClientId: "urn:em:client:mvc", AuthenticationMethod: "SharedSecret", Category: "Authentication", Name: "Client Authentication Success", EventType: Success, Id: 1010, Message: null, ActivityId: "0HM5DD6MVD4PR:00000002", TimeStamp: 12/31/2020 09:20:13, ProcessId: 25, LocalIpAddress: "::ffff:172.24.0.7:50003", RemoteIpAddress: "192.168.32.4" }
[2020-12-31T09:20:13.1264906+00:00][DBUG][49][IdentityServer4.Validation.TokenRequestValidator] Start token request validation
[2020-12-31T09:20:13.1383520+00:00][DBUG][49][IdentityServer4.Validation.TokenRequestValidator] Start validation of authorization code token request
[2020-12-31T09:20:13.2122431+00:00][DBUG][56][IdentityServer4.EntityFramework.Stores.PersistedGrantStore] "/qTvIdqb0NHOqAUHTqV/UHDA8qlIq2LIuQsOYL0VMBo=" found in database: True
[2020-12-31T09:20:13.2984638+00:00][DBUG][55][IdentityServer4.EntityFramework.Stores.PersistedGrantStore] removing "/qTvIdqb0NHOqAUHTqV/UHDA8qlIq2LIuQsOYL0VMBo=" persisted grant from database
[2020-12-31T09:20:13.3385798+00:00][DBUG][51][IdentityServer4.Validation.TokenRequestValidator] Client required a proof key for code exchange. Starting PKCE validation
[2020-12-31T09:20:13.3564045+00:00][DBUG][55][IdentityServer4.Validation.TokenRequestValidator] Validation of authorization code token request success
[2020-12-31T09:20:13.3636671+00:00][INFO][55][IdentityServer4.Validation.TokenRequestValidator] Token request validation success, TokenRequestValidationLog { ClientId: "urn:em:client:mvc", ClientName: "Event Manager Identity Admin UI", GrantType: "authorization_code", Scopes: null, AuthorizationCode: "****FF28", RefreshToken: "********", UserName: null, AuthenticationContextReferenceClasses: null, Tenant: null, IdP: null, Raw: [("client_id": "urn:em:client:mvc"), ("client_secret": "***REDACTED***"), ("code": "0C449EEB208AE22217E4D920149BFA681D5C1E1FC152B24A3F53C04BCA88FF28"), ("grant_type": "authorization_code"), ("redirect_uri": "https://auth.em.host/admin/signin-oidc"), ("code_verifier": "Sn2GXoEKxViKnVinqZb1_CA2cdmoAhF4h9u6nQREtFA")] }
[2020-12-31T09:20:13.5026261+00:00][DBUG][56][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T09:20:13.5038115+00:00][DBUG][56][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T09:20:13.5252568+00:00][DBUG][48][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T09:20:13.5388126+00:00][DBUG][51][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] API resources in database
[2020-12-31T09:20:13.5495753+00:00][DBUG][51][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] scopes in database
[2020-12-31T09:20:13.5629265+00:00][DBUG][51][IdentityServer4.Services.DefaultClaimsService] Getting claims for access token for client: "urn:em:client:mvc"
[2020-12-31T09:20:13.5648153+00:00][DBUG][51][IdentityServer4.Services.DefaultClaimsService] Getting claims for access token for subject: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b"
[2020-12-31T09:20:13.8017589+00:00][DBUG][51][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T09:20:13.8023677+00:00][DBUG][51][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T09:20:13.8162597+00:00][DBUG][56][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T09:20:13.8277575+00:00][DBUG][48][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] API resources in database
[2020-12-31T09:20:13.8879774+00:00][DBUG][49][IdentityServer4.EntityFramework.Stores.ResourceStore] Found [] scopes in database
[2020-12-31T09:20:13.8956620+00:00][DBUG][49][IdentityServer4.Services.DefaultClaimsService] Getting claims for identity token for subject: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b" and client: "urn:em:client:mvc"
[2020-12-31T09:20:13.8966090+00:00][DBUG][49][IdentityServer4.Services.DefaultClaimsService] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
[2020-12-31T09:20:13.9102139+00:00][INFO][49][IdentityServer4.Events.DefaultEventService] TokenIssuedSuccessEvent { ClientId: "urn:em:client:mvc", ClientName: "Event Manager Identity Admin UI", RedirectUri: null, Endpoint: "Token", SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", Scopes: "openid profile email roles", GrantType: "authorization_code", Tokens: [Token { TokenType: "id_token", TokenValue: "****UEVA" }, Token { TokenType: "access_token", TokenValue: "****2XnQ" }], Category: "Token", Name: "Token Issued Success", EventType: Success, Id: 2000, Message: null, ActivityId: "0HM5DD6MVD4PR:00000002", TimeStamp: 12/31/2020 09:20:13, ProcessId: 25, LocalIpAddress: "::ffff:172.24.0.7:50003", RemoteIpAddress: "192.168.32.4" }
[2020-12-31T09:20:13.9120510+00:00][DBUG][49][IdentityServer4.Endpoints.TokenEndpoint] Token request success.
[2020-12-31T09:20:13.9266112+00:00][INFO][49][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "POST" "/connect/token" responded 200 in 998.2517 ms
[2020-12-31T09:20:13.9274010+00:00][INFO][49][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 POST https://auth.em.host/connect/token application/x-www-form-urlencoded 286 - 200 - application/json;+charset=UTF-8 1000.5651ms
[2020-12-31T09:20:14.1632765+00:00][INFO][48][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/connect/userinfo - -
[2020-12-31T09:20:14.1655162+00:00][DBUG][48][IdentityServer4.Hosting.EndpointRouter] Request path "/connect/userinfo" matched to endpoint type "Userinfo"
[2020-12-31T09:20:14.1711681+00:00][DBUG][48][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Userinfo", successfully created handler: "IdentityServer4.Endpoints.UserInfoEndpoint"
[2020-12-31T09:20:14.1719048+00:00][INFO][48][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo"
[2020-12-31T09:20:14.1837031+00:00][DBUG][48][IdentityServer4.Endpoints.UserInfoEndpoint] Start userinfo request
[2020-12-31T09:20:14.1881805+00:00][DBUG][48][IdentityServer4.Validation.BearerTokenUsageValidator] Bearer token found in header
[2020-12-31T09:20:14.3221194+00:00][DBUG][49][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T09:20:14.3228261+00:00][DBUG][49][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T09:20:14.4233351+00:00][DBUG][57][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T09:20:14.4241047+00:00][DBUG][57][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T09:20:14.4598929+00:00][DBUG][47][IdentityServer4.Validation.TokenValidator] Calling into custom token validator: "IdentityServer4.Validation.DefaultCustomTokenValidator"
[2020-12-31T09:20:14.4622470+00:00][DBUG][47][IdentityServer4.Validation.TokenValidator] Token validation success
TokenValidationLog { ClientId: null, ClientName: null, ValidateLifetime: True, AccessTokenType: "Jwt", ExpectedScope: "openid", TokenHandle: null, JwtId: "58A9D50C2827612A1888AE913263B1BC", Claims: [("nbf": 1609406413), ("exp": 1609410013), ("iss": "https://auth.em.host"), ("client_id": "urn:em:client:mvc"), ("sub": "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b"), ("auth_time": 1609406409), ("idp": "local"), ("jti": "58A9D50C2827612A1888AE913263B1BC"), ("sid": "8819479A00EA731A640DE09B8DEA6741"), ("iat": 1609406413), ("scope": ["openid", "profile", "email", "roles"]), ("amr": "pwd")] }
[2020-12-31T09:20:14.4778588+00:00][DBUG][47][IdentityServer4.ResponseHandling.UserInfoResponseGenerator] Creating userinfo response
[2020-12-31T09:20:14.4830855+00:00][DBUG][47][IdentityServer4.ResponseHandling.UserInfoResponseGenerator] Scopes in access token: "openid profile email roles"
[2020-12-31T09:20:14.5163637+00:00][DBUG][48][IdentityServer4.EntityFramework.Stores.ResourceStore] Found ["roles", "openid", "profile", "email"] identity scopes in database
[2020-12-31T09:20:14.5278730+00:00][DBUG][48][IdentityServer4.ResponseHandling.UserInfoResponseGenerator] Requested claim types: "role sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified"
[2020-12-31T09:20:14.6200735+00:00][INFO][48][IdentityServer4.ResponseHandling.UserInfoResponseGenerator] Profile service returned the following claim types: "sub name role preferred_username email email_verified"
[2020-12-31T09:20:14.6210216+00:00][DBUG][48][IdentityServer4.Endpoints.UserInfoEndpoint] End userinfo request
[2020-12-31T09:20:14.6323257+00:00][INFO][48][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/connect/userinfo" responded 200 in 468.0993 ms
[2020-12-31T09:20:14.6335068+00:00][INFO][48][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/connect/userinfo - - - 200 - application/json;+charset=UTF-8 470.0224ms
[2020-12-31T09:20:14.7254894+00:00][INFO][56][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/ - -
[2020-12-31T09:20:14.7302811+00:00][INFO][56][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint '"EventManager.Identity.STS.Identity.Controllers.HomeController.Index (EventManager.Identity.STS.Identity)"'
[2020-12-31T09:20:14.7410484+00:00][INFO][56][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with "{action = \"Index\", controller = \"Home\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Index()" on controller "EventManager.Identity.STS.Identity.Controllers.HomeController" ("EventManager.Identity.STS.Identity").
[2020-12-31T09:20:14.7438783+00:00][INFO][56][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executing ViewResult, running view "Index".
[2020-12-31T09:20:14.7522848+00:00][INFO][56][Microsoft.AspNetCore.Authorization.DefaultAuthorizationService] Authorization was successful.
[2020-12-31T09:20:14.7603258+00:00][INFO][56][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executed ViewResult - view "Index" executed in 16.4717ms.
[2020-12-31T09:20:14.7611484+00:00][INFO][56][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action "EventManager.Identity.STS.Identity.Controllers.HomeController.Index (EventManager.Identity.STS.Identity)" in 19.4046ms
[2020-12-31T09:20:14.7619203+00:00][INFO][56][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executed endpoint '"EventManager.Identity.STS.Identity.Controllers.HomeController.Index (EventManager.Identity.STS.Identity)"'
[2020-12-31T09:20:14.7723430+00:00][INFO][56][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/" responded 200 in 45.5186 ms
[2020-12-31T09:20:14.7749580+00:00][INFO][56][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/ - - - 200 - text/html;+charset=utf-8 49.4399ms
[2020-12-31T09:20:31.5735622+00:00][INFO][47][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/connect/endsession?post_logout_redirect_uri=https%3A%2F%2Fauth.em.host%2Fsignout-callback-oidc&id_token_hint=eyJhbGciOiJSUzI1NiIsImtpZCI6IkE1NEYyRjNGQTAwOTY0QjZEODIyOUYzRDVGREI5MEJGMURBMDhGQzRSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6InBVOHZQNkFKWkxiWUlwODlYOXVRdngyZ2o4USJ9.eyJuYmYiOjE2MDk0MDY0MTMsImV4cCI6MTYwOTQwNjcxMywiaXNzIjoiaHR0cHM6Ly9hdXRoLmVtLmhvc3QiLCJhdWQiOiJ1cm46ZW06Y2xpZW50Om12YyIsImlhdCI6MTYwOTQwNjQxMywiYXRfaGFzaCI6ImloR2t0VWlwdGtKR2xsUzdxOUttX3ciLCJzX2hhc2giOiJOWFZJY25UNk8tbDAtUEtSTDZySFJnIiwic2lkIjoiODgxOTQ3OUEwMEVBNzMxQTY0MERFMDlCOERFQTY3NDEiLCJzdWIiOiJjYmU1YjQwYy04ZWI3LTRiYjAtOGE5Yi0yNzdmYWVlMjBkNmIiLCJhdXRoX3RpbWUiOjE2MDk0MDY0MDksImlkcCI6ImxvY2FsIiwiYW1yIjpbInB3ZCJdfQ.KCklvvqbsOh4aFdDZxwoMCGgv6r-oMN0EHWUyoLWlGJtK5Ca8NrKmctl88kZOQAWTsWytL59U3b431c-wTRFUAbKwxwgWdMj4JgqSMa_vKbUt7cCOeAeQPeoS7SM4PSlr6QO00Xqyh3ZBazPsMuEuJJ2pmnlrIpeAT-WvDr3yA0KJcD2WgSLIUDcGG84Sej_SkIxvKELXaTnnYjnx7hWtfzUHIwSHrk4oJFa8cGnVKPSowk_0dishr3_NzmUkJtF_ho9Cb39Pa9KtaCxN4Ioom-pGqejZ82BUHrbgrypivDqFTJ2yWGk_sEbgzwJh01Y9t6uKgvqLeIJCAJ4WZUEVA&state=CfDJ8HbmgoufA85PoVB4uWHKwLd50IWOhRgS6JQCYryJH6hUXhmikFPv3yLJfBYDEbnfpS3JesVf-nBTRH-ixhrACbAIQbTE70ZNj7MHSqZoeP_nM9ZnEXN5OW5vjxh1xtMIy6m9kHokfjIXhajtystVX6RtSLdu99K7q6FeT33KXwux&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0 - -
[2020-12-31T09:20:31.5790540+00:00][DBUG][47][IdentityServer4.Hosting.EndpointRouter] Request path "/connect/endsession" matched to endpoint type "Endsession"
[2020-12-31T09:20:31.5812895+00:00][DBUG][47][IdentityServer4.Hosting.EndpointRouter] Endpoint enabled: "Endsession", successfully created handler: "IdentityServer4.Endpoints.EndSessionEndpoint"
[2020-12-31T09:20:31.5821036+00:00][INFO][47][IdentityServer4.Hosting.IdentityServerMiddleware] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.EndSessionEndpoint" for "/connect/endsession"
[2020-12-31T09:20:31.5829600+00:00][DBUG][47][IdentityServer4.Endpoints.EndSessionEndpoint] Processing signout request for "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b"
[2020-12-31T09:20:31.5873130+00:00][DBUG][47][IdentityServer4.Validation.EndSessionRequestValidator] Start end session request validation
[2020-12-31T09:20:31.5940125+00:00][DBUG][47][IdentityServer4.Validation.TokenValidator] Start identity token validation
[2020-12-31T09:20:31.7520736+00:00][DBUG][47][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T09:20:31.7529063+00:00][DBUG][47][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T09:20:31.7538063+00:00][DBUG][47][IdentityServer4.Validation.TokenValidator] Client found: "urn:em:client:mvc" / "Event Manager Identity Admin UI"
[2020-12-31T09:20:31.7558285+00:00][DBUG][47][IdentityServer4.Validation.TokenValidator] Calling into custom token validator: "IdentityServer4.Validation.DefaultCustomTokenValidator"
[2020-12-31T09:20:31.7569706+00:00][DBUG][47][IdentityServer4.Validation.TokenValidator] Token validation success
TokenValidationLog { ClientId: "urn:em:client:mvc", ClientName: "Event Manager Identity Admin UI", ValidateLifetime: False, AccessTokenType: null, ExpectedScope: null, TokenHandle: null, JwtId: null, Claims: [("nbf": 1609406413), ("exp": 1609406713), ("iss": "https://auth.em.host"), ("aud": "urn:em:client:mvc"), ("iat": 1609406413), ("at_hash": "ihGktUiptkJGllS7q9Km_w"), ("s_hash": "NXVIcnT6O-l0-PKRL6rHRg"), ("sid": "8819479A00EA731A640DE09B8DEA6741"), ("sub": "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b"), ("auth_time": 1609406409), ("idp": "local"), ("amr": "pwd")] }
[2020-12-31T09:20:31.7683408+00:00][WARN][47][IdentityServer4.Validation.EndSessionRequestValidator] Invalid PostLogoutRedirectUri: "https://auth.em.host/signout-callback-oidc"
[2020-12-31T09:20:31.7698737+00:00][INFO][47][IdentityServer4.Validation.EndSessionRequestValidator] End session request validation success
EndSessionRequestValidationLog { ClientId: "urn:em:client:mvc", ClientName: "Event Manager Identity Admin UI", SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", PostLogOutUri: null, State: null, Raw: [("post_logout_redirect_uri": "https://auth.em.host/signout-callback-oidc"), ("id_token_hint": "***REDACTED***"), ("state": "CfDJ8HbmgoufA85PoVB4uWHKwLd50IWOhRgS6JQCYryJH6hUXhmikFPv3yLJfBYDEbnfpS3JesVf-nBTRH-ixhrACbAIQbTE70ZNj7MHSqZoeP_nM9ZnEXN5OW5vjxh1xtMIy6m9kHokfjIXhajtystVX6RtSLdu99K7q6FeT33KXwux"), ("x-client-SKU": "ID_NETSTANDARD2_0"), ("x-client-ver": "6.8.0.0")] }
[2020-12-31T09:20:31.7752635+00:00][DBUG][47][IdentityServer4.Endpoints.EndSessionEndpoint] Success validating end session request from "urn:em:client:mvc"
[2020-12-31T09:20:31.7792660+00:00][INFO][47][Serilog.AspNetCore.RequestLoggingMiddleware] HTTP "GET" "/connect/endsession?post_logout_redirect_uri=https%3A%2F%2Fauth.em.host%2Fsignout-callback-oidc&id_token_hint=eyJhbGciOiJSUzI1NiIsImtpZCI6IkE1NEYyRjNGQTAwOTY0QjZEODIyOUYzRDVGREI5MEJGMURBMDhGQzRSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6InBVOHZQNkFKWkxiWUlwODlYOXVRdngyZ2o4USJ9.eyJuYmYiOjE2MDk0MDY0MTMsImV4cCI6MTYwOTQwNjcxMywiaXNzIjoiaHR0cHM6Ly9hdXRoLmVtLmhvc3QiLCJhdWQiOiJ1cm46ZW06Y2xpZW50Om12YyIsImlhdCI6MTYwOTQwNjQxMywiYXRfaGFzaCI6ImloR2t0VWlwdGtKR2xsUzdxOUttX3ciLCJzX2hhc2giOiJOWFZJY25UNk8tbDAtUEtSTDZySFJnIiwic2lkIjoiODgxOTQ3OUEwMEVBNzMxQTY0MERFMDlCOERFQTY3NDEiLCJzdWIiOiJjYmU1YjQwYy04ZWI3LTRiYjAtOGE5Yi0yNzdmYWVlMjBkNmIiLCJhdXRoX3RpbWUiOjE2MDk0MDY0MDksImlkcCI6ImxvY2FsIiwiYW1yIjpbInB3ZCJdfQ.KCklvvqbsOh4aFdDZxwoMCGgv6r-oMN0EHWUyoLWlGJtK5Ca8NrKmctl88kZOQAWTsWytL59U3b431c-wTRFUAbKwxwgWdMj4JgqSMa_vKbUt7cCOeAeQPeoS7SM4PSlr6QO00Xqyh3ZBazPsMuEuJJ2pmnlrIpeAT-WvDr3yA0KJcD2WgSLIUDcGG84Sej_SkIxvKELXaTnnYjnx7hWtfzUHIwSHrk4oJFa8cGnVKPSowk_0dishr3_NzmUkJtF_ho9Cb39Pa9KtaCxN4Ioom-pGqejZ82BUHrbgrypivDqFTJ2yWGk_sEbgzwJh01Y9t6uKgvqLeIJCAJ4WZUEVA&state=CfDJ8HbmgoufA85PoVB4uWHKwLd50IWOhRgS6JQCYryJH6hUXhmikFPv3yLJfBYDEbnfpS3JesVf-nBTRH-ixhrACbAIQbTE70ZNj7MHSqZoeP_nM9ZnEXN5OW5vjxh1xtMIy6m9kHokfjIXhajtystVX6RtSLdu99K7q6FeT33KXwux&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0" responded 302 in 204.2373 ms
[2020-12-31T09:20:31.7923614+00:00][INFO][47][Microsoft.AspNetCore.Hosting.Diagnostics] Request finished HTTP/1.1 GET https://auth.em.host/connect/endsession?post_logout_redirect_uri=https%3A%2F%2Fauth.em.host%2Fsignout-callback-oidc&id_token_hint=eyJhbGciOiJSUzI1NiIsImtpZCI6IkE1NEYyRjNGQTAwOTY0QjZEODIyOUYzRDVGREI5MEJGMURBMDhGQzRSUzI1NiIsInR5cCI6IkpXVCIsIng1dCI6InBVOHZQNkFKWkxiWUlwODlYOXVRdngyZ2o4USJ9.eyJuYmYiOjE2MDk0MDY0MTMsImV4cCI6MTYwOTQwNjcxMywiaXNzIjoiaHR0cHM6Ly9hdXRoLmVtLmhvc3QiLCJhdWQiOiJ1cm46ZW06Y2xpZW50Om12YyIsImlhdCI6MTYwOTQwNjQxMywiYXRfaGFzaCI6ImloR2t0VWlwdGtKR2xsUzdxOUttX3ciLCJzX2hhc2giOiJOWFZJY25UNk8tbDAtUEtSTDZySFJnIiwic2lkIjoiODgxOTQ3OUEwMEVBNzMxQTY0MERFMDlCOERFQTY3NDEiLCJzdWIiOiJjYmU1YjQwYy04ZWI3LTRiYjAtOGE5Yi0yNzdmYWVlMjBkNmIiLCJhdXRoX3RpbWUiOjE2MDk0MDY0MDksImlkcCI6ImxvY2FsIiwiYW1yIjpbInB3ZCJdfQ.KCklvvqbsOh4aFdDZxwoMCGgv6r-oMN0EHWUyoLWlGJtK5Ca8NrKmctl88kZOQAWTsWytL59U3b431c-wTRFUAbKwxwgWdMj4JgqSMa_vKbUt7cCOeAeQPeoS7SM4PSlr6QO00Xqyh3ZBazPsMuEuJJ2pmnlrIpeAT-WvDr3yA0KJcD2WgSLIUDcGG84Sej_SkIxvKELXaTnnYjnx7hWtfzUHIwSHrk4oJFa8cGnVKPSowk_0dishr3_NzmUkJtF_ho9Cb39Pa9KtaCxN4Ioom-pGqejZ82BUHrbgrypivDqFTJ2yWGk_sEbgzwJh01Y9t6uKgvqLeIJCAJ4WZUEVA&state=CfDJ8HbmgoufA85PoVB4uWHKwLd50IWOhRgS6JQCYryJH6hUXhmikFPv3yLJfBYDEbnfpS3JesVf-nBTRH-ixhrACbAIQbTE70ZNj7MHSqZoeP_nM9ZnEXN5OW5vjxh1xtMIy6m9kHokfjIXhajtystVX6RtSLdu99K7q6FeT33KXwux&x-client-SKU=ID_NETSTANDARD2_0&x-client-ver=6.8.0.0 - - - 302 0 - 218.7111ms
[2020-12-31T09:20:31.8293264+00:00][INFO][50][Microsoft.AspNetCore.Hosting.Diagnostics] Request starting HTTP/1.1 GET https://auth.em.host/Account/Logout?logoutId=CfDJ8HbmgoufA85PoVB4uWHKwLdMW_ySlXExYrRNst_JauFYlu1LcsZkjbNbsR4UvYIllbbUZ7CnaA-EHI-1VChdao5TLQMTTtqp42xjYxQjVhWy12l0OdNIkAGMbG4wfev12gTikpH0hFtE4ApR38fjT2qSjv1OaQP5VIm1mzSPfaevWW2RhT3AxV1Dw9QuxX3hJz_MmeNbw1KImXjJCLGV5kVwfNIU-fuNZUljgBAQsKbduOCIr9Qk4RyZ_vyRsbRL63q4LtNTdDwuRam3BjWsY64iIPeAJDccMTy_mdwdpE5hd5BznQ-dSSExbWTEboJvo63sqLvzb2J8b-eM_dveC9eurSAx8WZsVvKzObXebAKVhrvafXRmWjL2e8g9bZJtWNDAyEagz_pCxrX-4v4bKLHJAYrxK-RBEQCsy9RFnKRUTzuqafTEyxiXadly_x6ctd_s1IipoF90gQrvafmYaehQZmKAgdiDEaL2fNdb6r2ytiK6cyudxgXrNOVndyZcaURTYjAqy4pOH0xUb2AoMg0oiEkuJIzFBSVknm_V8NZ7 - -
[2020-12-31T09:20:31.8337820+00:00][INFO][50][Microsoft.AspNetCore.Routing.EndpointMiddleware] Executing endpoint '"EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Logout (EventManager.Identity.STS.Identity)"'
[2020-12-31T09:20:31.8377927+00:00][INFO][50][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Route matched with "{action = \"Logout\", controller = \"Account\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout(System.String)" on controller "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>" ("EventManager.Identity.STS.Identity").
[2020-12-31T09:20:31.8500720+00:00][INFO][50][Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler] AuthenticationScheme: "Identity.Application" signed out.
[2020-12-31T09:20:31.8507727+00:00][INFO][50][Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler] AuthenticationScheme: "Identity.External" signed out.
[2020-12-31T09:20:31.8542469+00:00][INFO][50][Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler] AuthenticationScheme: "Identity.TwoFactorUserId" signed out.
[2020-12-31T09:20:31.8570839+00:00][INFO][50][IdentityServer4.Events.DefaultEventService] UserLogoutSuccessEvent { SubjectId: "cbe5b40c-8eb7-4bb0-8a9b-277faee20d6b", DisplayName: "admin", Category: "Authentication", Name: "User Logout Success", EventType: Success, Id: 1002, Message: null, ActivityId: "0HM5DD6MVD4PV:00000002", TimeStamp: 12/31/2020 09:20:31, ProcessId: 25, LocalIpAddress: "::ffff:172.24.0.7:50003", RemoteIpAddress: "172.24.0.1" }
[2020-12-31T09:20:31.8590108+00:00][INFO][50][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executing ViewResult, running view "LoggedOut".
[2020-12-31T09:20:31.8674620+00:00][DBUG][50][IdentityServer4.Hosting.IdentityServerMiddleware] SignOutCalled set; processing post-signout session cleanup.
[2020-12-31T09:20:32.0443469+00:00][DBUG][51][IdentityServer4.EntityFramework.Stores.ClientStore] "urn:em:client:mvc" found in database: True
[2020-12-31T09:20:32.0449323+00:00][DBUG][51][IdentityServer4.Stores.ValidatingClientStore] client configuration validation for client "urn:em:client:mvc" succeeded.
[2020-12-31T09:20:32.0728948+00:00][DBUG][51][IdentityServer4.Services.LogoutNotificationService] No client back-channel logout URLs
[2020-12-31T09:20:32.0942448+00:00][INFO][51][Microsoft.AspNetCore.Mvc.ViewFeatures.ViewResultExecutor] Executed ViewResult - view "LoggedOut" executed in 235.9662ms.
[2020-12-31T09:20:32.1045949+00:00][INFO][51][Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker] Executed action "EventManager.Identity.STS.Identity.Controllers.AccountController<EventManager.Identity.Admin.EntityFramework.Shared.Entities.Identity.UserIdentity, string>.Logout (EventManager.Identity.STS.Identity)" in 265.4332ms
[2020-12-31T09:20:32.1051476+00:00][INFO][51][Micr